import {createRequire}from'module';import {$RefParser,getResolvedInput,sendRequest}from'@hey-api/json-schema-ref-parser';import Ot from'node:fs';import z from'node:path';import ft from'ansi-colors';import {fileURLToPath}from'node:url';import g from'typescript';import {EOL}from'os';import {loadConfig}from'c12';const require = createRequire(import.meta.url);
var Xp=Object.create;var ci=Object.defineProperty;var Hp=Object.getOwnPropertyDescriptor;var Gp=Object.getOwnPropertyNames;var Jp=Object.getPrototypeOf,Zp=Object.prototype.hasOwnProperty;var mi=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var lu=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Yp=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Gp(t))!Zp.call(e,s)&&s!==r&&ci(e,s,{get:()=>t[s],enumerable:!(n=Hp(t,s))||n.enumerable});return e};var uu=(e,t,r)=>(r=e!=null?Xp(Jp(e)):{},Yp(t||!e||!e.__esModule?ci(r,"default",{value:e,enumerable:true}):r,e));var Br=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[s,i]of n)if(i===null)t.delete(s);else if(Array.isArray(i))for(let a of i)t.append(s,a);else i!==void 0&&t.set(s,typeof i=="object"?JSON.stringify(i):i);}return t};var Wu=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let s=new $RefParser,i=getResolvedInput({pathOrUrlOrSchema:t}),a,p,c;if(i.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let f=await sendRequest({fetchOptions:{method:"HEAD",...e,headers:Br(e?.headers,n.headers)},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(p===void 0){let f=c.headers.get("ETag");f&&(p=f!==n.headers.get("If-None-Match"),p&&n.headers.set("If-None-Match",f));}if(p===void 0){let f=c.headers.get("Last-Modified");f&&(p=f!==n.headers.get("If-Modified-Since"),p&&n.headers.set("If-Modified-Since",f));}if(p===false)return {error:"not-modified",response:c}}try{let f=await sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok)return {error:"not-ok",response:c};if(a=c.body?await c.arrayBuffer():new ArrayBuffer(0),p===void 0){let f=new TextDecoder().decode(a);p=f!==n.lastValue,n.lastValue=f;}}else n.lastValue?p=false:n.lastValue=i.type;return p===false?{error:"not-modified",response:c}:{data:await s.bundle({arrayBuffer:a,pathOrUrlOrSchema:void 0,resolvedInput:i})}};var mc=fileURLToPath(import.meta.url),Xn=z.dirname(mc),Hn=()=>{let e=Xn;for(;e!==z.dirname(e);){let r=Ot.readdirSync(e).filter(n=>n==="package.json");if(r[0]){let n=z.join(e,r[0]);return JSON.parse(Ot.readFileSync(n,{encoding:"utf8"}))}e=z.dirname(e);}},Gu=e=>{if(e==="off")return null;if(e){let r=z.isAbsolute(e)?e:z.resolve(Xn,e);return Ot.existsSync(r)?r:null}let t=Xn;for(;t!==z.dirname(t);){let n=Ot.readdirSync(t).filter(s=>s.startsWith("tsconfig")&&s.endsWith(".json")).sort(s=>s==="tsconfig.json"?-1:1);if(n[0])return z.join(t,n[0]);t=z.dirname(t);}return null},Ju=e=>{if(!e)return null;let t=g.readConfigFile(e,g.sys.readFile);if(t.error)throw new Error(`Couldn't read tsconfig from path: ${e}`);return g.parseJsonConfigFileContent(t.config,g.sys,z.dirname(e))};var Je=e=>{Ot.existsSync(e)||Ot.mkdirSync(e,{recursive:true});},ed=e=>{Ot.existsSync(e)&&Ot.rmSync(e,{force:true,recursive:true});},Bt=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var lc=process.stdin.isTTY&&process.stdout.isTTY,Kt=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:n,name:s,pluginName:i}){let a=r instanceof Error?r.message:"Unknown error";super(a),this.args=t,this.cause=r.cause,this.event=n,this.name=s||r.name,this.pluginName=i,this.stack=r.stack;}},ad=(e,t)=>{let r=`openapi-ts-error-${Date.now()}.log`,n=z.resolve(process.cwd(),t);Je(n);let s=z.resolve(n,r),i=`[${new Date().toISOString()}] `;e instanceof Kt&&(i+=`${e.name} during event "${e.event}"
`,e.pluginName&&(i+=`Plugin: ${e.pluginName}
`),i+=`Arguments: ${JSON.stringify(e.args,null,2)}

`);let a=e instanceof Error?e.message:String(e),p=e instanceof Error?e.stack:void 0;return i+=`Error: ${a}
`,p&&(i+=`Stack:
${p}
`),Ot.writeFileSync(s,i),s},pd=async e=>{let t="";e instanceof Kt&&(e.pluginName&&(t+=`**Plugin**: \`${e.pluginName}\`
`),t+=`**Event**: \`${e.event}\`
`,t+=`**Arguments**:
\`\`\`ts
${JSON.stringify(e.args,null,2)}
\`\`\`

`);let r=e instanceof Error?e.message:String(e),n=e instanceof Error?e.stack:void 0;t+=`**Error**: \`${r}\`
`,n&&(t+=`
**Stack Trace**:
\`\`\`
${n}
\`\`\``);let s=new URLSearchParams({body:t,labels:"bug \u{1F525}",title:"Crash Report"}),i=Hn(),a;if(i&&typeof i=="object"&&"bugs"in i&&i.bugs&&typeof i.bugs=="object"&&"url"in i.bugs&&typeof i.bugs.url=="string"&&(a=i.bugs.url,a&&!a.endsWith("/")&&(a+="/")),a){let p=`${a}new?${s.toString()}`,c=(await import('open')).default;await c(p);}},cd=({error:e,logPath:t})=>{let r=Hn(),n;r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&(n=r.name),process.stderr.write(`
\u{1F6D1} ${ft.cyan(n||"")} ${ft.red("encountered an error.")}

${ft.red("\u2757\uFE0F Error:")} ${ft.white(typeof e=="string"?e:e instanceof Error?e.message:"Unknown error")}`+(t?`

${ft.cyan("\u{1F4C4} Crash log saved to:")} ${ft.gray(t)}`:""));},md=async()=>lc?new Promise(e=>{process.stdout.write(`${ft.yellow(`

\u{1F4E2} Open a GitHub issue with crash details?`)} ${ft.yellow("(y/N):")}`),process.stdin.setEncoding("utf8"),process.stdin.once("data",t=>{e(t.trim().toLowerCase()==="y");});}):false;var yi=["after","before","cursor","offset","page","start"];function me({keywords:e=yi}={}){e.length||(e=yi);let t=`^(${e.join("|")})$`;return new RegExp(t)}var Vt=/^[^$_\p{ID_Start}]+/u,de=/^-?\d+(\.\d+)?$/,hi=/^(document|history|location|navigator|window)$/g,gi=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,ae=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,xi=/^(global|process|Buffer)$/g,bi=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,Ce=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var ye=e=>(e||e==="")&&(Ce.lastIndex=0,!Ce.test(e))?`'${e}'`:e,Wt=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,D=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>EOL+r.trim());var Ne="client",fe=e=>{let t=E(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},E=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?._tags?.includes("client"))return r}return {name:""}};var Oi,R=()=>{let e=Oi,t=E(e);return e.client=t,e},Si=e=>(Oi=e,R()),K=e=>E(e).name.startsWith("legacy/"),Tt=e=>{if(K(e))return e.name};var dc=g.createPrinter({newLine:g.NewLineKind.LineFeed,removeComments:false}),Ri=e=>g.createSourceFile("",e,g.ScriptTarget.ESNext,false,g.ScriptKind.TS),yc=Ri(""),hc=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function ke({node:e,unescape:t=false}){let r=dc.printNode(g.EmitHint.Unspecified,e,yc);if(!t)return r;try{return hc(r)}catch{return R().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}function Ii(e){return Ri(e).statements[0]}var C=({text:e})=>g.factory.createIdentifier(e),Ci=()=>g.factory.createThis(),X=({keyword:e})=>{let t=Gn({keyword:e});return g.factory.createModifier(t)},Ti=({initializer:e,modifier:t,name:r,type:n})=>g.factory.createPropertyDeclaration(t?[X({keyword:t})]:void 0,r,void 0,n,e),le={boolean:e=>e?g.factory.createTrue():g.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=C({text:r});if(e){let s=C({text:e});return g.factory.createExportSpecifier(t,n,s)}return g.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=C({text:r});if(e){let s=C({text:e});return g.factory.createImportSpecifier(t,n,s)}return g.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?g.factory.createPrefixUnaryExpression(g.SyntaxKind.MinusToken,g.factory.createNumericLiteral(Math.abs(e))):g.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=Wt(r));let n=r.includes("'")&&r.includes('"'),s=r.includes(`
`),i=r.startsWith("`"),a=r.startsWith("\\`")&&r.endsWith("\\`");return (s||n||i)&&!a&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?C({text:r}):jt({text:r})}},Pt=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",lt=e=>e!==void 0,gc=({commentObject:e,node:t})=>{let r=e.lines.filter(a=>!!a||a==="");if(!r.length)return;if(!e.jsdoc){for(let a of r)g.addSyntheticLeadingComment(t,g.SyntaxKind.SingleLineCommentTrivia,` ${a}`,true);return}let n=r.map((a,p)=>{let c=a;return p!==r.length&&(c=`${c}
`),g.factory.createJSDocText(c)}),s=g.factory.createJSDocComment(g.factory.createNodeArray(n),void 0),i=ke({node:s,unescape:true}).replace("/*","").replace("*  */","");g.addSyntheticLeadingComment(t,g.SyntaxKind.MultiLineCommentTrivia,i,true);},te=({comments:e=[],node:t})=>{let r=!!e.find(s=>typeof s=="object"&&s),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let s of n)gc({commentObject:s,node:t});};var re=(e,t)=>g.isTypeNode(e)?e:typeof e=="number"?g.factory.createLiteralTypeNode(le.number(e)):he({typeArguments:t?.map(r=>re(r)),typeName:e}),Jn=({expression:e,name:t})=>g.factory.createPropertyAccessChain(e,g.factory.createToken(g.SyntaxKind.QuestionDotToken),t),we=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?C({text:e}):e;if(t&&typeof r!="number")return Jn({expression:n,name:r});if(typeof r=="string"){if(Ce.lastIndex=0,!Ce.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let i=C({text:r});return g.factory.createElementAccessExpression(n,i)}let s=C({text:r});return g.factory.createPropertyAccessExpression(n,s)}if(typeof r=="number"){let s=g.factory.createNumericLiteral(r);return g.factory.createElementAccessExpression(n,s)}return g.factory.createPropertyAccessExpression(n,r)},Zn=()=>g.factory.createNull(),ve=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:s})=>{if(s===null)return Zn();if(Array.isArray(s))return Yn({elements:s});if(typeof s=="object")return Xr({identifiers:e,obj:s,shorthand:r});if(typeof s=="number")return le.number(s);if(typeof s=="boolean")return le.boolean(s);if(typeof s=="string"){if(t){let i=s.split(".");return we({expression:i[0],name:i[1]})}return le.string(s,n)}},yr=e=>e.map(t=>{if("destructure"in t)return Ut({name:g.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:g.factory.createBindingElement(void 0,void 0,C({text:n.name}),void 0)).filter(Boolean)),type:t.type!==void 0?re(t.type):void 0});let r=t.accessLevel?[X({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(X({keyword:"readonly"})),Ut({initializer:t.default!==void 0?ve({value:t.default}):void 0,modifiers:r,name:C({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?re(t.type):void 0})}),Gn=({keyword:e})=>{switch(e){case "any":return g.SyntaxKind.AnyKeyword;case "async":return g.SyntaxKind.AsyncKeyword;case "boolean":return g.SyntaxKind.BooleanKeyword;case "export":return g.SyntaxKind.ExportKeyword;case "never":return g.SyntaxKind.NeverKeyword;case "number":return g.SyntaxKind.NumberKeyword;case "private":return g.SyntaxKind.PrivateKeyword;case "protected":return g.SyntaxKind.ProtectedKeyword;case "public":return g.SyntaxKind.PublicKeyword;case "readonly":return g.SyntaxKind.ReadonlyKeyword;case "static":return g.SyntaxKind.StaticKeyword;case "string":return g.SyntaxKind.StringKeyword;case "undefined":return g.SyntaxKind.UndefinedKeyword;case "unknown":return g.SyntaxKind.UnknownKeyword;case "void":return g.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},At=({keyword:e})=>{let t=Gn({keyword:e});return g.factory.createKeywordTypeNode(t)},hr=e=>e.map(t=>g.isTypeParameterDeclaration(t)?t:gr({constraint:t.extends?typeof t.extends=="string"?At({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?Pt(t.default)?t.default:g.factory.createLiteralTypeNode(t.default?g.factory.createTrue():g.factory.createFalse()):void 0,name:t.name})),Pi=({operator:e,type:t})=>{let r=e==="keyof"?g.SyntaxKind.KeyOfKeyword:e==="readonly"?g.SyntaxKind.ReadonlyKeyword:g.SyntaxKind.UniqueKeyword;return g.factory.createTypeOperatorNode(r,t)},gr=({constraint:e,defaultType:t,modifiers:r,name:n})=>g.factory.createTypeParameterDeclaration(r,n,e,t),zr=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:s,typeParameter:i})=>g.factory.createMappedTypeNode(n,i,t,r,s,e),ji=({literal:e})=>g.factory.createLiteralTypeNode(e),Qr=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:i=[],types:a=[]})=>{let p=g.factory.createArrowFunction(e?[X({keyword:"async"})]:void 0,a?hr(a):void 0,yr(n),s?re(s):void 0,void 0,Array.isArray(i)?ge({multiLine:r,statements:i}):i);return te({comments:t,node:p}),p},Ai=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:i=[],types:a=[]})=>{let p=g.factory.createFunctionExpression(e?[X({keyword:"async"})]:void 0,void 0,void 0,a?hr(a):void 0,yr(n),s?re(s):void 0,ge({multiLine:r,statements:i}));return te({comments:t,node:p}),p},Yn=({elements:e,multiLine:t=false})=>g.factory.createArrayLiteralExpression(e.map(n=>Pt(n)?n:ve({value:n})).filter(lt),t||!Array.isArray(e[0])&&typeof e[0]=="object"),Ei=({expression:e})=>g.factory.createAwaitExpression(e),Ni=({parameters:e=[],returnType:t,typeParameters:r})=>g.factory.createFunctionTypeNode(r,e,t),Xr=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:s,unescape:i=false})=>{let a=Array.isArray(n)?n.map(c=>{let m=false;if("key"in c){let{key:l}=c;m=l===c.value,(l.match(/^[0-9]/)&&l.match(/\D+/g)||l.match(/\W/g)||l==="")&&!l.startsWith("'")&&!l.endsWith("'")&&(c.key=`'${l}'`);}let f;if("spread"in c){let l=Pt(c.spread)?c.spread:C({text:c.spread});f=g.factory.createSpreadAssignment(c.assertion?br({expression:l,type:typeof c.assertion=="string"?At({keyword:c.assertion}):c.assertion}):l);}else if(c.shorthand||s&&m)f=g.factory.createShorthandPropertyAssignment(c.value);else {let l=Pt(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?Xr({multiLine:r,obj:c.value,shorthand:s,unescape:i}):ve({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:s,unescape:i,value:c.value});if(!l)return;t.includes(c.key)&&!g.isObjectLiteralExpression(l)&&(l=C({text:c.value})),f=Ur({initializer:l,name:c.key});}return te({comments:c.comments,node:f}),f}).filter(lt):Object.entries(n).map(([c,m])=>{let f=ve({identifiers:t.includes(c)?Object.keys(m):[],shorthand:s,unescape:i,value:m});if(!f)return;t.includes(c)&&!g.isObjectLiteralExpression(f)&&(f=C({text:m}));let l=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),s&&l?g.factory.createShorthandPropertyAssignment(m):Ur({initializer:f,name:c})}).filter(lt),p=g.factory.createObjectLiteralExpression(a,r);return te({comments:e,node:p}),p},ki=({comments:e={},leadingComment:t,name:r,obj:n})=>{let s=Array.isArray(n)?n.map(a=>{let p=bc({initializer:ve({value:a.value}),name:a.key});return te({comments:a.comments,node:p}),p}):Object.entries(n).map(([a,p])=>{let c=g.factory.createEnumMember(a,ve({unescape:true,value:p}));return te({comments:e[a],node:c}),c}),i=g.factory.createEnumDeclaration([X({keyword:"export"})],C({text:r}),s);return te({comments:t,node:i}),i},bc=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=jt({isSingleQuote:false,text:r}):r=ye(r)),g.factory.createEnumMember(r,e)},vi=({name:e,statements:t})=>g.factory.createModuleDeclaration([X({keyword:"export"})],C({text:e}),g.factory.createModuleBlock(t),g.NodeFlags.Namespace),wi=({indexType:e,objectType:t})=>g.factory.createIndexedAccessTypeNode(t,e),jt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),g.factory.createStringLiteral(t,e)),$i=({condition:e,whenFalse:t,whenTrue:r})=>g.factory.createConditionalExpression(e,g.factory.createToken(g.SyntaxKind.QuestionToken),r,g.factory.createToken(g.SyntaxKind.ColonToken),t),qi=({text:e})=>g.factory.createTypeOfExpression(C({text:e})),Mi=({comment:e,exportType:t,name:r,type:n,typeParameters:s=[]})=>{let i=g.factory.createTypeAliasDeclaration(t?[X({keyword:"export"})]:void 0,C({text:r}),hr(s),re(n));return te({comments:e,node:i}),i},he=({typeArguments:e,typeName:t})=>g.factory.createTypeReferenceNode(t,e),Fi=({type:e})=>g.factory.createParenthesizedType(e),Ut=({initializer:e,modifiers:t,name:r,required:n=true,type:s})=>g.factory.createParameterDeclaration(t,void 0,r,n?void 0:g.factory.createToken(g.SyntaxKind.QuestionToken),s,e),xr=({argumentsArray:e,expression:t,typeArguments:r})=>g.factory.createNewExpression(t,r,e),Li=({awaitModifier:e,expression:t,initializer:r,statement:n})=>g.factory.createForOfStatement(e,r,t,n),Di=({left:e,right:t})=>g.factory.createAssignment(e,t),ge=({multiLine:e=true,statements:t})=>g.factory.createBlock(t,e),Ur=({initializer:e,name:t})=>g.factory.createPropertyAssignment(t,e),_i=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return g.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},br=({expression:e,type:t})=>g.factory.createAsExpression(e,t),Bi=({value:e})=>{let t=[],r="";for(let s of e.slice(0).reverse())if(typeof s=="string")r=`${s}${r}`;else {let i=t.length?g.factory.createTemplateMiddle(r):g.factory.createTemplateTail(r),a=g.factory.createTemplateLiteralTypeSpan(s,i);t.push(a),r="";}return g.factory.createTemplateLiteralType(g.factory.createTemplateHead(r),t.reverse())};var Ki=({module:e})=>g.factory.createExportDeclaration(void 0,false,void 0,le.string(e)),$e=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?C({text:e}):e,s=t.filter(a=>a!==void 0).map(a=>typeof a=="string"?C({text:a}):a);return g.factory.createCallExpression(n,r,s)},Vi=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),s=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return le.export({alias:m.alias,asType:n&&m.asType,name:m.name})}),i=g.factory.createNamedExports(s),a=le.string(t);return g.factory.createExportDeclaration(void 0,!n,i,a)},Wi=({assertion:e,comment:t,destructure:r,exportConst:n,expression:s,name:i,typeName:a})=>{let p=e?br({expression:s,type:typeof e=="string"?he({typeName:e}):e}):s,c=C({text:i}),m=g.factory.createVariableDeclaration(r?g.factory.createObjectBindingPattern([g.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,a?typeof a=="string"?he({typeName:a}):a:void 0,p),f=g.factory.createVariableStatement(n?[X({keyword:"export"})]:void 0,g.factory.createVariableDeclarationList([m],g.NodeFlags.Const));return te({comments:t,node:f}),f},Ui=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(f=>typeof f!="object"||!f.asType),s,i=[];r.forEach(f=>{let l=typeof f=="string"?{name:f}:f;l.name==="*"&&l.alias?s=l:i.push(le.import({alias:l.alias,asType:n&&l.asType,name:l.name}));});let a=s?g.factory.createNamespaceImport(C({text:s.alias})):g.factory.createNamedImports(i),p=g.factory.createImportClause(!n,void 0,a),c=le.string(t);return g.factory.createImportDeclaration(void 0,p,c)};var zi=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:s=[]})=>{let i=e?[X({keyword:e})]:void 0,a=g.factory.createConstructorDeclaration(i,yr(n),ge({multiLine:r,statements:s}));return te({comments:t,node:a}),a},Qi=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:s,parameters:i=[],returnType:a,statements:p=[],types:c=[]})=>{let m=e?[X({keyword:e})]:[];r&&m.push(X({keyword:"static"}));let f=g.factory.createMethodDeclaration(m,void 0,C({text:s}),void 0,c?hr(c):void 0,yr(i),a?re(a):void 0,ge({multiLine:n,statements:p}));return te({comments:t,node:f}),f},Xi=({decorator:e,exportClass:t,extendedClasses:r,name:n,nodes:s})=>{let i=[];t&&i.push(X({keyword:"export"})),e&&i.unshift(g.factory.createDecorator($e({functionName:e.name,parameters:e.args.map(p=>ve({value:p})).filter(lt)})));let a=[];if(r)for(let p of r)a.push(g.factory.createHeritageClause(g.SyntaxKind.ExtendsKeyword,[g.factory.createExpressionWithTypeArguments(C({text:p}),void 0)]));return g.factory.createClassDeclaration(i,C({text:n}),void 0,a,s)};var Nt=({expression:e})=>g.factory.createExpressionStatement(e);var Hr=({expression:e})=>g.factory.createReturnStatement(e),Gi=({args:e=[],name:t,types:r=[]})=>{let n=r.map(p=>he({typeName:p})),s=e.map(p=>g.isExpression(p)?p:C({text:p})).filter(lt),i=$e({functionName:t,parameters:s,types:n});return Hr({expression:i})},Ji=({expression:e})=>Hr({expression:typeof e=="string"?C({text:e}):e});var zt=e=>e.slice(1).reduce((t,r)=>(Ce.lastIndex=0,Ce.test(r)?Jn({expression:t,name:r}):g.factory.createElementAccessChain(t,g.factory.createToken(g.SyntaxKind.QuestionDotToken),C({text:r}))),C({text:e[0]})),Gr=e=>e.slice(1).reduce((t,r)=>we({expression:t,name:r}),C({text:e[0]})),Zi=({expressions:e})=>e.reduce((r,n)=>we({expression:r,name:n})),Jr=({left:e,operator:t="=",right:r})=>g.factory.createBinaryExpression(e,t==="="?g.SyntaxKind.EqualsToken:t==="==="?g.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?g.SyntaxKind.QuestionQuestionToken:g.SyntaxKind.InKeyword,typeof r=="string"?C({text:r}):r),Qt=({elseStatement:e,expression:t,thenStatement:r})=>g.factory.createIfStatement(t,r,e),Yi=({path:e})=>{let t=zt(e),r=Gr(e),n=ge({statements:[Nt({expression:Jr({left:r,right:xr({argumentsArray:[r],expression:C({text:"Date"})})})})]});return Qt({expression:t,thenStatement:n})},eo=({path:e,transformerName:t})=>{let r=zt(e),n=Gr(e),s=ge({statements:[Nt({expression:$e({functionName:t,parameters:[n]})})]});return [Qt({expression:r,thenStatement:s})]},to=({path:e,transformerName:t})=>{let r=zt(e),n=Gr(e);return Qt({expression:$e({functionName:we({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:ge({statements:[Nt({expression:g.factory.createCallChain(we({expression:n,name:"forEach"}),void 0,void 0,[C({text:t})])})]})})},ro=({parameterName:e})=>{let t=C({text:"Date"});return xr({argumentsArray:[C({text:e})],expression:t})},no=({path:e,transformExpression:t})=>{let r=zt(e),n=Gr(e);return Qt({expression:$e({functionName:we({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:ge({statements:[Nt({expression:Jr({left:n,right:g.factory.createCallChain(we({expression:n,name:"map"}),void 0,void 0,[Qr({parameters:[{name:"item"}],statements:t})])})})]})})};var jc=he({typeName:"null"}),Xt=({isNullable:e,node:t})=>e?g.factory.createUnionTypeNode([t,jc]):t,es=({indexKey:e,indexProperty:t,isNullable:r,properties:n,useLegacyResolution:s})=>{let a=n.map(m=>{let f=m.isReadOnly?[X({keyword:"readonly"})]:void 0,l=m.isRequired!==false?void 0:g.factory.createToken(g.SyntaxKind.QuestionToken),u=re(m.type);let d=g.factory.createPropertySignature(f,s||typeof m.name=="string"&&m.name.match(Ce)||typeof m.name!="string"&&g.isPropertyName(m.name)?m.name:jt({text:m.name}),l,u);return te({comments:m.comment,node:d}),d}),p=false;if(t)if(!n.length&&e){let m=zr({questionToken:g.factory.createToken(g.SyntaxKind.QuestionToken),type:At({keyword:"string"}),typeParameter:gr({constraint:he({typeName:e}),name:C({text:String(t.name)})})});a.push(m),p=true;}else {let m=t.isReadOnly?[X({keyword:"readonly"})]:void 0,f=g.factory.createIndexSignature(m,[Ut({name:C({text:String(t.name)}),type:At({keyword:"string"})})],re(t.type));a.push(f);}let c=p?a[0]:g.factory.createTypeLiteralNode(a);return Xt({isNullable:r,node:c})},Or=({isNullable:e,types:t})=>{let r=t.map(s=>re(s)),n=g.factory.createUnionTypeNode(r);return Xt({isNullable:e,node:n})},so=({isNullable:e,types:t})=>{let r=t.map(s=>re(s)),n=g.factory.createIntersectionTypeNode(r);return Xt({isNullable:e,node:n})},io=({isNullable:e=false,types:t})=>{let r=t.map(s=>re(s)),n=g.factory.createTupleTypeNode(r);return Xt({isNullable:e,node:n})},oo=(e,t,r=false,n=true)=>{let s=Or({types:e}),i=Or({types:t}),a=es({properties:[{name:`[key: ${ke({node:s,unescape:true})}]`,type:i}],useLegacyResolution:n});return Xt({isNullable:r,node:a})},ao=(e,t=false)=>{let r=he({typeArguments:[Array.isArray(e)?Or({types:e}):e],typeName:"Array"});return Xt({isNullable:t,node:r})};var o={anonymousFunction:Ai,arrayLiteralExpression:Yn,arrowFunction:Qr,asExpression:br,assignment:Di,awaitExpression:Ei,binaryExpression:Jr,block:ge,callExpression:$e,classDeclaration:Xi,conditionalExpression:$i,constVariable:Wi,constructorDeclaration:zi,enumDeclaration:ki,exportAllDeclaration:Ki,exportNamedDeclaration:Vi,expressionToStatement:Nt,forOfStatement:Li,functionTypeNode:Ni,identifier:C,ifStatement:Qt,indexedAccessTypeNode:wi,isTsNode:Pt,keywordTypeNode:At,literalTypeNode:ji,mappedTypeNode:zr,methodDeclaration:Qi,namedImportDeclarations:Ui,namespaceDeclaration:vi,newExpression:xr,nodeToString:ke,null:Zn,objectExpression:Xr,ots:le,parameterDeclaration:Ut,propertyAccessExpression:we,propertyAccessExpressions:Zi,propertyAssignment:Ur,propertyDeclaration:Ti,regularExpressionLiteral:_i,returnFunctionCall:Gi,returnStatement:Hr,returnVariable:Ji,safeAccessExpression:zt,stringLiteral:jt,stringToTsNodes:Ii,templateLiteralType:Bi,this:Ci,transformArrayMap:no,transformArrayMutation:to,transformDateMutation:Yi,transformFunctionMutation:eo,transformNewDate:ro,typeAliasDeclaration:Mi,typeArrayNode:ao,typeInterfaceNode:es,typeIntersectionNode:so,typeNode:re,typeOfExpression:qi,typeOperatorNode:Pi,typeParameterDeclaration:gr,typeParenthesizedNode:Fi,typeRecordNode:oo,typeReferenceNode:he,typeTupleNode:io,typeUnionNode:Or,valueToExpression:ve};var Ec=[ae,bi,gi,xi,hi],Zr=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(Vt.lastIndex=0,Vt.test(t))return `_${t}`;for(let r of Ec){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var po=/[\p{Lu}]/u,ts=/[\p{Ll}]/u,mo=/([\p{Alpha}\p{N}_]|$)/u,Ht=/[_.\- `\\[\]{}\\/]+/,Nc=new RegExp(`^${Ht.source}`),rs=new RegExp(`${Ht.source}${mo.source}`,"gu"),co=new RegExp(`\\d+${mo.source}`,"gu"),kc=({case:e,string:t})=>{let r=false,n=false,s=false,i=false,a=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let p=0;p<t.length;p++){let c=t[p];i=p>2?t[p-3]===a:true;let m=p+1,f=t[m];for(Ht.lastIndex=0;f&&Ht.test(f);)m+=1,f=t[m];let l=m!==p+1;if(ts.lastIndex=0,po.lastIndex=0,po.test(c)&&(r||f&&!l&&f!=="s"&&ts.test(f)))t=`${t.slice(0,p)}${a}${t.slice(p)}`,p++,s=n,r=false,n=true;else if(n&&s&&ts.test(c)&&!i&&!(c==="s"&&(!f||f.toLocaleLowerCase()!==f)))t=`${t.slice(0,p-1)}${a}${t.slice(p-1)}`,s=n,r=true,n=false;else {let u=c.toLocaleLowerCase(),d=c.toLocaleUpperCase();s=n,r=u===c&&d!==c,n=d===c&&u!==c;}}return t},j=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(Ht.lastIndex=0,Ht.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=kc({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace(Nc,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(rs,(i,a,p)=>p===0&&!t?i:`_${a}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(rs.lastIndex=0,co.lastIndex=0,n=n.replaceAll(co,(i,a,p)=>["_","-","."].includes(n.charAt(p+i.length))?i:i.toLocaleUpperCase()),n=n.replaceAll(rs,(i,a,p)=>p===0&&!t&&i[0]&&r.startsWith(i[0])?i:a.toLocaleUpperCase())),n):""};var qe=class{_exportFromIndex;_headers=[];_id;_identifierCase;_imports=new Map;_items=[];_name;_path;identifiers={};constructor({dir:t,exportFromIndex:r=false,header:n=true,id:s,identifierCase:i,name:a}){this._exportFromIndex=r,this._id=s,this._identifierCase=i,this._name=this._setName(a),this._path=z.resolve(t,this._name),n&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}blockIdentifier({$ref:t,namespace:r}){let{name:n,ref:s}=lo(t),i=this.identifiers[n.toLocaleLowerCase()]?.[r]?.[s];if(!i)throw new Error(`Identifier for $ref ${t} in namespace ${r} not found`);return i.name=false,{created:false,name:i.name}}get exportFromIndex(){return this._exportFromIndex}get id(){return this._id}identifier(t){return ss({case:this._identifierCase,identifiers:this.identifiers,...t})}import({module:t,...r}){let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let s=n.get(r.name);return s?{...s,name:s.alias||s.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=ns(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let f=t.config.configFile.split("/");m=f.slice(0,f.length-1);}n=z.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);n=m._path;}let s=this._path.split(z.sep),i=n.split(z.sep),a=-1,p="";for(let m of s)if(a+=1,i[a]!==m){let f=Array.from({length:s.length-a}).fill(""),l=i.slice(a),u=l.slice(0,l.length-1);u.length&&u.push(""),p=(f.join("../")||"./")+u.join("/");break}let c=i[i.length-1];return `${p}${ns(c).name}`}remove(t){Ot.rmSync(this._path,t);}removeNode(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=ns(t);return [n,"gen",r].filter(Boolean).join(".")}_toString(t,r){let n=[];this._headers.length&&n.push(this._headers.join(`
`));let s=r?.options.moduleResolution===g.ModuleResolutionKind.NodeNext,i=[];for(let[a,p]of this._imports.entries()){let c=Array.from(p.values()),m=a;s&&(m.startsWith("./")||m.startsWith("../"))&&(m==="./client"?m="./client/index.js":m=`${m}.js`);let f=o.namedImportDeclarations({imports:c,module:m});i.push(ke({node:f}));}return i.length&&n.push(i.join(`
`)),n=n.concat(this._items.map(a=>typeof a=="string"?a:ke({node:a,unescape:true}))),n.join(t)}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let n=this._path;if(typeof this._path=="string"){let s=this._path.split(z.sep);n=s.slice(0,s.length-1).join(z.sep);}Je(n),Ot.writeFileSync(this._path,this._toString(t,r));}},lo=e=>{let t=e,r=[],n=t.split("/"),s=n[n.length-1]||"",i=n.indexOf("properties");if(i!==-1)for(t=n.slice(0,i).join("/"),s=n[i-1]||"";i+1<n.length;){let a=n[i+1];if(!a)throw new Error(`Invalid $ref: ${e}`);r.push(a),i+=2;}return {name:s,properties:r,ref:t}},ss=({$ref:e,case:t,count:r=1,create:n=false,identifiers:s,nameTransformer:i,namespace:a})=>{let{name:p,properties:c,ref:m}=lo(e);if(!p)return {created:false,name:""};let f=j({case:t,value:p});r>1&&(f=`${f}${r}`);let l=f.toLocaleLowerCase();s[l]||(s[l]={});let u=s[l];if(a==="enum"&&(u.type||u.value)||a!=="enum"&&u.enum)return ss({$ref:m,case:t,count:r+1,create:n,identifiers:s,nameTransformer:i,namespace:a});u[a]||(u[a]={});let d=u[a],y=d[m];if(y){let b=y.name;return c.length&&(b+=c.map(A=>`['${A}']`).join("")),{created:false,name:b}}let x=j({case:t,value:i?.(p)??p});r>1&&(x=`${x}${r}`);let O=d[x];return O?O.$ref===m?{created:false,name:O.name}:ss({$ref:m,case:t,count:r+1,create:n,identifiers:s,nameTransformer:i,namespace:a}):n?(O={$ref:m,name:Zr(x)},d[x]=O,d[O.$ref]=O,{created:true,name:O.name}):(delete u[a],{created:false,name:""})},ns=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var Jt="#/ir/",Yr=e=>{let t=is(e);return t.length===3&&t[0]==="components"},J=e=>{let t=is(e),r=t[t.length-1];return decodeURI(r)},is=e=>e.replace(/^#\//,"").split("/"),os=({$ref:e,spec:t})=>{let r=is(decodeURI(e)),n=t;for(let s of r){let i=s;if(n[i]===void 0)throw new Error(`Reference not found: ${e}`);n=n[i];}return n};var en=class{config;files;ir;spec;listeners;constructor({config:t,spec:r}){this.config=t,this.files={},this.ir={},this.listeners={},this.spec=r;}async broadcast(t,...r){let n=this.listeners[t];if(n)for(let s of n)try{await s.callbackFn(...r);}catch(i){let a=i instanceof Error?i:new Error(String(i));throw new Kt({args:r,error:a,event:t,name:"BroadcastError",pluginName:s.pluginName})}}createFile(t){let r=t.path.split("/"),n=z.resolve(this.config.output.path,...r.slice(0,r.length-1)),s=new qe({dir:n,exportFromIndex:t.exportFromIndex,id:t.id,identifierCase:t.identifierCase,name:`${r[r.length-1]}.ts`});return this.files[t.id]=s,s}dereference(t){let r=this.resolveRef(t.$ref),n={...t,...r};return delete n.$ref,n}file({id:t}){return this.files[t]}resolveIrRef(t){return os({$ref:t,spec:this.ir})}resolveRef(t){return os({$ref:t,spec:this.spec})}subscribe(t,r,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({callbackFn:r,pluginName:n??""});}};var tn=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},ut=e=>{for(let t in e)if(e[t].required)return  true;return  false},uo=e=>e?!!(ut(e.cookie)||ut(e.header)||ut(e.path)||ut(e.query)):false,as=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let n=t.cookie[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:tn({context:e,parameter:n})}}for(let r in t.header){let n=t.header[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:tn({context:e,parameter:n})}}for(let r in t.path){let n=t.path[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:tn({context:e,parameter:n})}}for(let r in t.query){let n=t.query[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:tn({context:e,parameter:n})}}}};var ue=({schema:e})=>{if(!e.items)return e;let t=[],r=[];for(let n of e.items){if(!n.type&&n.items||e.type==="tuple"){t.push(n);continue}if(!n.type||n.type==="boolean"||n.type==="integer"||n.type==="null"||n.type==="number"||n.type==="string"||n.type==="unknown"||n.type==="void"){let s=`${n.$ref??""}${n.type??""}${n.const!==void 0?`const-${n.const}`:""}`;r.includes(s)||(r.push(s),t.push(n));continue}t.push(n);}if(e.items=t,e.items.length<=1&&e.type!=="array"&&e.type!=="enum"&&e.type!=="tuple"){let n=e.items[0];delete e.logicalOperator,delete e.items,e={...e,...n};}return e.type==="unknown"?{}:e};var I=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var ps=({items:e,schema:t})=>{for(let r of e)t.accessScopes=I(t.accessScopes,r.accessScopes);t.items=e;},F=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(ps({items:e,schema:n}),n):e.length!==1?(ps({items:e,schema:n}),n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(ps({items:e,schema:n}),n):n;var rn=e=>!!(uo(e.parameters)||e.body?.required),v=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,yo=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return as({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,s=n.$ref?e.resolveIrRef(n.$ref):n,a=("schema"in s?s.schema:s)?.properties?.[r.pagination];return a?{in:"body",name:r.pagination,schema:a}:as({context:e,parameters:t.parameters})},cs=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},Me=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},s;for(let p in e.responses){let c=e.responses[p];switch(cs({statusCode:p})){case "1XX":case "3XX":break;case "2XX":n.properties[p]=c.schema;break;case "4XX":case "5XX":r.properties[p]=c.schema;break;case "default":s=c;break}}if(s){let p=false;Object.keys(n.properties).length||(n.properties.default=s.schema,p=true);let c=(s.schema.description??"").toLocaleLowerCase(),m=(s.schema.$ref??"").toLocaleLowerCase();["success"].some(u=>c.includes(u)||m.includes(u))&&(n.properties.default=s.schema,p=true),["error","problem"].some(u=>c.includes(u)||m.includes(u))&&(r.properties.default=s.schema,p=true),p||(r.properties.default=s.schema);}let i=Object.keys(r.properties);if(i.length){r.required=i,t.errors=r;let p=F({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});p=ue({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.error=p);}let a=Object.keys(n.properties);if(a.length){n.required=a,t.responses=n;let p=F({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});p=ue({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.response=p);}return t};var Zt=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},ho="/",S=(e,t="")=>`${e}${ho}${t}`,H=e=>{let t=e.indexOf(ho);return {name:e.slice(t+1),namespace:e.slice(0,t)}};var Pe=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return Vt.lastIndex=0,Vt.test(t)?`_${t}`:t},Ze=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),ms=e=>{let t=e.replace("[]","Array");return Ze(t)};var oe=["delete","get","head","options","patch","post","put","trace"],kt=({context:e,count:t=1,id:r,method:n,path:s,state:i})=>{let a;if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].operationId))a=j({case:"camelCase",value:Ze(r)});else {let p=s.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");a=j({case:"camelCase",value:`${n}-${p}`});}return t>1&&(a=`${a}${t}`),i.ids.has(a)?kt({context:e,count:t+1,id:r,method:n,path:s,state:i}):(i.ids.set(a,v({method:n,path:s})),a)};var Fe=(e,t)=>{let r=[],n=[];if(t)for(let s of t)s.startsWith("/")&&s.endsWith("/")?n.push(new RegExp(s.slice(1,s.length-1))):r.push(S(e,s));return {regexps:n,set:new Set(r)}},$c=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:n,spec:s})=>{if((e.regexps.length||r.regexps.length)&&s.paths)for(let i of Object.entries(s.paths)){let a=i[0],p=i[1];for(let c of oe){if(!p[c])continue;let f=v({method:c,path:a});e.regexps.some(l=>l.test(f))&&e.set.add(S("operation",f)),r.regexps.some(l=>l.test(f))&&r.set.add(S("operation",f));}}if(s.definitions&&(t.regexps.length||n.regexps.length))for(let i of Object.keys(s.definitions))t.regexps.some(a=>a.test(i))&&t.set.add(S("schema",i)),n.regexps.some(a=>a.test(i))&&n.set.add(S("schema",i));},qc=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:n,excludeSchemas:s,includeOperations:i,includeParameters:a,includeRequestBodies:p,includeResponses:c,includeSchemas:m,spec:f})=>{if((e.regexps.length||i.regexps.length)&&f.paths)for(let l of Object.entries(f.paths)){let u=l[0],d=l[1];for(let y of oe){if(!d[y])continue;let O=v({method:y,path:u});e.regexps.some(b=>b.test(O))&&e.set.add(S("operation",O)),i.regexps.some(b=>b.test(O))&&i.set.add(S("operation",O));}}if(f.components){if((t.regexps.length||a.regexps.length)&&f.components.parameters)for(let l of Object.keys(f.components.parameters))t.regexps.some(u=>u.test(l))&&t.set.add(S("parameter",l)),a.regexps.some(u=>u.test(l))&&a.set.add(S("parameter",l));if((r.regexps.length||p.regexps.length)&&f.components.requestBodies)for(let l of Object.keys(f.components.requestBodies))r.regexps.some(u=>u.test(l))&&r.set.add(S("body",l)),p.regexps.some(u=>u.test(l))&&p.set.add(S("body",l));if((n.regexps.length||c.regexps.length)&&f.components.responses)for(let l of Object.keys(f.components.responses))n.regexps.some(u=>u.test(l))&&n.set.add(S("response",l)),c.regexps.some(u=>u.test(l))&&c.set.add(S("response",l));if((s.regexps.length||m.regexps.length)&&f.components.schemas)for(let l of Object.keys(f.components.schemas))s.regexps.some(u=>u.test(l))&&s.set.add(S("schema",l)),m.regexps.some(u=>u.test(l))&&m.set.add(S("schema",l));}},Mc=({spec:e,...t})=>{"swagger"in e?$c({...t,spec:e}):qc({...t,spec:e});},Yt=(e,t)=>{let r=Fe("operation",e?.operations?.exclude),n=Fe("operation",e?.operations?.include),s=Fe("parameter",e?.parameters?.exclude),i=Fe("parameter",e?.parameters?.include),a=Fe("body",e?.requestBodies?.exclude),p=Fe("body",e?.requestBodies?.include),c=Fe("response",e?.responses?.exclude),m=Fe("response",e?.responses?.include),f=Fe("schema",e?.schemas?.exclude),l=Fe("schema",e?.schemas?.include);return Mc({excludeOperations:r,excludeParameters:s,excludeRequestBodies:a,excludeResponses:c,excludeSchemas:f,includeOperations:n,includeParameters:i,includeRequestBodies:p,includeResponses:m,includeSchemas:l,spec:t}),{deprecated:e?.deprecated??true,operations:{exclude:r.set,include:n.set},orphans:e?.orphans??false,parameters:{exclude:s.set,include:i.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:a.set,include:p.set},responses:{exclude:c.set,include:m.set},schemas:{exclude:f.set,include:l.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}}},er=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,Fc=({filters:e,graph:t,parameters:r,requestBodies:n,responses:s,schemas:i})=>{let a=new Set,c=[...e.operations.include.size?e.operations.include:new Set(t.operations.keys())];for(;c.length;){let m=c.pop();if(e.operations.exclude.has(m)||a.has(m))continue;let f=t.operations.get(m);f&&(!e.deprecated&&f.deprecated||e.tags.exclude.size&&f.tags.size&&[...e.tags.exclude].some(l=>f.tags.has(l))||e.tags.include.size&&!new Set([...e.tags.include].filter(l=>f.tags.has(l))).size||[...f.dependencies].some(l=>{let{namespace:u}=H(l);switch(u){case "body":return !n.has(l);case "parameter":return !r.has(l);case "response":return !s.has(l);case "schema":return !i.has(l);default:return  false}})||a.add(m));}return {operations:a}},Lc=({filters:e,graph:t,schemas:r})=>{let n=new Set,i=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;i.length;){let a=i.pop();if(e.parameters.exclude.has(a)||n.has(a))continue;let p=t.parameters.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=H(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {parameters:n}},Dc=({filters:e,graph:t,schemas:r})=>{let n=new Set,i=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;i.length;){let a=i.pop();if(e.requestBodies.exclude.has(a)||n.has(a))continue;let p=t.requestBodies.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=H(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {requestBodies:n}},_c=({filters:e,graph:t,schemas:r})=>{let n=new Set,i=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;i.length;){let a=i.pop();if(e.responses.exclude.has(a)||n.has(a))continue;let p=t.responses.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=H(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {responses:n}},Bc=({filters:e,graph:t})=>{let r=new Set,s=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;s.length;){let i=s.pop();if(e.schemas.exclude.has(i)||r.has(i))continue;let a=t.schemas.get(i);if(a&&!(!e.deprecated&&a.deprecated)&&(r.add(i),!!a.dependencies.size))for(let p of a.dependencies){let{namespace:c}=H(p);switch(c){case "schema":{!r.has(p)&&!e.schemas.exclude.has(p)&&s.push(p);break}}}}return {schemas:r}},Kc=({filters:e,graph:t,parameters:r})=>{if(e.parameters.exclude.size)for(let n of r){let s=t.parameters.get(n);if(s?.dependencies.size){for(let i of e.parameters.exclude)if(s.dependencies.has(i)){r.delete(n);break}}}},Vc=({filters:e,graph:t,requestBodies:r})=>{if(e.requestBodies.exclude.size)for(let n of r){let s=t.requestBodies.get(n);if(s?.dependencies.size){for(let i of e.requestBodies.exclude)if(s.dependencies.has(i)){r.delete(n);break}}}},Wc=({filters:e,graph:t,responses:r})=>{if(e.responses.exclude.size)for(let n of r){let s=t.responses.get(n);if(s?.dependencies.size){for(let i of e.responses.exclude)if(s.dependencies.has(i)){r.delete(n);break}}}},Uc=({filters:e,graph:t,schemas:r})=>{if(e.schemas.exclude.size)for(let n of r){let s=t.schemas.get(n);if(s?.dependencies.size){for(let i of e.schemas.exclude)if(s.dependencies.has(i)){r.delete(n);break}}}},zc=({operationDependencies:e,parameters:t,requestBodies:r,responses:n,schemas:s})=>{for(let i of s)e.has(i)||s.delete(i);for(let i of t)e.has(i)||t.delete(i);for(let i of r)e.has(i)||r.delete(i);for(let i of n)e.has(i)||n.delete(i);},Qc=({graph:e,operations:t})=>{let r=new Set,s=[...new Set([...t].flatMap(i=>[...e.operations.get(i)?.dependencies??[]]))];for(;s.length;){let i=s.pop();if(r.has(i))continue;r.add(i);let{namespace:a}=H(i),p;if(a==="body"?p=e.requestBodies.get(i)?.dependencies:a==="operation"?p=e.operations.get(i)?.dependencies:a==="parameter"?p=e.parameters.get(i)?.dependencies:a==="response"?p=e.responses.get(i)?.dependencies:a==="schema"&&(p=e.schemas.get(i)?.dependencies),!!p?.size)for(let c of p)r.has(c)||s.push(c);}return {operationDependencies:r}},tr=({filters:e,graph:t})=>{let{schemas:r}=Bc({filters:e,graph:t}),{parameters:n}=Lc({filters:e,graph:t,schemas:r}),{requestBodies:s}=Dc({filters:e,graph:t,schemas:r}),{responses:i}=_c({filters:e,graph:t,schemas:r});Uc({filters:e,graph:t,schemas:r}),Kc({filters:e,graph:t,parameters:n}),Vc({filters:e,graph:t,requestBodies:s}),Wc({filters:e,graph:t,responses:i});let{operations:a}=Fc({filters:e,graph:t,parameters:n,requestBodies:s,responses:i,schemas:r});if(!e.orphans&&a.size){let{operationDependencies:p}=Qc({graph:t,operations:a});zc({operationDependencies:p,parameters:n,requestBodies:s,responses:i,schemas:r});}return {operations:a,parameters:n,requestBodies:s,responses:i,schemas:r}};var w=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var Xc=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),Hc=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:Xc(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),Gc=e=>{let t=Hc(e.path),r=e.severity==="error"?ft.bold.red:ft.bold.yellow,n=e.message.replace(/`([^`]+)`/g,(s,i)=>ft.yellow(`\`${i}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${ft.cyan(t)}: ${n}`},Jc=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,rr=({context:e,result:t})=>{if(e.config.input.validate_EXPERIMENTAL){for(let r of t.issues)Jc({context:e,issue:r})&&console.log(Gc(r));t.valid||process.exit(1);}};var go=({operations:e,preserveOrder:t,schemas:r,spec:n})=>{if(n.definitions){let s={};if(t)for(let[i,a]of Object.entries(n.definitions))r.has(S("schema",i))&&(s[i]=a);else for(let i of r){let{name:a}=H(i),p=n.definitions[a];p&&(s[a]=p);}n.definitions=s;}if(n.paths)for(let s of Object.entries(n.paths)){let i=s[0],a=s[1];for(let p of oe){if(!a[p])continue;let m=S("operation",v({method:p,path:i}));e.has(m)||delete a[p];}Object.keys(a).length||delete n.paths[i];}};var dt=(e,t)=>{if("$ref"in e){if(e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],s=r[r.length-1];if(n&&s){let i=Zt(n);i==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(S(i,s));}}return}if("in"in e){e.in==="body"&&dt(e.schema,t);return}if(e.items&&typeof e.items=="object"&&dt(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&dt(r,t);if(e.allOf)for(let r of e.allOf)dt(r,t);},xo=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],s=new Map;if(e.definitions)for(let[i,a]of Object.entries(e.definitions)){let p=new Set;dt(a,p),r.schemas.set(S("schema",i),{dependencies:p,deprecated:false});}if(e.parameters,e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of oe){if(c==="trace")continue;let m=p[c];if(!m)continue;let f=v({method:c,path:a});t&&m.operationId&&(s.has(m.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):s.set(m.operationId,f));let l=new Set;if(m.responses)for(let u of Object.values(m.responses))u&&("$ref"in u?dt(u,l):u.schema&&dt(u.schema,l));if(m.parameters)for(let u of m.parameters)dt(u,l);r.operations.set(S("operation",f),{dependencies:l,deprecated:!!m.deprecated,tags:new Set(m.tags)});}}return {graph:r,issues:n,valid:!n.some(i=>i.severity==="error")}};var bo=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,Oo=/^application\/(.*\+)?json(;.*)?$/i,So=/^multipart\/form-data(;.*)?$/i,Ro=/^text\/[a-z0-9.+-]+(;.*)?$/i,Io=/^application\/x-www-form-urlencoded(;.*)?$/i,Co=/^application\/octet-stream(;.*)?$/i,Ye=({mediaType:e})=>(bo.lastIndex=0,bo.test(e)),nr=({mediaType:e})=>{if(Oo.lastIndex=0,Oo.test(e))return "json";if(So.lastIndex=0,So.test(e))return "form-data";if(Ro.lastIndex=0,Ro.test(e))return "text";if(Io.lastIndex=0,Io.test(e))return "url-search-params";if(Co.lastIndex=0,Co.test(e))return "octet-stream"};var To=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&Ye({mediaType:t})?{...r,format:"binary"}:r:Ye({mediaType:t})?{format:"binary",type:"string"}:void 0},fs=({mimeTypes:e,response:t})=>{for(let r of e??[])return {mediaType:r,schema:t.schema,type:nr({mediaType:r})}};var Le=(e,t)=>{let r=[];for(let n in t)t[n]===e&&r.push(n);return r.length?r:[J(e)]};var Sr=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Zc=({irSchema:e,schema:t})=>{t.description&&(e.description=t.description),t.title&&(e.title=t.title);},sn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=I(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=I(e.accessScopes,["both"]));},Yc=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let i=be({context:e,schema:r.items,state:n});if(t.accessScopes=I(t.accessScopes,i.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(i);else if("$ref"in r.items)s.push(i);else {let a=r.items.allOf;a&&a.length>1&&!r.items["x-nullable"]?t={...t,...i}:s.push(i);}}return t=F({items:s,schema:t}),t},em=({irSchema:e={}})=>(e.type="boolean",e),tm=({irSchema:e={},schema:t})=>(e.type=t.type,e),rm=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=be({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=I(t.accessScopes,p.accessScopes),s[i]=p;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=be({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},nm=({irSchema:e={}})=>(e.type="string",e),sr=({schema:e})=>{let t={};return Zc({irSchema:t,schema:e}),t},sm=({context:e,schema:t,state:r})=>{let n=sr({schema:t}),s=[],i=Sr({schema:t}),a=t.allOf;for(let p of a){let c=be({context:e,schema:p,state:r});if(n.accessScopes=I(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),p.$ref){let m=e.resolveRef(p.$ref);if(m.discriminator&&r.$ref){let l=Le(r.$ref).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator)&&(u.required=[m.discriminator]),s.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let f=be({context:e,schema:m,state:{...r,$ref:p.$ref}});n.accessScopes=I(n.accessScopes,f.accessScopes);}}}if(i==="object"){let p=Rr({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=I(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f=m.$ref?e.resolveRef(m.$ref):m;if(Sr({schema:f})==="object"){let l=Rr({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=I(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}s.push(p);}}if(n=F({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let p=[{type:"null"}];s.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},im=({context:e,schema:t,state:r})=>{let n=sr({schema:t});n.type="enum";let s=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let m=Rr({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=a,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=I(n.accessScopes,m.accessScopes),s.push(m);}return n=F({items:s,schema:n}),n},om=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),i=be({context:e,schema:s,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=I(n.accessScopes,i.accessScopes);}return n},am=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=sr({schema:r}));let s={};sn({irSchema:s,schema:r,state:n}),s.default===null&&delete s.default;let i=[Rr({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=F({items:i,schema:t}),t},pm=({context:e,schema:t,state:r})=>{let n=sr({schema:t});sn({irSchema:n,schema:t,state:r});let s=Sr({schema:t});return s?t["x-nullable"]?am({context:e,irSchema:n,schema:{...t,type:s},state:r}):Rr({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},Rr=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=sr({schema:r}),sn({irSchema:t,schema:r,state:n})),r.type){case "array":return Yc({context:e,irSchema:t,schema:r,state:n});case "boolean":return em({irSchema:t});case "integer":case "number":return tm({irSchema:t,schema:r});case "object":return rm({context:e,irSchema:t,schema:r,state:n});case "string":return nm({irSchema:t});default:return Po({irSchema:t,schema:r,state:n})}},Po=({irSchema:e,schema:t,state:r})=>(e||(e=sr({schema:t})),e.type="unknown",sn({irSchema:e,schema:t,state:r}),e),be=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?om({context:e,schema:t,state:r}):t.enum?im({context:e,schema:t,state:r}):t.allOf?sm({context:e,schema:t,state:r}):t.type||t.properties?pm({context:e,schema:t,state:r}):Po({schema:t,state:r})),jo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[J(e)]=be({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var cm=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",yt=({context:e,name:t,schema:r})=>{if(me(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref??"");if("in"in s&&s.in){let i="schema"in s?s.schema:{...s,in:void 0};return yt({context:e,name:t,schema:i})}return yt({context:e,name:t,schema:s})}if("in"in r){if(!r.in)return  false;let s="schema"in r?r.schema:{...r,in:void 0};return yt({context:e,name:t,schema:s})}for(let s in r.properties)if(me(e.config.input.pagination).test(s)){let a=r.properties[s];if(typeof a!="boolean"&&!("$ref"in a)){let p=Sr({schema:a});if(cm(p))return s}}for(let s of r.allOf??[]){let i=yt({context:e,name:t,schema:s});if(i)return i}return  false};var mm=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},fm=({context:e,method:t,operation:r,path:n,state:s})=>{let i={id:kt({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),mm({irOperation:i,operation:r}),i},lm=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i})=>{let a=fm({context:e,method:t,operation:r,path:n,state:i});r.parameters&&(a.parameters=r.parameters);let p=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},m=[];for(let f of r.requestBody??[]){let l="$ref"in f?e.resolveRef(f.$ref):f,u=l.in==="body"?l.schema:{...l,format:l.type==="file"?"binary":l.format,required:void 0,type:l.type==="file"?"string":l.type},d=fs({mimeTypes:r.consumes,response:{schema:u}});if(d){let y=yt({context:e,name:"",schema:d.schema&&"$ref"in d.schema?{allOf:[{...d.schema}],description:l.description}:{description:l.description,...d.schema}}),x=be({context:e,schema:"$ref"in l?{allOf:[{...l,$ref:l.$ref,required:[],type:"string"}],description:l.description}:d.schema&&"$ref"in d.schema?{allOf:[{...d.schema}],description:l.description}:{description:l.description,...d.schema},state:void 0});c.mediaType=d.mediaType,l.in==="body"?c.schema=x:(c.schema.properties[l.name]=x,l.required&&m.push(l.name)),y&&(c.pagination=y),d.type&&(c.type=d.type);}l.required&&(p=true);}c.mediaType&&(m.length&&(c.schema.required=m),a.body=c,p&&(a.body.required=p));for(let f in r.responses){a.responses||(a.responses={});let l=r.responses[f],u="$ref"in l?e.resolveRef(l.$ref):l,d=fs({mimeTypes:r.produces?r.produces:["application/json"],response:u});d?a.responses[f]={mediaType:d.mediaType,schema:be({context:e,schema:{description:u.description,...To({content:d})},state:void 0})}:a.responses[f]={schema:{description:u.description,type:f==="204"?"void":"unknown"}};}if(r.security){let f=[];for(let l of r.security)for(let u in l){let d=s.get(u);if(!d)continue;let y;if(d.type==="apiKey"&&(y=d),d.type==="basic"&&(y={description:d.description,scheme:"basic",type:"http"}),d.type==="oauth2")switch(y={description:d.description,flows:{},type:"oauth2"},d.flow){case "accessCode":y.flows.authorizationCode={authorizationUrl:d.authorizationUrl,scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "application":y.flows.clientCredentials={scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "implicit":y.flows.implicit={authorizationUrl:d.authorizationUrl,scopes:d.scopes};break;case "password":y.flows.password={scopes:d.scopes,tokenUrl:d.tokenUrl};break}y&&f.push(y);}f.length&&(a.security=f);}return a},ht=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),e.ir.paths[n][t]=lm({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i});};var um=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},dm=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},et=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let s of r){let i="$ref"in s?e.dereference(s):s;if(i.in==="body"||i.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(i);continue}n[i.in]||(n[i.in]={}),n[i.in][i.name.toLocaleLowerCase()]=ym({context:e,parameter:i});}return n},ym=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},s=yt({context:e,name:t.name,schema:n}),i=dm(t.in),c={allowReserved:false,explode:um(t.collectionFormat),location:t.in,name:t.name,schema:be({context:e,schema:n,state:void 0}),style:i};return t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c};var Ao=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,De=e=>{let t={host:"",path:"",port:"",protocol:""};Ao.lastIndex=0;let r=e.match(Ao);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let s=r[8]||"",i=r[2]||"";return i.length===1?t:{host:n,path:s==="/"?"":s,port:r[7]||"",protocol:i}};var Eo=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let i=De(e.config.input.path);t.length||i.protocol&&(t=[i.protocol]),r||(r=`${i.host}${i.port?`:${i.port}`:""}`);}t.length||(t=[""]);let s=t.map(i=>`${i?`${i}://`:""}${r}${n}`).filter(Boolean);s.length&&(e.ir.servers=s.map(i=>({url:i})));};var ls=e=>{let t=er(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let i=xo({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=i.graph,rr({context:e,result:i});}if(t&&r){let i=Yt(e.config.input.filters,e.spec),a=tr({filters:i,graph:r});go({...a,preserveOrder:i.preserveOrder,spec:e.spec});}let n={ids:new Map},s=new Map;for(let i in e.spec.securityDefinitions){let a=e.spec.securityDefinitions[i];s.set(i,a);}if(e.spec.definitions)for(let i in e.spec.definitions){let a=`#/definitions/${i}`,p=e.spec.definitions[i];jo({$ref:a,context:e,schema:p});}Eo({context:e});for(let i in e.spec.paths){if(i.startsWith("x-"))continue;let a=e.spec.paths[i],p=a.$ref?{...e.resolveRef(a.$ref),...a}:a,c={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},m={context:e,operation:{...c,parameters:et({context:e,operation:c,parameters:p.parameters})},path:i,securitySchemesMap:s,state:n};if(p.delete){let f=w({source:et({context:e,operation:p.delete,parameters:p.delete.parameters}),target:m.operation.parameters});ht({...m,method:"delete",operation:{...m.operation,...p.delete,parameters:f}});}if(p.get){let f=w({source:et({context:e,operation:p.get,parameters:p.get.parameters}),target:m.operation.parameters});ht({...m,method:"get",operation:{...m.operation,...p.get,parameters:f}});}if(p.head){let f=w({source:et({context:e,operation:p.head,parameters:p.head.parameters}),target:m.operation.parameters});ht({...m,method:"head",operation:{...m.operation,...p.head,parameters:f}});}if(p.options){let f=w({source:et({context:e,operation:p.options,parameters:p.options.parameters}),target:m.operation.parameters});ht({...m,method:"options",operation:{...m.operation,...p.options,parameters:f}});}if(p.patch){let f=w({source:et({context:e,operation:p.patch,parameters:p.patch.parameters}),target:m.operation.parameters});ht({...m,method:"patch",operation:{...m.operation,...p.patch,parameters:f}});}if(p.post){let f=w({source:et({context:e,operation:p.post,parameters:p.post.parameters}),target:m.operation.parameters});ht({...m,method:"post",operation:{...m.operation,...p.post,parameters:f}});}if(p.put){let f=w({source:et({context:e,operation:p.put,parameters:p.put.parameters}),target:m.operation.parameters});ht({...m,method:"put",operation:{...m.operation,...p.put,parameters:f}});}}};var No=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:s,schemas:i,spec:a})=>{if(a.components){if(a.components.parameters){let p={};if(r)for(let[c,m]of Object.entries(a.components.parameters))t.has(S("parameter",c))&&(p[c]=m);else for(let c of t){let{name:m}=H(c),f=a.components.parameters[m];f&&(p[m]=f);}a.components.parameters=p;}if(a.components.requestBodies){let p={};if(r)for(let[c,m]of Object.entries(a.components.requestBodies))n.has(S("body",c))&&(p[c]=m);else for(let c of n){let{name:m}=H(c),f=a.components.requestBodies[m];f&&(p[m]=f);}a.components.requestBodies=p;}if(a.components.responses){let p={};if(r)for(let[c,m]of Object.entries(a.components.responses))s.has(S("response",c))&&(p[c]=m);else for(let c of s){let{name:m}=H(c),f=a.components.responses[m];f&&(p[m]=f);}a.components.responses=p;}if(a.components.schemas){let p={};if(r)for(let[c,m]of Object.entries(a.components.schemas))i.has(S("schema",c))&&(p[c]=m);else for(let c of i){let{name:m}=H(c),f=a.components.schemas[m];f&&(p[m]=f);}a.components.schemas=p;}}if(a.paths)for(let p of Object.entries(a.paths)){let c=p[0],m=p[1];for(let f of oe){if(!m[f])continue;let u=S("operation",v({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete a.paths[c];}};var V=(e,t)=>{if("$ref"in e){if(e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],s=r[r.length-1];if(n&&s){let i=Zt(n);i==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(S(i,s));}}return}if(e.items&&typeof e.items=="object"&&V(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&V(r,t);if(e.additionalProperties&&typeof e.additionalProperties=="object"&&V(e.additionalProperties,t),e.allOf)for(let r of e.allOf)V(r,t);if(e.anyOf)for(let r of e.anyOf)V(r,t);if(e.not&&V(e.not,t),e.oneOf)for(let r of e.oneOf)V(r,t);},ko=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],s=new Map;if(e.components){if(e.components.schemas)for(let[i,a]of Object.entries(e.components.schemas)){let p=new Set;V(a,p),r.schemas.set(S("schema",i),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.parameters)for(let[i,a]of Object.entries(e.components.parameters)){let p=new Set;if("$ref"in a)V(a,p);else if(a.schema&&V(a.schema,p),a.content)for(let c of Object.values(a.content))c.schema&&V(c.schema,p);r.parameters.set(S("parameter",i),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.requestBodies)for(let[i,a]of Object.entries(e.components.requestBodies)){let p=new Set;if("$ref"in a)V(a,p);else for(let c of Object.values(a.content))c.schema&&V(c.schema,p);r.requestBodies.set(S("body",i),{dependencies:p,deprecated:false});}if(e.components.responses)for(let[i,a]of Object.entries(e.components.responses)){let p=new Set;if("$ref"in a)V(a,p);else if(a.content)for(let c of Object.values(a.content))c.schema&&V(c.schema,p);r.responses.set(S("response",i),{dependencies:p,deprecated:false});}}if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of oe){let m=p[c];if(!m)continue;let f=v({method:c,path:a});t&&m.operationId&&(s.has(m.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):s.set(m.operationId,f));let l=new Set;if(m.requestBody)if("$ref"in m.requestBody)V(m.requestBody,l);else for(let u of Object.values(m.requestBody.content))u.schema&&V(u.schema,l);if(m.responses){for(let u of Object.values(m.responses))if(u){if("$ref"in u)V(u,l);else if(u.content)for(let d of Object.values(u.content))d.schema&&V(d.schema,l);}}if(m.parameters)for(let u of m.parameters)"$ref"in u?V(u,l):u.schema&&V(u.schema,l);r.operations.set(S("operation",f),{dependencies:l,deprecated:!!m.deprecated,tags:new Set(m.tags)});}}if(t&&e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let a=e.servers[i];!a||typeof a!="object"?n.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):a.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return {graph:r,issues:n,valid:!n.some(i=>i.severity==="error")}};var vo=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&Ye({mediaType:t})?{...r,format:"binary"}:r:Ye({mediaType:t})?{format:"binary",type:"string"}:void 0},tt=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:nr({mediaType:t})}};var vt=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},hm=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},on=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=I(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=I(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=I(e.accessScopes,["both"]));},gm=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let i=ne({context:e,schema:r.items,state:n});if(t.accessScopes=I(t.accessScopes,i.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(i);else if("$ref"in r.items)s.push(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!r.items.nullable?t={...t,...i}:s.push(i);}}return t=F({items:s,schema:t}),t},xm=({irSchema:e={}})=>(e.type="boolean",e),bm=({irSchema:e={},schema:t})=>(e.type=t.type,e),Om=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=ne({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=I(t.accessScopes,p.accessScopes),s[i]=p;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=ne({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},Sm=({irSchema:e={}})=>(e.type="string",e),gt=({schema:e})=>{let t={};return hm({irSchema:t,schema:e}),t},Rm=({context:e,schema:t,state:r})=>{let n=gt({schema:t}),s=[],i=vt({schema:t}),a=t.allOf;for(let p of a){let c=ne({context:e,schema:p,state:r});if(n.accessScopes=I(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),"$ref"in p){let m=e.resolveRef(p.$ref);if(m.discriminator&&r.$ref){let l=Le(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),s.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let f=ne({context:e,schema:m,state:{...r,$ref:p.$ref}});n.accessScopes=I(n.accessScopes,f.accessScopes);}}}if(i==="object"){let p=wt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=I(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f="$ref"in m?e.resolveRef(m.$ref):m;if(vt({schema:f})==="object"){let l=wt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=I(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}s.push(p);}}if(n=F({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let p=[{type:"null"}];s.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},Im=({context:e,schema:t,state:r})=>{let n=gt({schema:t}),s=[],i=vt({schema:t}),a=t.anyOf;for(let p of a){let c=ne({context:e,schema:p,state:r});if(n.accessScopes=I(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let f=Le(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}s.push(c);}if(t.nullable&&s.push({type:"null"}),n=F({items:s,mutateSchemaOneItem:true,schema:n}),i==="object"){let p=wt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=I(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Cm=({context:e,schema:t,state:r})=>{let n=gt({schema:t});n.type="enum";let s=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let m=wt({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=a,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=I(n.accessScopes,m.accessScopes),s.push(m);}return n=F({items:s,schema:n}),n},Tm=({context:e,schema:t,state:r})=>{let n=gt({schema:t}),s=[],i=vt({schema:t}),a=t.oneOf;for(let p of a){let c=ne({context:e,schema:p,state:r});if(n.accessScopes=I(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let f=Le(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?s=s.concat(c.items):s.push(c);}if(t.nullable&&s.push({type:"null"}),n=F({items:s,mutateSchemaOneItem:true,schema:n}),i==="object"){let p=wt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=I(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Pm=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),i=ne({context:e,schema:s,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=I(n.accessScopes,i.accessScopes);}return n},jm=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=gt({schema:r}));let s={};on({irSchema:s,schema:r,state:n}),s.default===null&&delete s.default;let i=[wt({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=F({items:i,schema:t}),t},Am=({context:e,schema:t,state:r})=>{let n=gt({schema:t});on({irSchema:n,schema:t,state:r});let s=vt({schema:t});return s?t.nullable?jm({context:e,irSchema:n,schema:{...t,type:s},state:r}):wt({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},wt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=gt({schema:r}),on({irSchema:t,schema:r,state:n})),r.type){case "array":return gm({context:e,irSchema:t,schema:r,state:n});case "boolean":return xm({irSchema:t});case "integer":case "number":return bm({irSchema:t,schema:r});case "object":return Om({context:e,irSchema:t,schema:r,state:n});case "string":return Sm({irSchema:t});default:return wo({irSchema:t,schema:r,state:n})}},wo=({irSchema:e,schema:t,state:r})=>(e||(e=gt({schema:t})),e.type="unknown",on({irSchema:e,schema:t,state:r}),e),ne=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?Pm({context:e,schema:t,state:r}):t.enum?Cm({context:e,schema:t,state:r}):t.allOf?Rm({context:e,schema:t,state:r}):t.anyOf?Im({context:e,schema:t,state:r}):t.oneOf?Tm({context:e,schema:t,state:r}):t.type||t.properties?Am({context:e,schema:t,state:r}):wo({schema:t,state:r})),$o=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[J(e)]=ne({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Em=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",$t=({context:e,name:t,schema:r})=>{if(me(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let i;if("in"in s&&(i=s.schema),!i){let a=tt({content:s.content});a?.schema&&(i=a.schema);}return i?$t({context:e,name:t,schema:i}):false}return $t({context:e,name:t,schema:s})}for(let s in r.properties)if(me(e.config.input.pagination).test(s)){let a=r.properties[s];if(typeof a!="boolean"&&!("$ref"in a)){let p=vt({schema:a});if(Em(p))return s}}for(let s of r.allOf??[]){let i=$t({context:e,name:t,schema:s});if(i)return i}return  false};var Nm=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},km=({context:e,method:t,operation:r,path:n,state:s})=>{let i={id:kt({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),Nm({irOperation:i,operation:r}),i},vm=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i})=>{let a=km({context:e,method:t,operation:r,path:n,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=tt({content:p.content});if(c){let m=$t({context:e,name:"",schema:c.schema&&"$ref"in c.schema?{allOf:[{...c.schema}],description:p.description}:{description:p.description,...c.schema}});a.body={mediaType:c.mediaType,schema:ne({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:p.description}:c.schema&&"$ref"in c.schema?{allOf:[{...c.schema}],description:p.description}:{description:p.description,...c.schema},state:void 0})},m&&(a.body.pagination=m),p.required&&(a.body.required=p.required),c.type&&(a.body.type=c.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=tt({content:m.content});f?a.responses[p]={mediaType:f.mediaType,schema:ne({context:e,schema:{description:m.description,...vo({content:f})},state:void 0})}:a.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let m in c){let f=s.get(m);f&&p.push(f);}p.length&&(a.security=p);}return a},rt=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=vm({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i});};var wm=e=>{switch(e){case "query":return  false;default:return}},$m=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},qm=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},_e=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.dereference(n):n;r[s.in]||(r[s.in]={}),r[s.in][s.name.toLocaleLowerCase()]=qo({context:e,parameter:s});}return r},qo=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=tt({content:t.content});m&&(r=m.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},s=$t({context:e,name:t.name,schema:n}),i=t.style||qm(t.in),a=t.explode!==void 0?t.explode:$m(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:wm(t.in),explode:a,location:t.in,name:t.name,schema:ne({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},Mo=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[J(e)]=qo({context:t,parameter:r});};var Mm=({context:e,requestBody:t})=>{let r=tt({content:t.content}),n=r?r.schema:void 0,s={description:t.description,...n},i={schema:ne({context:e,schema:s,state:void 0})};return t.description&&(i.description=t.description),t.required&&(i.required=t.required),i},Fo=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[J(e)]=Mm({context:t,requestBody:r});};var Lo=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=De(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var us=e=>{let t=er(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let i=ko({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=i.graph,rr({context:e,result:i});}if(t&&r){let i=Yt(e.config.input.filters,e.spec),a=tr({filters:i,graph:r});No({...a,preserveOrder:i.preserveOrder,spec:e.spec});}let n={ids:new Map},s=new Map;if(e.spec.components){for(let i in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[i],p="$ref"in a?e.resolveRef(a.$ref):a;s.set(i,p);}for(let i in e.spec.components.parameters){let a=`#/components/parameters/${i}`,p=e.spec.components.parameters[i],c="$ref"in p?e.resolveRef(p.$ref):p;Mo({$ref:a,context:e,parameter:c});}for(let i in e.spec.components.requestBodies){let a=`#/components/requestBodies/${i}`,p=e.spec.components.requestBodies[i],c="$ref"in p?e.resolveRef(p.$ref):p;Fo({$ref:a,context:e,requestBody:c});}for(let i in e.spec.components.schemas){let a=`#/components/schemas/${i}`,p=e.spec.components.schemas[i];$o({$ref:a,context:e,schema:p});}}Lo({context:e});for(let i in e.spec.paths){let a=e.spec.paths[i],p=a.$ref?{...e.resolveRef(a.$ref),...a}:a,c={context:e,operation:{description:p.description,parameters:_e({context:e,parameters:p.parameters}),security:e.spec.security,servers:p.servers,summary:p.summary},path:i,securitySchemesMap:s,state:n};p.delete&&rt({...c,method:"delete",operation:{...c.operation,...p.delete,parameters:w({source:_e({context:e,parameters:p.delete.parameters}),target:c.operation.parameters})}}),p.get&&rt({...c,method:"get",operation:{...c.operation,...p.get,parameters:w({source:_e({context:e,parameters:p.get.parameters}),target:c.operation.parameters})}}),p.head&&rt({...c,method:"head",operation:{...c.operation,...p.head,parameters:w({source:_e({context:e,parameters:p.head.parameters}),target:c.operation.parameters})}}),p.options&&rt({...c,method:"options",operation:{...c.operation,...p.options,parameters:w({source:_e({context:e,parameters:p.options.parameters}),target:c.operation.parameters})}}),p.patch&&rt({...c,method:"patch",operation:{...c.operation,...p.patch,parameters:w({source:_e({context:e,parameters:p.patch.parameters}),target:c.operation.parameters})}}),p.post&&rt({...c,method:"post",operation:{...c.operation,...p.post,parameters:w({source:_e({context:e,parameters:p.post.parameters}),target:c.operation.parameters})}}),p.put&&rt({...c,method:"put",operation:{...c.operation,...p.put,parameters:w({source:_e({context:e,parameters:p.put.parameters}),target:c.operation.parameters})}}),p.trace&&rt({...c,method:"trace",operation:{...c.operation,...p.trace,parameters:w({source:_e({context:e,parameters:p.trace.parameters}),target:c.operation.parameters})}});}};var Do=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:s,schemas:i,spec:a})=>{if(a.components){if(a.components.parameters){let p={};if(r)for(let[c,m]of Object.entries(a.components.parameters))t.has(S("parameter",c))&&(p[c]=m);else for(let c of t){let{name:m}=H(c),f=a.components.parameters[m];f&&(p[m]=f);}a.components.parameters=p;}if(a.components.requestBodies){let p={};if(r)for(let[c,m]of Object.entries(a.components.requestBodies))n.has(S("body",c))&&(p[c]=m);else for(let c of n){let{name:m}=H(c),f=a.components.requestBodies[m];f&&(p[m]=f);}a.components.requestBodies=p;}if(a.components.responses){let p={};if(r)for(let[c,m]of Object.entries(a.components.responses))s.has(S("response",c))&&(p[c]=m);else for(let c of s){let{name:m}=H(c),f=a.components.responses[m];f&&(p[m]=f);}a.components.responses=p;}if(a.components.schemas){let p={};if(r)for(let[c,m]of Object.entries(a.components.schemas))i.has(S("schema",c))&&(p[c]=m);else for(let c of i){let{name:m}=H(c),f=a.components.schemas[m];f&&(p[m]=f);}a.components.schemas=p;}}if(a.paths)for(let p of Object.entries(a.paths)){let c=p[0],m=p[1];for(let f of oe){if(!m[f])continue;let u=S("operation",v({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete a.paths[c];}};var q=(e,t)=>{if("$ref"in e&&e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],s=r[r.length-1];if(n&&s){let i=Zt(n);i==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(S(i,s));}}if(e.items&&typeof e.items=="object"&&q(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&q(r,t);if(e.additionalProperties&&typeof e.additionalProperties=="object"&&q(e.additionalProperties,t),e.allOf)for(let r of e.allOf)q(r,t);if(e.anyOf)for(let r of e.anyOf)q(r,t);if(e.contains&&q(e.contains,t),e.not&&q(e.not,t),e.oneOf)for(let r of e.oneOf)q(r,t);if(e.prefixItems)for(let r of e.prefixItems)q(r,t);e.propertyNames&&typeof e.propertyNames=="object"&&q(e.propertyNames,t);},_o=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],s=new Map;if(e.components){if(e.components.schemas)for(let[i,a]of Object.entries(e.components.schemas)){let p=new Set;q(a,p),r.schemas.set(S("schema",i),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.parameters)for(let[i,a]of Object.entries(e.components.parameters)){let p=new Set;if("$ref"in a)q(a,p);else if(a.schema&&q(a.schema,p),a.content)for(let c of Object.values(a.content))c.schema&&q(c.schema,p);r.parameters.set(S("parameter",i),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.requestBodies)for(let[i,a]of Object.entries(e.components.requestBodies)){let p=new Set;if("$ref"in a)q(a,p);else for(let c of Object.values(a.content))c.schema&&q(c.schema,p);r.requestBodies.set(S("body",i),{dependencies:p,deprecated:false});}if(e.components.responses)for(let[i,a]of Object.entries(e.components.responses)){let p=new Set;if("$ref"in a)q(a,p);else if(a.content)for(let c of Object.values(a.content))c.schema&&q(c.schema,p);r.responses.set(S("response",i),{dependencies:p,deprecated:false});}}if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of oe){let m=p[c];if(!m)continue;let f=v({method:c,path:a});t&&m.operationId&&(s.has(m.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):s.set(m.operationId,f));let l=new Set;if(m.requestBody)if("$ref"in m.requestBody)q(m.requestBody,l);else for(let u of Object.values(m.requestBody.content))u.schema&&q(u.schema,l);if(m.responses){for(let u of Object.values(m.responses))if(u){if("$ref"in u)q(u,l);else if(u.content)for(let d of Object.values(u.content))d.schema&&q(d.schema,l);}}if(m.parameters)for(let u of m.parameters)"$ref"in u?q(u,l):u.schema&&q(u.schema,l);r.operations.set(S("operation",f),{dependencies:l,deprecated:!!m.deprecated,tags:new Set(m.tags)});}}if(t&&e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let a=e.servers[i];!a||typeof a!="object"?n.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):a.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return {graph:r,issues:n,valid:!n.some(i=>i.severity==="error")}};var Bo=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&Ye({mediaType:t})?{...r,format:"binary"}:r:Ye({mediaType:t})?{format:"binary",type:"string"}:void 0},nt=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:nr({mediaType:t})}};var Be=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],Fm=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},an=({irSchema:e,schema:t,state:r})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=I(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=I(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=I(e.accessScopes,["both"]));},Lm=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let s=[];for(let i of r.prefixItems??[]){let a=Z({context:e,schema:i,state:n});t.accessScopes=I(t.accessScopes,a.accessScopes),s.push(a);}if(r.items){let i=Z({context:e,schema:r.items,state:n});if(t.accessScopes=I(t.accessScopes,i.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!Be({schema:r.items}).includes("null")?t={...t,...i}:s.push(i);}}return t=F({items:s,schema:t}),t},Dm=({irSchema:e={}})=>(e.type="boolean",e),_m=({irSchema:e={}})=>(e.type="null",e),Bm=({irSchema:e={},schema:t})=>(e.type=t.type,e),Km=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=Z({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=I(t.accessScopes,p.accessScopes),s[i]=p;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=Z({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.propertyNames&&(t.propertyNames=Z({context:e,schema:r.propertyNames,state:n})),r.required&&(t.required=r.required),t},Vm=({irSchema:e={}})=>(e.type="string",e),st=({schema:e})=>{let t={};return Fm({irSchema:t,schema:e}),t},Wm=({context:e,schema:t,state:r})=>{let n=st({schema:t}),s=[],i=Be({schema:t}),a=t.allOf;for(let p of a){let c=Z({context:e,schema:p,state:r});if(n.accessScopes=I(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),p.$ref){let m=e.resolveRef(p.$ref);if(m.discriminator&&r.$ref){let l=Le(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),s.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let f=Z({context:e,schema:m,state:{...r,$ref:p.$ref}});n.accessScopes=I(n.accessScopes,f.accessScopes);}}}if(i.includes("object")){let p=qt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=I(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f=m.$ref?e.resolveRef(m.$ref):m;if(Be({schema:f}).includes("object")){let l=qt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=I(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}s.push(p);}}if(n=F({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),i.includes("null")){let p=[{type:"null"}];s.length&&p.unshift(n),n={items:p,logicalOperator:"or"};}return n},Um=({context:e,schema:t,state:r})=>{let n=st({schema:t}),s=[],i=Be({schema:t}),a=t.anyOf;for(let p of a){let c=Z({context:e,schema:p,state:r});if(n.accessScopes=I(n.accessScopes,c.accessScopes),t.discriminator&&p.$ref){let f=Le(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}s.push(c);}if(i.includes("null")&&s.push({type:"null"}),n=F({items:s,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let p=qt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=I(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},zm=({context:e,schema:t,state:r})=>{let n=st({schema:t});n.type="enum";let s=[],i=Be({schema:t});for(let[a,p]of t.enum.entries()){let c=typeof p,m;if(c==="string"||c==="number"||c==="boolean"?m=c:c==="object"&&Array.isArray(p)?m="array":p===null?i.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${p}" for enum`,t.enum),!m)continue;let f=qt({context:e,schema:{const:p,description:t["x-enum-descriptions"]?.[a],title:t["x-enum-varnames"]?.[a]??t["x-enumNames"]?.[a],type:m},state:r});n.accessScopes=I(n.accessScopes,f.accessScopes),s.push(f);}return n=F({items:s,schema:n}),n},Qm=({context:e,schema:t,state:r})=>{let n=st({schema:t}),s=[],i=Be({schema:t}),a=t.oneOf;for(let p of a){let c=Z({context:e,schema:p,state:r});if(n.accessScopes=I(n.accessScopes,c.accessScopes),t.discriminator&&p.$ref){let f=Le(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?s=s.concat(c.items):s.push(c);}if(i.includes("null")&&s.push({type:"null"}),n=F({items:s,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let p=qt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=I(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Xm=({context:e,schema:t,state:r})=>{let n=st({schema:t}),s={};if(s.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let a=e.resolveRef(t.$ref),p=Z({context:e,schema:a,state:{...r,$ref:t.$ref,isProperty:false}});s.accessScopes=I(s.accessScopes,p.accessScopes);}let i=[];return i.push(s),t.type&&typeof t.type!="string"&&t.type.includes("null")&&i.push({type:"null"}),n=F({items:i,mutateSchemaOneItem:true,schema:n}),n},qt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=st({schema:r}),an({irSchema:t,schema:r,state:n})),r.type){case "array":return Lm({context:e,irSchema:t,schema:r,state:n});case "boolean":return Dm({irSchema:t});case "integer":case "number":return Bm({irSchema:t,schema:r});case "null":return _m({irSchema:t});case "object":return Km({context:e,irSchema:t,schema:r,state:n});case "string":return Vm({irSchema:t});default:return Ko({irSchema:t,schema:r,state:n})}},Hm=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=st({schema:r}));let s={};an({irSchema:s,schema:r,state:n}),r.type.includes("null")&&s.default===null&&delete s.default;let i=[];for(let a of r.type)if(a==="null")i.push({type:"null"});else {let p=qt({context:e,irSchema:s,schema:{...r,type:a},state:n});t.accessScopes=I(t.accessScopes,p.accessScopes),i.push(p);}return t=F({items:i,schema:t}),t},Gm=({context:e,schema:t,state:r})=>{let n=st({schema:t});an({irSchema:n,schema:t,state:r});let s=Be({schema:t});return s.length===1?qt({context:e,irSchema:n,schema:{...t,type:s[0]},state:r}):Hm({context:e,irSchema:n,schema:{...t,type:s},state:r})},Ko=({irSchema:e,schema:t,state:r})=>(e||(e=st({schema:t})),e.type="unknown",an({irSchema:e,schema:t,state:r}),e),Z=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Xm({context:e,schema:t,state:r}):t.enum?zm({context:e,schema:t,state:r}):t.allOf?Wm({context:e,schema:t,state:r}):t.anyOf?Um({context:e,schema:t,state:r}):t.oneOf?Qm({context:e,schema:t,state:r}):t.type||t.properties?Gm({context:e,schema:t,state:r}):Ko({schema:t,state:r})),Vo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[J(e)]=Z({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Wo=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),Mt=({context:e,name:t,schema:r})=>{if(me(e.config.input.pagination).test(t))return  true;if(r.$ref){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let i;if("in"in s&&(i=s.schema),!i){let a=nt({content:s.content});a?.schema&&(i=a.schema);}return i?Mt({context:e,name:t,schema:i}):false}return Mt({context:e,name:t,schema:s})}for(let s in r.properties)if(me(e.config.input.pagination).test(s)){let a=r.properties[s];if(typeof a!="boolean"){let p=Be({schema:a});if(!p.length){let m=(a.anyOf??a.oneOf??[]).filter(f=>f.type!=="null");if(m.length===1){let f=Be({schema:m[0]});if(Wo(f))return s}}if(Wo(p))return s}}for(let s of r.allOf??[]){let i=Mt({context:e,name:t,schema:s});if(i)return i}return  false};var Jm=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Zm=({context:e,method:t,operation:r,path:n,state:s})=>{let i={id:kt({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),Jm({irOperation:i,operation:r}),i},Ym=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i})=>{let a=Zm({context:e,method:t,operation:r,path:n,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=nt({content:p.content});if(c){let m=Mt({context:e,name:"",schema:{description:p.description,...c.schema}});a.body={mediaType:c.mediaType,schema:Z({context:e,schema:{description:p.description,..."$ref"in r.requestBody?r.requestBody:c.schema},state:void 0})},m&&(a.body.pagination=m),p.required&&(a.body.required=p.required),c.type&&(a.body.type=c.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=nt({content:m.content});f?a.responses[p]={mediaType:f.mediaType,schema:Z({context:e,schema:{description:m.description,...Bo({content:f})},state:void 0})}:a.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let m in c){let f=s.get(m);f&&p.push(f);}p.length&&(a.security=p);}return a},it=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=Ym({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:i});};var ef=e=>{switch(e){case "query":return  false;default:return}},tf=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},rf=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Ke=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.dereference(n):n;r[s.in]||(r[s.in]={}),r[s.in][s.name.toLocaleLowerCase()]=Uo({context:e,parameter:s});}return r},Uo=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=nt({content:t.content});m&&(r=m.schema);}let n={deprecated:t.deprecated,description:t.description,...r},s=Mt({context:e,name:t.name,schema:n}),i=t.style||rf(t.in),a=t.explode!==void 0?t.explode:tf(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:ef(t.in),explode:a,location:t.in,name:t.name,schema:Z({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},zo=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[J(e)]=Uo({context:t,parameter:r});};var nf=({context:e,requestBody:t})=>{let r=nt({content:t.content}),n=r?r.schema:void 0,s={description:t.description,...n},i={schema:Z({context:e,schema:s,state:void 0})};return t.description&&(i.description=t.description),t.required&&(i.required=t.required),i},Qo=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[J(e)]=nf({context:t,requestBody:r});};var Xo=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=De(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var ds=e=>{let t=er(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let i=_o({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=i.graph,rr({context:e,result:i});}if(t&&r){let i=Yt(e.config.input.filters,e.spec),a=tr({filters:i,graph:r});Do({...a,preserveOrder:i.preserveOrder,spec:e.spec});}let n={ids:new Map},s=new Map;if(e.spec.components){for(let i in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[i],p="$ref"in a?e.resolveRef(a.$ref):a;s.set(i,p);}for(let i in e.spec.components.parameters){let a=`#/components/parameters/${i}`,p=e.spec.components.parameters[i],c="$ref"in p?e.resolveRef(p.$ref):p;zo({$ref:a,context:e,parameter:c});}for(let i in e.spec.components.requestBodies){let a=`#/components/requestBodies/${i}`,p=e.spec.components.requestBodies[i],c="$ref"in p?e.resolveRef(p.$ref):p;Qo({$ref:a,context:e,requestBody:c});}for(let i in e.spec.components.schemas){let a=`#/components/schemas/${i}`,p=e.spec.components.schemas[i];Vo({$ref:a,context:e,schema:p});}}Xo({context:e});for(let i in e.spec.paths){let a=e.spec.paths[i],p=a.$ref?{...e.resolveRef(a.$ref),...a}:a,c={context:e,operation:{description:p.description,parameters:Ke({context:e,parameters:p.parameters}),security:e.spec.security,servers:p.servers,summary:p.summary},path:i,securitySchemesMap:s,state:n};p.delete&&it({...c,method:"delete",operation:{...c.operation,...p.delete,parameters:w({source:Ke({context:e,parameters:p.delete.parameters}),target:c.operation.parameters})}}),p.get&&it({...c,method:"get",operation:{...c.operation,...p.get,parameters:w({source:Ke({context:e,parameters:p.get.parameters}),target:c.operation.parameters})}}),p.head&&it({...c,method:"head",operation:{...c.operation,...p.head,parameters:w({source:Ke({context:e,parameters:p.head.parameters}),target:c.operation.parameters})}}),p.options&&it({...c,method:"options",operation:{...c.operation,...p.options,parameters:w({source:Ke({context:e,parameters:p.options.parameters}),target:c.operation.parameters})}}),p.patch&&it({...c,method:"patch",operation:{...c.operation,...p.patch,parameters:w({source:Ke({context:e,parameters:p.patch.parameters}),target:c.operation.parameters})}}),p.post&&it({...c,method:"post",operation:{...c.operation,...p.post,parameters:w({source:Ke({context:e,parameters:p.post.parameters}),target:c.operation.parameters})}}),p.put&&it({...c,method:"put",operation:{...c.operation,...p.put,parameters:w({source:Ke({context:e,parameters:p.put.parameters}),target:c.operation.parameters})}}),p.trace&&it({...c,method:"trace",operation:{...c.operation,...p.trace,parameters:w({source:Ke({context:e,parameters:p.trace.parameters}),target:c.operation.parameters})}});}};var pn=["connect","delete","get","head","options","patch","post","put","trace"];function cn(e="1.0"){return String(e).replace(/^v/gi,"")}var ir="#/components/parameters/",mn="#/components/schemas/";var or=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.classNameBuilder){let n="";return typeof r.classNameBuilder=="function"?n=r.classNameBuilder(t):n=r.classNameBuilder.replace("{{name}}",t),n}return t},ys=e=>R().plugins["@hey-api/typescript"]?.style==="PascalCase"?j({case:"PascalCase",value:e}):e,Ho=e=>{let t=ys(e);return Pe(t).replace(ae,"_$1")};var Go=(e,t)=>{if(e.enum&&!t.includes("boolean"))return "enum"},hs=e=>ar(e).includes("null"),xt=e=>e.nullable===true||hs(e),ar=({type:e})=>Array.isArray(e)?e:e?[e]:[];var Ir=e=>e.trim().replace(/^#\/definitions\//,"").replace(/^#\/parameters\//,"").replace(/^#\/responses\//,"").replace(/^#\/securityDefinitions\//,"").replace(/^#\/components\/schemas\//,"").replace(/^#\/components\/responses\//,"").replace(/^#\/components\/parameters\//,"").replace(/^#\/components\/examples\//,"").replace(/^#\/components\/requestBodies\//,"").replace(/^#\/components\/headers\//,"").replace(/^#\/components\/securitySchemes\//,"").replace(/^#\/components\/links\//,"").replace(/^#\/components\/callbacks\//,"");var Jo=(e,t)=>{if(t==="binary")return "binary";switch(e){case "any":case "object":case "unknown":return "unknown";case "array":return "unknown[]";case "boolean":return "boolean";case "byte":case "double":case "float":case "int":case "integer":case "long":case "number":case "short":return "number";case "char":case "date":case "date-time":case "password":case "string":return "string";case "file":return "binary";case "null":return "null";case "void":return "void"}},Zo=/(?<!`1)\[.*\]$/g,T=({debug:e,format:t,type:r="unknown"})=>{let n={$refs:[],base:"unknown",imports:[],isNullable:false,template:null,type:"unknown"};if(Array.isArray(r)){let a=r.filter(p=>p!=="null").map(p=>Jo(p,t)).filter(Boolean).join(" | ");return n.type=a,n.base=a,n.isNullable=hs({type:r}),n}let s=Jo(r,t);if(s)return n.type=s,n.base=s,n;let i=decodeURIComponent(Ir(r));if(Zo.lastIndex=0,Zo.test(i)){let a=i.match(/(.*?)\[(.*)\]$/);if(a?.length){let p=T({debug:e,type:Pe(a[1])}),c=T({debug:e,type:Pe(a[2])});return p.type==="unknown[]"?(n.type=`${c.type}[]`,n.base=`${c.type}`,p.$refs=[],p.imports=[]):c.type?(n.type=`${p.type}<${c.type}>`,n.base=p.type,n.template=c.type):(n.type=p.type,n.base=p.type,n.template=p.type),n.$refs=[...n.$refs,...p.$refs,...c.$refs],n.imports=[...n.imports,...p.imports,...c.imports],n}}if(i){let a=ys(Pe(i));return r.startsWith(ir)&&(a=`Parameter${a}`),n.type=a,n.base=a,r.startsWith("#")&&(n.$refs=[...n.$refs,decodeURIComponent(r)]),n.imports=[...n.imports,a],n}return n};function Ve(e,t,r){return r.indexOf(e)===t}var pr=(e,t)=>{if(!Array.isArray(t))return [];let r=(e["x-enum-descriptions"]??[]).filter(s=>typeof s=="string"),n=(e["x-enum-varnames"]??e["x-enumNames"]??[]).filter(s=>typeof s=="string");return t.filter(Ve).filter(s=>typeof s=="number"||typeof s=="string").map((s,i)=>({customDescription:r[i],customName:n[i],description:void 0,value:s}))};var G=e=>e?.replace(/\\/g,"\\\\").replace(/'/g,"\\'");var fn=({definition:e,getModel:t,openApi:r,types:n})=>{let s=[];return Object.entries(e.properties??{}).forEach(([i,a])=>{let p=!!e.required?.includes(i);if(a.$ref){let c=T({type:a.$ref});s.push({$refs:[],base:c.base,description:a.description||null,enum:[],enums:[],exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:"reference",format:a.format,imports:c.imports,in:"",isDefinition:false,isNullable:a["x-nullable"]===true,isReadOnly:a.readOnly===true,isRequired:p,link:null,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,name:ye(i),pattern:G(a.pattern),properties:[],template:c.template,type:c.type,uniqueItems:a.uniqueItems});}else {let c=t({definition:a,openApi:r,types:n});s.push({$refs:[],base:c.base,description:a.description||null,enum:c.enum,enums:c.enums,exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:c.export,format:a.format,imports:c.imports,in:"",isDefinition:false,isNullable:a["x-nullable"]===true,isReadOnly:a.readOnly===true,isRequired:p,link:c.link,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,name:ye(i),pattern:G(a.pattern),properties:c.properties,template:c.template,type:c.type,uniqueItems:a.uniqueItems});}}),s};var sf=/~1/g,of=/~0/g;function _(e,t){if(t.$ref){let r=t.$ref.replace(/^#/g,"").split("/").filter(Boolean),n=e;return r.forEach(s=>{let i=decodeURIComponent(s.replace(sf,"/").replace(of,"~"));if(n.hasOwnProperty(i))n=n[i];else throw new Error(`Could not find reference: "${t.$ref}"`)}),n}return t}var Yo=({definitions:e,getModel:t,openApi:r,required:n,types:s})=>e.reduce((i,a)=>{if(a.$ref){let p=_(r,a);return [...i,...t({definition:p,openApi:r,types:s}).properties]}return [...i,...t({definition:a,openApi:r,types:s}).properties]},[]).filter(i=>!i.isRequired&&n.includes(i.name)).map(i=>({...i,isRequired:true}));var ea=({definition:e,definitions:t,getModel:r,openApi:n,type:s,types:i})=>{let a={$refs:[],enums:[],export:s,imports:[],properties:[]},p=[];if(t.map(c=>r({definition:c,openApi:n,types:i})).filter(c=>{let m=c.properties.length,f=c.enums.length;return !(c.type==="unknown"&&!m&&!f)}).forEach(c=>{a.imports.push(...c.imports),a.enums.push(...c.enums),a.properties.push(c);}),e.required&&s==="all-of"){let c=Yo({definitions:t,getModel:r,openApi:n,required:e.required,types:i});c.forEach(m=>{a.imports.push(...m.imports),a.enums.push(...m.enums);}),p.push(...c);}if(e.properties){let c=fn({definition:e,getModel:r,openApi:n,types:i});c.forEach(m=>{a.imports.push(...m.imports),a.enums.push(...m.enums),m.export==="enum"&&a.enums.push(m);}),p.push(...c);}return p.length&&a.properties.push({$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:p,template:null,type:"unknown"}),a};var We=({definition:e,isDefinition:t=false,meta:r,openApi:n,types:s})=>{let i={$refs:[],base:"unknown",description:e.description||null,enum:[],enums:[],exclusiveMaximum:e.exclusiveMaximum,exclusiveMinimum:e.exclusiveMinimum,export:"interface",format:e.format,imports:[],in:"",isDefinition:t,isNullable:e["x-nullable"]===true,isReadOnly:e.readOnly===true,isRequired:false,link:null,maxItems:e.maxItems,maxLength:e.maxLength,maxProperties:e.maxProperties,maximum:e.maximum,meta:r,minItems:e.minItems,minLength:e.minLength,minProperties:e.minProperties,minimum:e.minimum,multipleOf:e.multipleOf,name:r?.name??"",pattern:G(e.pattern),properties:[],template:null,type:"unknown",uniqueItems:e.uniqueItems};if(e.$ref){let a=T({type:e.$ref});return i.export="reference",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}if(e.enum&&e.type!=="boolean"){let a=pr(e,e.enum);if(a.length)return i.base="string",i.enum=[...i.enum,...a],i.export="enum",i.type="string",i}if(e.type==="array"&&e.items)if(e.items.$ref){let a=T({type:e.items.$ref});return i.export="array",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}else {let a=We({definition:e.items,openApi:n,types:s});return i.export="array",i.type=a.type,i.base=a.base,i.template=a.template,i.link=a,i.imports.push(...a.imports),i}if(e.type==="object"&&typeof e.additionalProperties=="object")if(e.additionalProperties.$ref){let a=T({type:e.additionalProperties.$ref});return i.export="dictionary",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}else {let a=We({definition:e.additionalProperties,openApi:n,types:s});return i.export="dictionary",i.type=a.type,i.base=a.base,i.template=a.template,i.link=a,i.imports.push(...a.imports),i}if(e.allOf?.length){let a=ea({definition:e,definitions:e.allOf,getModel:We,openApi:n,type:"all-of",types:s});return i.export=a.export,i.imports.push(...a.imports),i.properties.push(...a.properties),i.enums=[...i.enums,...a.enums],i}if(e.type==="object")return i.export="interface",i.type="unknown",i.base="unknown",e.properties&&fn({definition:e,getModel:We,openApi:n,types:s}).forEach(p=>{i.imports.push(...p.imports),i.enums=[...i.enums,...p.enums],i.properties.push(p),p.export==="enum"&&(i.enums=[...i.enums,p]);}),i;if(e.type){let a=T({format:e.format,type:e.type});return i.export="generic",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}return i};var ta=e=>{let t={},r=[];return Object.entries(e.definitions??{}).forEach(([n,s])=>{let a=T({type:n}).base.replace(ae,"_$1"),p={$ref:`#/definitions/${n}`,name:a};t[a]=p;let c=We({definition:s,isDefinition:true,meta:p,openApi:e,types:t});r=[...r,c];}),{models:r,types:t}};function gs(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var Cr=(e,t)=>gs(e.name,t.name);function ra(e){return e.sort(Cr)}var af=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},na=e=>e.map(t=>ln(t.value,true)).filter(Ve).join(" | "),ln=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,un=e=>{let t=af(e.value,e.customName),r=ln(e.value);return {key:t,value:r}},dn=e=>{let t=e.enum.map(r=>un(r)).sort((r,n)=>gs(r.key,n.key)).map(r=>`${r.key}=${r.value}`).join("&");return {$ref:`enum/${e.name}/${t}`,name:Pe(Wt(e.name))}};var sa=e=>{let r=`Parameter${T({type:e}).base.replace(ae,"_$1")}`;return {$ref:ir+e,name:r}},yn=e=>{let t=Ho(e);return {$ref:mn+e,name:t}};var Tr=e=>e.format==="date"||e.format==="date-time",xs=e=>{let t=R();return e.base==="binary"?o.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.dates&&Tr(e)?o.typeNode("Date"):o.typeNode(e.base)},pf=e=>{let t=e.base==="null"?false:e.isNullable,r=xs(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(mn)){let s=yn(e.base);r=o.typeNode(s.name);}return o.typeUnionNode({isNullable:t,types:[r]})},cf=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>Oe(n));return o.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(Oe(e.link));return o.typeTupleNode({isNullable:e.isNullable,types:t})}return o.typeArrayNode([Oe(e.link)],e.isNullable)}return o.typeArrayNode([xs(e)],e.isNullable)},mf=e=>{let t=e.enum.map(r=>ln(r.value));return o.typeUnionNode({isNullable:e.isNullable,types:t})},ff=e=>{let t=e.link&&!Array.isArray(e.link)?Oe(e.link):xs(e);return o.typeRecordNode(["string"],[t],e.isNullable,true)},ia=({model:e,style:t})=>{let r=e.properties.map(s=>o.nodeToString({node:Oe(s),unescape:true})).filter(Ve),n=t==="union"?o.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(s=>s.isNullable),types:r}):o.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:o.typeParenthesizedNode({type:n})},lf=e=>{if(!e.properties.length)return o.typeNode("unknown");let t=R(),r=K(t),n=e.properties.map(s=>{let i=s.isRequired?"":"?",a=Oe(s),p=r?/^\dXX$/.test(s.name)?ye(s.name):s.name:ye(Wt(bs(s.name)));return s.name==="[key: string]"&&(p=s.name,i&&(i="",a=o.typeUnionNode({types:[a,"undefined"]}))),{comment:[s.description&&D(s.description),s.deprecated&&"@deprecated"],isReadOnly:s.isReadOnly,isRequired:i==="",name:p,type:a}});return o.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},Oe=e=>{switch(e.export){case "all-of":return ia({model:e,style:"intersection"});case "any-of":case "one-of":return ia({model:e,style:"union"});case "array":return cf(e);case "dictionary":return ff(e);case "enum":return mf(e);case "interface":return lf(e);case "const":case "generic":case "reference":default:return pf(e)}},Se=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:s})=>{let i={created:false,name:""},a=n.name;s&&(a=s(a)),t>1&&(a=`${a}${t}`);let p=e.types[a];return p?p.$ref===n.$ref?i={created:false,name:a}:i=Se({client:e,count:t+1,create:r,meta:n,nameTransformer:s}):r&&(e.types[a]=n,i={created:true,name:a}),i},oa=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},bs=e=>{let t=R();return K(t)?j({case:"camelCase",value:ms(e)}).replace(ae,"_$1"):e};var hn=e=>{let t=e.find(r=>r.in==="header");return t?t.name:null},Ue=e=>e.some(r=>r.isRequired),gn=e=>{if(e==="default")return "default";if(e==="1XX")return "1XX";if(e==="2XX")return "2XX";if(e==="3XX")return "3XX";if(e==="4XX")return "4XX";if(e==="5XX")return "5XX";if(/\d{3}/g.test(e)){let t=Number.parseInt(e,10);if(t>=100&&t<600)return t}return null},xn=(e,t)=>e.code>t.code?1:e.code<t.code?-1:0,uf=e=>e==="3XX"||e==="4XX"||e==="5XX"||typeof e=="number"&&e>=300,aa=e=>e==="2XX"||typeof e=="number"&&e>=200&&e<300,df=(e,t)=>{let r=[],n=m=>{r.includes(m)||(r=[...r,m]);};t.some(({code:m})=>aa(m))||n("success");let i=(e.description??"").toLocaleLowerCase(),a=e.$refs.join("|").toLocaleLowerCase(),p=["error","problem"];return ["success"].some(m=>i.includes(m)||a.includes(m))&&n("success"),p.some(m=>i.includes(m)||a.includes(m))&&n("error"),r.length||n("error"),r},bn=({config:e,operationKey:t})=>{let r=e.plugins["@hey-api/sdk"]?.filter?new RegExp(e.plugins["@hey-api/sdk"]?.filter):void 0;return !r||r.test(t)},On=({config:e,method:t,operationId:r,path:n})=>{if(e.plugins["@hey-api/sdk"]?.operationId&&r)return j({case:"camelCase",value:Ze(r)});let s=n;return K(e)&&(s=s.replace(/[^/]*?{api-version}.*?\//g,"")),s=s.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-"),j({case:"camelCase",value:`${t}-${s}`})},Sn=e=>{let t=R();return !K(t)||e.prop!=="api-version"},Rn=e=>{let t=R();return K(t)?bs(e.prop):e.prop},In=e=>e.map(t=>{let{code:r}=t;return r==="default"?t.responseTypes=df(t,e):aa(r)?t.responseTypes=["success"]:uf(r)&&(t.responseTypes=["error"]),t});var B=(e,t)=>{if(e.default===void 0||e.default===null)return e.default;switch(ar(e).find(s=>s!=="null")||typeof e.default){case "int":case "integer":case "number":if(t?.export==="enum"&&t.enum?.[e.default]){let{value:s}=t.enum[e.default];return s}return e.default;case "array":case "boolean":case "object":case "string":return e.default;default:return}};var pa=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:t.in,isDefinition:false,isNullable:t["x-nullable"]===true,isReadOnly:false,isRequired:t.required===true,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maximum:t.maximum,mediaType:null,minItems:t.minItems,minLength:t.minLength,minimum:t.minimum,multipleOf:t.multipleOf,pattern:G(t.pattern),prop:t.name,properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems},s={...n,name:Rn(n)};if(t.$ref){let a=T({type:t.$ref});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"reference",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}if(t.enum){let a=pr(t,t.enum);if(a.length)return s={...s,base:"string",enum:[...s.enum,...a],export:"enum",type:"string"},s.default=B(t,s),s}if(t.type==="array"&&t.items){let a=T({format:t.items.format,type:t.items.type});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"array",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}if(t.type==="object"&&t.items){let a=T({format:t.items.format,type:t.items.type});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"dictionary",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}let i=t.schema;if(i){if(i.$ref?.startsWith("#/parameters/")&&(i=_(e,i)),i.$ref){let p=T({type:i.$ref});return s={...s,$refs:[...s.$refs,...p.$refs],base:p.base,export:"reference",imports:[...s.imports,...p.imports],template:p.template,type:p.type},s.default=B(t,s),s}let a=We({definition:i,openApi:e,types:r});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,enum:[...s.enum,...a.enum],enums:[...s.enums,...a.enums],export:a.export,imports:[...s.imports,...a.imports],link:a.link,properties:[...s.properties,...a.properties],template:a.template,type:a.type},s.default=B(t,s),s}if(t.type){let a=T({format:t.format,type:t.type});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"generic",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}return s};var yf=["body","formData","header","path","query"],Cn=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(s=>{let i=_(e,s),a=pa({openApi:e,parameter:i,types:r}),p=!Sn(a);if(!(!yf.includes(i.in)||p)){switch(i.in){case "body":n.parametersBody=a;break;case "formData":n.parametersForm=[...n.parametersForm,a];break;case "header":n.parametersHeader=[...n.parametersHeader,a];break;case "path":n.parametersPath=[...n.parametersPath,a];break;case "query":n.parametersQuery=[...n.parametersQuery,a];break}n.$refs=[...n.$refs,...a.$refs],n.imports=[...n.imports,...a.imports],n.parameters=[...n.parameters,a];}}),n};function Tn(e){return e.sort((t,r)=>{let n=t.isRequired&&t.default===void 0,s=r.isRequired&&r.default===void 0;return n&&!s?-1:s&&!n?1:0})}var ca=({code:e,openApi:t,response:r,types:n})=>{let s={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"},i=r.schema;if(i){if(i.$ref?.startsWith("#/responses/")&&(i=_(t,i)),i.$ref){let p=T({type:i.$ref});return s.export="reference",s.type=p.type,s.base=p.base,s.template=p.template,s.imports=[...s.imports,...p.imports],s}let a=We({definition:i,openApi:t,types:n});return s.export=a.export,s.type=a.type,s.base=a.base,s.template=a.template,s.link=a.link,s.isReadOnly=a.isReadOnly,s.isRequired=a.isRequired,s.isNullable=a.isNullable,s.format=a.format,s.maximum=a.maximum,s.exclusiveMaximum=a.exclusiveMaximum,s.minimum=a.minimum,s.exclusiveMinimum=a.exclusiveMinimum,s.multipleOf=a.multipleOf,s.maxLength=a.maxLength,s.minLength=a.minLength,s.maxItems=a.maxItems,s.minItems=a.minItems,s.uniqueItems=a.uniqueItems,s.maxProperties=a.maxProperties,s.minProperties=a.minProperties,s.pattern=G(a.pattern),s.imports=[...s.imports,...a.imports],s.enum=[...s.enum,...a.enum],s.enums=[...s.enums,...a.enums],s.properties=[...s.properties,...a.properties],s}if(r.headers)for(let a in r.headers)return s.in="header",s.name=a,s.type="string",s.base="string",s;return s};var ma=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([s,i])=>{let a=gn(s);if(!a)return;let p=_(e,i),c=ca({code:a,openApi:e,response:p,types:r});n=[...n,c];}),n=In(n),n.sort(xn)};var fa=({method:e,op:t,openApi:r,pathParams:n,types:s,url:i})=>{let a={$refs:[],deprecated:t.deprecated===true,description:t.description||null,id:t.operationId||null,imports:[],method:e.toUpperCase(),parameters:[...n.parameters],parametersBody:n.parametersBody,parametersCookie:[...n.parametersCookie],parametersForm:[...n.parametersForm],parametersHeader:[...n.parametersHeader],parametersPath:[...n.parametersPath],parametersQuery:[...n.parametersQuery],path:i,responseHeader:null,responses:[],summary:t.summary||null,tags:t.tags||null},p={...a,name:On({config:R(),method:a.method,operationId:t.operationId,path:a.path})};if(t.parameters){let c=Cn({openApi:r,parameters:t.parameters,types:s});p.$refs=[...p.$refs,...c.$refs],p.imports=[...p.imports,...c.imports],p.parameters=[...p.parameters,...c.parameters],p.parametersBody=c.parametersBody,p.parametersCookie=[...p.parametersCookie,...c.parametersCookie],p.parametersForm=[...p.parametersForm,...c.parametersForm],p.parametersHeader=[...p.parametersHeader,...c.parametersHeader],p.parametersPath=[...p.parametersPath,...c.parametersPath],p.parametersQuery=[...p.parametersQuery,...c.parametersQuery];}if(t.responses){p.responses=ma({openApi:r,responses:t.responses,types:s});let c=p.responses.filter(m=>m.responseTypes.includes("success"));p.responseHeader=hn(c),c.forEach(m=>{p.$refs=[...p.$refs,...m.$refs],p.imports=[...p.imports,...m.imports];});}return p.parameters=Tn(p.parameters),p};var la=({openApi:e,types:t})=>{let r=new Map,n=[],s=R();for(let i in e.paths){let a=e.paths[i],p=Cn({openApi:e,parameters:a.parameters??[],types:t});for(let c in a){let m=c,f=v({method:m,path:i});if(pn.includes(m)){let l=a[m];if(l.operationId&&(r.has(l.operationId)?s.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${f}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,f)),bn({config:s,operationKey:f})){let u=fa({method:m,op:l,openApi:e,pathParams:p,types:t,url:i});n.push(u);}}}}return n};var ua=e=>{let t=e.schemes?.[0]||"http",r=e.host,n=e.basePath||"";return (r?`${t}://${r}${n}`:n).replace(/\/$/g,"")};var da=e=>{let t=cn(e.info.version),r=ua(e),{models:n,types:s}=ta(e),i=la({openApi:e,types:s});return {models:n,operations:i,server:r,types:s,version:t}};var hf=e=>{let t={};for(let r in e)t[e[r]]=r;return t},ya=(e,t)=>{if(e.components&&t){for(let r in e.components.schemas)if(e.components.schemas.hasOwnProperty(r)){let n=e.components.schemas[r];if(n.discriminator&&n.oneOf?.length&&n.oneOf.some(s=>s.$ref&&Ir(s.$ref)==t.name))return n.discriminator}}},ha=(e,t)=>{if(e.mapping){let r=hf(e.mapping),n=Object.keys(r).find(s=>Ir(s)==t.name);if(n&&r[n])return r[n]}return t.name};var Os=({debug:e,definition:t,getModel:r,model:n,openApi:s,types:i})=>{let a=typeof t.additionalProperties=="object"?t.additionalProperties:{},p=r({debug:e,definition:a,openApi:s,parentDefinition:t,types:i});if(a.$ref){let c=T({type:a.$ref});return n.base=c.base,n.default=B(t,n),n.export="dictionary",n.imports.push(...c.imports),n.template=c.template,n.type=c.type,n}if(t.additionalProperties&&t.properties&&Object.keys(t.properties).length>0){let c=typeof t.additionalProperties=="object"&&t.additionalProperties.type&&!Array.isArray(t.additionalProperties.type)?t.additionalProperties.type:p.base,m=[T({type:c}).base,...n.properties.map(f=>f.base)];return p.base=m.filter(Ve).join(" | "),p.default=B(t,n),p.export="generic",p.isRequired=t.additionalProperties===true,p.name="[key: string]",p}return n.base=p.base,n.default=B(t,n),n.export="dictionary",n.imports.push(...p.imports),n.link=p,n.template=p.template,n.type=p.type,n},Pn=({debug:e,definition:t,getModel:r,openApi:n,parent:s,types:i})=>{let a=[],p=ya(n,s);return Object.entries(t.properties??{}).forEach(([c,m])=>{let f=!!t.required?.includes(c),l={default:m.default,deprecated:m.deprecated===true,description:m.description||null,exclusiveMaximum:m.exclusiveMaximum,exclusiveMinimum:m.exclusiveMinimum,format:m.type==="array"?m.items?.format??m.format:m.format,in:"",isDefinition:false,isReadOnly:m.readOnly===true,isRequired:f,maxItems:m.maxItems,maxLength:m.maxLength,maxProperties:m.maxProperties,maximum:m.maximum,minItems:m.minItems,minLength:m.minLength,minProperties:m.minProperties,minimum:m.minimum,multipleOf:m.multipleOf,name:ye(c),pattern:G(m.pattern),uniqueItems:m.uniqueItems};if(s&&p?.propertyName==c){a=[...a,{...l,$refs:[],base:`'${ha(p,s)}'`,enum:[],enums:[],export:"reference",imports:[],isNullable:xt(m),link:null,properties:[],template:null,type:"string"}];return}if(m.$ref){let d=T({type:m.$ref});a=[...a,{...l,$refs:d.$refs,base:d.base,enum:[],enums:[],export:"reference",imports:d.imports,isNullable:d.isNullable||xt(m),link:null,properties:[],template:d.template,type:d.type}];return}let u=r({debug:e,definition:m,initialValues:l,openApi:n,parentDefinition:t,types:i});u.isNullable=u.isNullable||xt(m),a=[...a,u];}),a};var ga=({debug:e,definitions:t,getModel:r,openApi:n,required:s,types:i})=>t.reduce((p,c)=>{if(c.$ref){let m=T({type:c.$ref}),f={$ref:c.$ref,name:m.base};i[m.base]=f;let l=_(n,c);return [...p,...r({debug:e,definition:l,meta:f,openApi:n,types:i}).properties]}return [...p,...r({debug:e,definition:c,openApi:n,parentDefinition:c,types:i}).properties]},[]).filter(p=>!p.isRequired&&s.includes(p.name)).map(p=>({...p,isRequired:true}));var jn=e=>[{definitions:e.allOf,type:"all-of"},{definitions:e.anyOf,type:"any-of"},{definitions:e.oneOf,type:"one-of"}].find(r=>r.definitions?.length),xa=({debug:e,definition:t,definitions:r,getModel:n,model:s,openApi:i,type:a,types:p})=>{let c={$refs:s.$refs,enums:s.enums,export:a,imports:s.imports,properties:s.properties},m=[];if(r.map(f=>n({debug:e,definition:f,openApi:i,parentDefinition:t,types:p})).forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.enums=[...c.enums,...f.enums],c.properties=[...c.properties,f];}),t.required&&a==="all-of"){let f=ga({debug:e,definitions:r,getModel:n,openApi:i,required:t.required,types:p});f.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums];}),m=[...m,...f];}if(t.properties){let f=Pn({definition:t,getModel:n,openApi:i,types:p});f.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums],l.export==="enum"&&(c.enums=[...c.enums,l]);}),m=[...m,...f];}if(m.length){let f=jn(t);if(f){let l={$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:m,template:null,type:"unknown"};f.type==="one-of"?(c.properties=[{...c,base:"",description:null,enum:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:true,link:null,name:"",template:null,type:""},l],c.export="all-of"):c.properties=[...c.properties,l];}}return c};var se=({debug:e,definition:t,initialValues:r={},isDefinition:n=false,meta:s,openApi:i,parentDefinition:a=null,types:p})=>{let c=ar(t),m=Go(t,c),f={$refs:[],base:"unknown",deprecated:!!t.deprecated,description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:"",isDefinition:n,isNullable:xt(t),isReadOnly:t.readOnly===true,isRequired:false,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maxProperties:t.maxProperties,maximum:t.maximum,meta:s,minItems:t.minItems,minLength:t.minLength,minProperties:t.minProperties,minimum:t.minimum,multipleOf:t.multipleOf,name:s?.name??"",pattern:G(t.pattern),properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems,...r};if(t.$ref){let u=T({debug:e,type:t.$ref});return f.$refs=[...f.$refs,decodeURIComponent(t.$ref)],f.base=u.base,f.export="reference",f.imports=[...f.imports,...u.imports],f.template=u.template,f.type=u.type,f.default=B(t,f),f}if(m==="enum"){let u=pr(t,t.enum);if(u.length)return f.base="string",f.enum=[...f.enum,...u],f.export="enum",f.type="string",f.default=B(t,f),f.meta||(f.meta=dn(f)),f}if(c.includes("array")&&(t.items||t.prefixItems)){if(t.prefixItems){let y=t.prefixItems.map(x=>se({definition:x,openApi:i,parentDefinition:t,types:p}));return f.export="array",f.$refs=[...f.$refs,...y.reduce((x,O)=>[...x,...O.$refs],[])],f.imports=[...f.imports,...y.reduce((x,O)=>[...x,...O.imports],[])],f.link=y,f.default=B(t,f),f}if(!t.items)return f;if(t.items.$ref){let y=T({type:t.items.$ref});return f.$refs=[...f.$refs,decodeURIComponent(t.items.$ref)],f.base=y.base,f.export="array",f.imports=[...f.imports,...y.imports],f.template=y.template,f.type=y.type,f.default=B(t,f),f}if(t.items.anyOf&&a&&a.type){let y=jn(a);if(y&&y.definitions.some(x=>!ar(x).includes("array")))return se({definition:t.items,openApi:i,parentDefinition:t,types:p})}let u=Array.isArray(t.items)?{anyOf:t.items}:t.items,d=se({definition:u,openApi:i,parentDefinition:t,types:p});return f.base=d.base,f.export="array",f.$refs=[...f.$refs,...d.$refs],f.imports=[...f.imports,...d.imports],f.link=d,f.template=d.template,f.type=d.type,f.default=B(t,f),f}let l=jn(t);if(l){let u=xa({...l,debug:e,definition:t,getModel:se,model:f,openApi:i,types:p});return {...f,...u}}if(c.includes("object")||t.properties||t.additionalProperties){if(t.properties&&(Object.keys(t.properties).length>0||!t.additionalProperties)){if(f.base="unknown",f.export="interface",f.type="unknown",f.default=B(t,f),Pn({debug:e,definition:t,getModel:se,openApi:i,parent:f,types:p}).forEach(y=>{f.$refs=[...f.$refs,...y.$refs],f.enums=[...f.enums,...y.enums],f.imports=[...f.imports,...y.imports],f.properties=[...f.properties,y],y.export==="enum"&&(f.enums=[...f.enums,y]);}),t.additionalProperties){let y=Os({debug:e,definition:t,getModel:se,model:f,openApi:i,types:p});f.properties=[...f.properties,y];}return !f.properties.length&&f.base==="unknown"&&f.type==="unknown"&&(f.export="dictionary",f.name||(f.name="[key: string]")),f}return Os({debug:e,definition:t,getModel:se,model:f,openApi:i,types:p})}if(t.const!==void 0){let u=t.const,d=typeof u=="string"?`"${u}"`:`${u}`;return f.base=d,f.export="const",f.type=d,f}if(c.length){let u=T({format:t.format,type:t.type});return f.base=u.base,f.export="generic",f.$refs=[...f.$refs,...u.$refs],f.imports=[...f.imports,...u.imports],f.isNullable=u.isNullable||f.isNullable,f.template=u.template,f.type=u.type,f.default=B(t,f),f}return f};var An=e=>{if(e.schema)return e.schema;if(e.content){let t=Object.entries(e.content);for(let[r,n]of t)if(n.schema){let s=r;return e.content[s].schema}}};var ba=e=>{let t={},r=[];return e.components?(Object.entries(e.components.schemas??{}).forEach(([n,s])=>{let i=yn(n);t[i.name]=i;let a=se({definition:s,isDefinition:true,meta:i,openApi:e,types:t});r=[...r,a];}),Object.entries(e.components.parameters??{}).forEach(([n,s])=>{let i=An(s);if(!i)return;let a=sa(n);t[a.name]=a;let p=se({definition:i,isDefinition:true,meta:a,openApi:e,types:t});p.deprecated=s.deprecated,p.description=s.description||null,r=[...r,p];}),{models:r,types:t}):{models:r,types:t}};var Oa=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",deprecated:t.deprecated===true,description:t.description||null,enum:[],enums:[],export:"interface",imports:[],in:t.in,isDefinition:false,isNullable:xt(t),isReadOnly:false,isRequired:t.required===true,link:null,mediaType:null,prop:t.name,properties:[],template:null,type:"unknown"},s={...n,name:Rn(n)};if(t.$ref){let a=T({type:t.$ref});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"reference",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s}let i=An(t);if(i){if(i.$ref?.startsWith(ir)&&(i=_(e,i)),i.$ref){let p=T({type:i.$ref});return s={...s,$refs:[...s.$refs,...p.$refs],base:p.base,export:"reference",imports:[...s.imports,...p.imports],template:p.template,type:p.type},s.default=B(i),s}let a=se({definition:i,openApi:e,types:r});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,enum:[...s.enum,...a.enum],enums:[...s.enums,...a.enums],exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:a.export,format:a.format,imports:[...s.imports,...a.imports],isNullable:s.isNullable||a.isNullable,isReadOnly:a.isReadOnly,isRequired:s.isRequired||a.isRequired,link:a.link,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,pattern:G(a.pattern),properties:[...s.properties,...a.properties],template:a.template,type:a.type,uniqueItems:a.uniqueItems},(s.enum.length||s.enums.length)&&!s.meta&&(s.meta=dn(s)),s.default=a.default,s}return s};var gf=["cookie","formData","header","path","query"],En=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(s=>{let i=_(e,s),a=Oa({openApi:e,parameter:i,types:r}),p=!Sn(a);if(!(!gf.includes(i.in)||p)){switch(i.in){case "cookie":n.parametersCookie=[...n.parametersCookie,a];break;case "formData":n.parametersForm=[...n.parametersForm,a];break;case "header":n.parametersHeader=[...n.parametersHeader,a];break;case "path":n.parametersPath=[...n.parametersPath,a];break;case "query":n.parametersQuery=[...n.parametersQuery,a];break}n.$refs=[...n.$refs,...a.$refs],n.imports=[...n.imports,...a.imports],n.parameters=[...n.parameters,a];}}),n};var xf=["application/json-patch+json","application/json","application/ld+json","application/x-www-form-urlencoded","multipart/batch","multipart/form-data","multipart/mixed","multipart/related","text/json","text/plain"],Nn=(e,t)=>{let r=Object.keys(t).filter(s=>{let i=s.split(";")[0].trim();return xf.includes(i)}).find(s=>!!t[s]?.schema);if(r)return {mediaType:r,schema:t[r].schema};let n=Object.keys(t).find(s=>!!t[s]?.schema);if(n)return {mediaType:n,schema:t[n].schema}};var Sa=({body:e,debug:t,openApi:r,types:n})=>{let s=e["x-body-name"]??"requestBody",i={$refs:[],base:"unknown",default:void 0,description:e.description||null,enum:[],enums:[],export:"interface",imports:[],in:"body",isDefinition:false,isNullable:e.nullable===true,isReadOnly:false,isRequired:e.required===true,link:null,mediaType:null,name:s,prop:s,properties:[],template:null,type:"unknown"};if(!e.content)return i;let a=Nn(r,e.content);if(!a)return i;switch(i.mediaType=a.mediaType,i.mediaType){case "application/x-www-form-urlencoded":case "multipart/form-data":i.in="formData",i.name="formData",i.prop="formData";break}if(a.schema.$ref){let c=T({type:a.schema.$ref});return i.export="reference",i.type=c.type,i.base=c.base,i.template=c.template,i.$refs=[...i.$refs,...c.$refs],i.imports=[...i.imports,...c.imports],i}let p=se({debug:t,definition:a.schema,openApi:r,types:n});return i.$refs=[...i.$refs,...p.$refs],i.base=p.base,i.enum=[...i.enum,...p.enum],i.enums=[...i.enums,...p.enums],i.exclusiveMaximum=p.exclusiveMaximum,i.exclusiveMinimum=p.exclusiveMinimum,i.export=p.export,i.format=p.format,i.imports=[...i.imports,...p.imports],i.isNullable=i.isNullable||p.isNullable,i.isReadOnly=p.isReadOnly,i.isRequired=i.isRequired||p.isRequired,i.link=p.link,i.maximum=p.maximum,i.maxItems=p.maxItems,i.maxLength=p.maxLength,i.maxProperties=p.maxProperties,i.minimum=p.minimum,i.minItems=p.minItems,i.minLength=p.minLength,i.minProperties=p.minProperties,i.multipleOf=p.multipleOf,i.pattern=G(p.pattern),i.properties=[...i.properties,...p.properties],i.template=p.template,i.type=p.type,i.uniqueItems=p.uniqueItems,i};var Ra=({code:e,openApi:t,response:r,types:n})=>{let s={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"};if(r.content){let i=Nn(t,r.content);if(i){if(i.schema.$ref?.startsWith("#/components/responses/")&&(i.schema=_(t,i.schema)),i.schema.$ref){let p=T({type:i.schema.$ref});return s.base=p.base,s.export="reference",s.$refs=[...s.$refs,...p.$refs],s.imports=[...s.imports,...p.imports],s.template=p.template,s.type=p.type,s}let a=se({definition:i.schema,openApi:t,types:n});return s.export=a.export,s.type=a.type,s.base=a.base,s.template=a.template,s.link=a.link,s.isReadOnly=a.isReadOnly,s.isRequired=a.isRequired,s.isNullable=a.isNullable,s.format=a.format,s.maximum=a.maximum,s.exclusiveMaximum=a.exclusiveMaximum,s.minimum=a.minimum,s.exclusiveMinimum=a.exclusiveMinimum,s.multipleOf=a.multipleOf,s.maxLength=a.maxLength,s.minLength=a.minLength,s.maxItems=a.maxItems,s.minItems=a.minItems,s.uniqueItems=a.uniqueItems,s.maxProperties=a.maxProperties,s.minProperties=a.minProperties,s.pattern=G(a.pattern),s.$refs=[...s.$refs,...a.$refs],s.imports=[...s.imports,...a.imports],s.enum=[...s.enum,...a.enum],s.enums=[...s.enums,...a.enums],s.properties=[...s.properties,...a.properties],s}}if(r.headers)for(let i in r.headers)return s.in="header",s.name=i,s.type="string",s.base="string",s;return s};var Ia=({debug:e,openApi:t,responses:r,types:n})=>{let s=[];return Object.entries(r).forEach(([i,a])=>{let p=gn(i);if(!p)return;let c=_(t,a),m=Ra({code:p,openApi:t,response:c,types:n});s=[...s,m];}),s=In(s),s.sort(xn)};var cr=(e,t)=>{let r=[...e],n=[...t];for(;n.length>0;){let s=n[0];n=n.slice(1),r.every(a=>a.in!==s.in||a.name!==s.name)&&(r=[...r,s]);}return r},Ca=({debug:e,method:t,op:r,openApi:n,pathParams:s,types:i,url:a})=>{let p={$refs:[],deprecated:!!r.deprecated,description:r.description||null,id:r.operationId||null,imports:[],method:t.toUpperCase(),parameters:[],parametersBody:s.parametersBody,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[],path:a,responseHeader:null,responses:[],summary:r.summary||null,tags:r.tags||null},c={...p,name:On({config:R(),method:p.method,operationId:r.operationId,path:p.path})};if(r.parameters){let m=En({openApi:n,parameters:r.parameters,types:i});c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports],c.parameters=[...c.parameters,...m.parameters],c.parametersBody=m.parametersBody,c.parametersCookie=[...c.parametersCookie,...m.parametersCookie],c.parametersForm=[...c.parametersForm,...m.parametersForm],c.parametersHeader=[...c.parametersHeader,...m.parametersHeader],c.parametersPath=[...c.parametersPath,...m.parametersPath],c.parametersQuery=[...c.parametersQuery,...m.parametersQuery];}if(r.requestBody){let m=_(n,r.requestBody),f=Sa({body:m,debug:e,openApi:n,types:i});c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.parameters=[...c.parameters,f],c.parametersBody=f;}if(r.responses){c.responses=Ia({openApi:n,responses:r.responses,types:i});let m=c.responses.filter(f=>f.responseTypes.includes("success"));c.responseHeader=hn(m),m.forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports];});}return c.parameters=cr(c.parameters,s.parameters),c.parametersCookie=cr(c.parametersCookie,s.parametersCookie),c.parametersForm=cr(c.parametersForm,s.parametersForm),c.parametersHeader=cr(c.parametersHeader,s.parametersHeader),c.parametersPath=cr(c.parametersPath,s.parametersPath),c.parametersQuery=cr(c.parametersQuery,s.parametersQuery),c.parameters=Tn(c.parameters),c};var Ta=({openApi:e,types:t})=>{let r=new Map,n=[],s=R();for(let i in e.paths){let a=e.paths[i],p=En({openApi:e,parameters:a.parameters??[],types:t});for(let c in a){let m=c,f=v({method:m,path:i});if(pn.includes(m)){let l=a[m];if(l.operationId&&(r.has(l.operationId)?s.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${f}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,f)),bn({config:s,operationKey:f})){let u=Ca({method:m,op:l,openApi:e,pathParams:p,types:t,url:i});n.push(u);}}}}return n};var Pa=e=>{let t=e.servers?.[0],r=t?.variables||{},n=t?.url||"";return Object.entries(r).forEach(([s,i])=>{n=n.replace(`{${s}}`,i.default);}),n.replace(/\/$/g,"")};var ja=e=>{let t=cn(e.info.version),r=Pa(e),{models:n,types:s}=ba(e),i=Ta({openApi:e,types:s});return {models:n,operations:i,server:r,types:s,version:t}};function JS({openApi:e}){let t=e;if("openapi"in t)return ja(t);if("swagger"in t)return da(t);throw new Error(`Unsupported OpenAPI specification: ${JSON.stringify(t,null,2)}`)}var ZS=({config:e,spec:t})=>{let r=new en({config:e,spec:t});if("swagger"in r.spec)return ls(r),r;switch(r.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return us(r),r;case "3.1.0":case "3.1.1":return ds(r),r;}throw new Error("Unsupported OpenAPI specification")};var Aa=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var bt={_dependencies:["@hey-api/typescript"],_tags:["client"],baseUrl:true,bundle:true,exportFromIndex:false,output:"client"};var Sf=fileURLToPath(import.meta.url),Ea=z.dirname(Sf),ka=e=>{let t=e.split(z.sep);return t.slice(0,t.length-1).join(z.sep)},Y=({config:e,sourceOutput:t})=>{let r=E(e);if("bundle"in r&&r.bundle)return Bt({moduleOutput:"client",sourceOutput:t});if(z.isAbsolute(r.name)){let n=ka(r.name),s=z.resolve(e.output.path);return z.relative(s,n).replace(/\\/g,"/")}return r.name},W={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}},Na=e=>{let t=Ot.readFileSync(e,"utf8");t=t.replace(/from\s+['"](\.\.?\/[^'"]*?)['"]/g,(r,n)=>{let s=n.lastIndexOf("/");return (s>=0?n.slice(s+1):n).includes(".")?r:`from '${n}.js'`}),Ot.writeFileSync(e,t,"utf8");},fR=({outputPath:e,plugin:t,tsConfig:r})=>{if(t.name.startsWith("@hey-api/client-")){let l=r?.options.moduleResolution===g.ModuleResolutionKind.NodeNext,u=z.resolve(e,"core");Je(u);let d=z.resolve(Ea,"clients","core");if(Ot.cpSync(d,u,{recursive:true}),l){let b=Ot.readdirSync(u);for(let A of b)Na(z.resolve(u,A));}let y=z.resolve(e,"client");Je(y);let x=t.name.slice(16),O=z.resolve(Ea,"clients",x);if(Ot.cpSync(O,y,{recursive:true}),l){let b=Ot.readdirSync(y);for(let A of b)Na(z.resolve(y,A));}return}let s="";if(z.isAbsolute(t.name)&&(s=ka(t.name)),s){let l=z.resolve(e,"client");Je(l),Ot.cpSync(s,l,{recursive:true});return}let a=z.normalize(mi.resolve(t.name)).split(z.sep),p=a.slice(0,a.indexOf("dist")+1).join(z.sep),m=[a[a.length-1],"index.d.ts","index.d.cts"],f=z.resolve(e,"client");Je(f);for(let l of m)Ot.copyFileSync(z.resolve(p,l),z.resolve(f,l));};var $=({case:e="PascalCase",config:t,id:r,parameterId:n,type:s})=>{let i="";switch(s){case "data":case "error":case "errors":case "parameter":case "response":case "responses":i=`${(s[0]??"").toLocaleUpperCase()}${s.slice(1)}`;break}let a=true;t.plugins["@hey-api/typescript"]?.identifierCase==="preserve"&&(a=false);let p=a?"-":"",c=[Jt,j({case:e,value:r}),p,i];return n&&(c.push(p),c.push(j({case:e,value:n}))),c.join("")};var N="types";function Rf(e,t){return {...e,get name(){return t?.(e),e.name}}}var je=({context:e,file:t,operation:r,type:n})=>{let s=e.file({id:N}).identifier({$ref:$({config:e.config,id:r.id,type:n}),namespace:"type"});return Rf(s,i=>{i.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:N}),name:i.name});})};var If=({context:e,plugin:t})=>{let{baseUrl:r}=t;if(r===false)return;if(typeof r=="string")return r;let{servers:n}=e.ir;if(n)return n[typeof r=="number"?r:0]?.url},va=({context:e,plugin:t})=>{let r=e.file({id:Ne}),n=Y({config:e.config,sourceOutput:r.nameWithoutExtension()}),s=r.import({module:n,name:"createClient"}),i=r.import({module:n,name:"createConfig"}),a=r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:"ClientOptions"}),p=t.runtimeConfigPath?r.import({module:r.relativePathToFile({context:e,id:t.runtimeConfigPath}),name:"createClientConfig"}):void 0,c=[],m=If({context:e,plugin:t});if(m){let u=De(m);if(u.protocol&&u.host&&!m.includes("{"))c.push({key:fe(e.config),value:m});else if(m!=="/"&&m.startsWith("/")){let d=m.endsWith("/")?m.slice(0,-1):m;c.push({key:fe(e.config),value:d});}}"throwOnError"in t&&t.throwOnError&&c.push({key:"throwOnError",value:true});let f=[o.callExpression({functionName:i.name,parameters:c.length?[o.objectExpression({obj:c})]:void 0,types:[o.typeReferenceNode({typeName:a.name})]})],l=o.constVariable({exportConst:true,expression:o.callExpression({functionName:s.name,parameters:p?[o.callExpression({functionName:p.name,parameters:f})]:f}),name:"client"});r.add(l);};var wa=({context:e})=>{let t=e.file({id:Ne}),r=Y({config:e.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({asType:true,module:t.relativePathToFile({context:e,id:N}),name:"ClientOptions"}),s=t.import({asType:true,module:r,name:"Config"}),i=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),a=o.typeReferenceNode({typeName:i.name}),p=o.typeReferenceNode({typeName:"T"}),c=o.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:o.functionTypeNode({parameters:[o.parameterDeclaration({name:"override",required:false,type:o.typeReferenceNode({typeArguments:[o.typeIntersectionNode({types:[a,p]})],typeName:s.name})})],returnType:o.typeReferenceNode({typeArguments:[o.typeIntersectionNode({types:[o.typeReferenceNode({typeArguments:[a],typeName:"Required"}),p]})],typeName:s.name})}),typeParameters:[{default:o.typeReferenceNode({typeName:n.name}),extends:a,name:"T"}]});t.add(c);};var St=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:Ne,path:t.output}),wa({context:e}),va({context:e,plugin:t});};var Ss={...bt,_handler:St,_handlerLegacy:()=>{},name:"@hey-api/client-axios",throwOnError:false};var Rs={...bt,_handler:St,_handlerLegacy:()=>{},name:"@hey-api/client-fetch",throwOnError:false};var Is={...bt,_handler:St,_handlerLegacy:()=>{},name:"@hey-api/client-next",throwOnError:false};var Cs={...bt,_handler:St,_handlerLegacy:()=>{},name:"@hey-api/client-nuxt"};var Ts={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/angular",output:"client"};var Ps={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/axios",output:"client"};var js={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/fetch",output:"client"};var As={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/node",output:"client"};var Es={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/xhr",output:"client"};var kn="schemas",Ns=({plugin:e,schema:t})=>{e.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},mr=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>mr({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(Ns({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=mr({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>mr({context:e,plugin:t,schema:s}))),n.items&&(n.items=mr({context:e,plugin:t,schema:n.items})),n.properties)for(let s in n.properties){let i=n.properties[s];typeof i!="boolean"&&(n.properties[s]=mr({context:e,plugin:t,schema:i}));}return n},Rt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>Rt({context:e,plugin:t,schema:s}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(Ns({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=Rt({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>Rt({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>Rt({context:e,plugin:t,schema:s}))),n.items&&(n.items=Rt({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>Rt({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let i=n.properties[s];typeof i!="boolean"&&(n.properties[s]=Rt({context:e,plugin:t,schema:i}));}return n},ot=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>ot({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(Ns({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=ot({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>ot({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>ot({context:e,plugin:t,schema:s}))),n.items&&(n.items=ot({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>ot({context:e,plugin:t,schema:s}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(s=>ot({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let i=n.properties[s];typeof i!="boolean"&&(n.properties[s]=ot({context:e,plugin:t,schema:i}));}return n},ks=({name:e,plugin:t,schema:r})=>{let n="";return t.nameBuilder&&(typeof t.nameBuilder=="function"?n=t.nameBuilder(e,r):n=t.nameBuilder.replace("{{name}}",e)),n||(n=`${e}Schema`),Zr(n)},Cf=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],s=mr({context:e,plugin:t,schema:n}),i=o.constVariable({assertion:"const",exportConst:true,expression:o.objectExpression({obj:s}),name:ks({name:r,plugin:t,schema:n})});e.file({id:kn}).add(i);}},Tf=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=Rt({context:e,plugin:t,schema:n}),i=o.constVariable({assertion:"const",exportConst:true,expression:o.objectExpression({obj:s}),name:ks({name:r,plugin:t,schema:n})});e.file({id:kn}).add(i);}},Pf=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=ot({context:e,plugin:t,schema:n}),i=o.constVariable({assertion:"const",exportConst:true,expression:o.objectExpression({obj:s}),name:ks({name:r,plugin:t,schema:n})});e.file({id:kn}).add(i);}},$a=({context:e,plugin:t})=>{if(e.createFile({exportFromIndex:t.exportFromIndex,id:kn,path:t.output}),"swagger"in e.spec){Cf({context:e,plugin:t});return}switch(e.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":Tf({context:e,plugin:t});break;case "3.1.0":case "3.1.1":Pf({context:e,plugin:t});break;default:throw new Error("Unsupported OpenAPI specification")}};var vs=(e,t)=>{let r=R();if(Array.isArray(e))return e.map(s=>vs(s));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([s,i])=>{if(r.plugins["@hey-api/schemas"]?.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(s)&&t!=="properties"){delete n[s];return}s==="$ref"&&typeof i=="string"&&(n[s]=decodeURIComponent(i)),i&&typeof i=="object"&&(n[s]=vs(i,s));}),n},jf=(e,t)=>{let r=R(),n=Pe(e),s=r.plugins["@hey-api/schemas"];return s?.nameBuilder?typeof s.nameBuilder=="function"?s.nameBuilder(n,t):s.nameBuilder.replace("{{name}}",n):`${n}Schema`},qa=({files:e,openApi:t,plugin:r})=>{let n=R();e.schemas=new qe({dir:n.output.path,exportFromIndex:r.exportFromIndex,id:"schemas",name:"schemas.ts"});let s=(i,a)=>{let p=vs(a),c=o.objectExpression({obj:p}),m=o.constVariable({assertion:"const",exportConst:true,expression:c,name:jf(i,a)});e.schemas.add(m);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([i,a])=>{s(i,a);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([i,a])=>{s(i,a);});};var ws={_handler:$a,_handlerLegacy:qa,exportFromIndex:false,name:"@hey-api/schemas",nameBuilder:e=>`${e}Schema`,output:"schemas",type:"json"};var at=({operation:e})=>{let t=[];return e.summary&&t.push(D(e.summary)),e.description&&t.push(D(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},Ft=({context:e,operation:t})=>{let n=E(e.config).name==="@hey-api/client-nuxt",s=e.config.plugins["@hey-api/sdk"];return s&&!s.client&&!s.instance||n||rn(t)};var fr="TComposable",ze="DefaultT",$s="ResT",ce="sdk";var Af=({dataExpression:e})=>{let t=e!==void 0?o.callExpression({functionName:"BigInt",parameters:[o.callExpression({functionName:o.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(t){if(typeof e=="string")return [t];if(e)return [o.assignment({left:e,right:t})]}return []},Ef=({dataExpression:e})=>{let t=o.identifier({text:"Date"});return typeof e=="string"?[o.newExpression({argumentsArray:[o.identifier({text:e})],expression:t})]:e?[o.assignment({left:e,right:o.newExpression({argumentsArray:[e],expression:t})})]:[]},vn=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `${Jt}${j({case:"camelCase",value:e})}${r}`},Nf=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let n=e.split("/");return `${n.slice(0,n.length-1).join("/")}/${j({case:"camelCase",value:n[n.length-1]})}${r}`},Ma=({$ref:e})=>Nf({$ref:e,type:"response"}),Ar="transformers",wn="data",Pr=e=>e.map(t=>g.isStatement(t)?t:o.expressionToStatement({expression:t})),La=({node:e})=>e.kind===g.SyntaxKind.ReturnStatement,Da=({context:e,plugin:t,schema:r})=>{let n=o.identifier({text:wn}),s=jr({context:e,dataExpression:n,plugin:t,schema:r});return s.length&&!La({node:s[s.length-1]})&&s.push(o.returnStatement({expression:n})),s},jr=({context:e,dataExpression:t,plugin:r,schema:n})=>{let s=e.file({id:Ar});if(n.$ref){let i=s.identifier({$ref:Ma({$ref:n.$ref}),create:true,namespace:"value"});if(i.created&&i.name){let a=e.resolveIrRef(n.$ref),p=Da({context:e,plugin:r,schema:a});if(p.length){let c=o.constVariable({expression:o.arrowFunction({async:false,multiLine:true,parameters:[{name:wn,type:o.keywordTypeNode({keyword:"any"})}],statements:Pr(p)}),name:i.name});s.add(c);}else i=s.blockIdentifier({$ref:Ma({$ref:n.$ref}),namespace:"value"});}if(i.name){let a=o.callExpression({functionName:i.name,parameters:[t]});if(t)return typeof t=="string"&&t==="item"?[o.returnStatement({expression:a})]:[typeof t=="string"?a:o.assignment({left:t,right:a})]}return []}if(n.type==="array"){if(!t||typeof t=="string")return [];let i=n.items?jr({context:e,dataExpression:"item",plugin:r,schema:n.items?.[0]?n.items[0]:{...n,type:void 0}}):[];if(!i.length)return [];let a=Pr(i);return a.some(c=>La({node:c}))||a.push(o.returnStatement({expression:o.identifier({text:"item"})})),[o.assignment({left:t,right:o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:"map"}),parameters:[o.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:a})]})})]}if(n.type==="object"){let i=[],a=n.required??[];for(let p in n.properties){let c=n.properties[p],m=o.propertyAccessExpression({expression:t||wn,name:p}),f=jr({context:e,dataExpression:m,plugin:r,schema:c});if(!f.length)continue;let l=!c.items?.find(d=>d.type==="null");a.includes(p)&&l?i=i.concat(f):i.push(o.ifStatement({expression:m,thenStatement:o.block({statements:Pr(f)})}));}return i}if(r.dates&&n.type==="string"&&(n.format==="date"||n.format==="date-time"))return Ef({dataExpression:t});if(r.bigInt&&n.type==="integer"&&n.format==="int64")return Af({dataExpression:t});if(n.items){if(n.items.length===1)return jr({context:e,dataExpression:"item",plugin:r,schema:n.items[0]});let i=[];if(n.logicalOperator==="and"||n.items.length===2&&n.items.find(a=>a.type==="null"||a.type==="void")){for(let a of n.items){let p=jr({context:e,dataExpression:t||"item",plugin:r,schema:a});if(p.length)if(t)i=i.concat(p);else {let c=o.identifier({text:"item"});i.push(o.ifStatement({expression:c,thenStatement:o.block({statements:Pr(p)})}),o.returnStatement({expression:c}));}}return i}n.type!=="enum"&&((n.items??[]).every(a=>["boolean","integer","null","number","string"].includes(a.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(n)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}return []},_a=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:Ar,path:t.output});e.subscribe("operation",({operation:n})=>{let{response:s}=Me(n);if(!s)return;if(s.items&&s.items.length>1){e.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(n)} has ${s.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let i=e.file({id:N}).identifier({$ref:$({config:e.config,id:n.id,type:"response"}),namespace:"type"});if(!i.name)return;let a=r.identifier({$ref:vn({id:n.id,type:"response"}),create:true,namespace:"value"});if(!a.name)return;let p=Da({context:e,plugin:t,schema:s});if(p.length){r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:i.name});let c=o.constVariable({exportConst:true,expression:o.arrowFunction({async:true,multiLine:true,parameters:[{name:wn,type:o.keywordTypeNode({keyword:"any"})}],returnType:o.typeReferenceNode({typeArguments:[o.typeReferenceNode({typeName:i.name})],typeName:"Promise"}),statements:Pr(p)}),name:a.name});r.add(c);}else a=r.blockIdentifier({$ref:vn({id:n.id,type:"response"}),namespace:"value"});});};var kf=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Ba=({operation:e,plugin:t})=>{if(!e.security||!t.auth)return [];let r=[];for(let n of e.security){let s=kf({securitySchemeObject:n});s?r.push(s):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r};var h={actions:{args:o.identifier({text:"args"}),base64:o.identifier({text:"base64"}),bic:o.identifier({text:"bic"}),brand:o.identifier({text:"brand"}),bytes:o.identifier({text:"bytes"}),check:o.identifier({text:"check"}),checkItems:o.identifier({text:"checkItems"}),creditCard:o.identifier({text:"creditCard"}),cuid2:o.identifier({text:"cuid2"}),decimal:o.identifier({text:"decimal"}),description:o.identifier({text:"description"}),digits:o.identifier({text:"digits"}),email:o.identifier({text:"email"}),emoji:o.identifier({text:"emoji"}),empty:o.identifier({text:"empty"}),endsWith:o.identifier({text:"endsWith"}),entries:o.identifier({text:"entries"}),everyItem:o.identifier({text:"everyItem"}),excludes:o.identifier({text:"excludes"}),filterItems:o.identifier({text:"filterItems"}),findItem:o.identifier({text:"findItem"}),finite:o.identifier({text:"finite"}),flavor:o.identifier({text:"flavor"}),graphemes:o.identifier({text:"graphemes"}),gtValue:o.identifier({text:"gtValue"}),hash:o.identifier({text:"hash"}),hexColor:o.identifier({text:"hexColor"}),hexadecimal:o.identifier({text:"hexadecimal"}),imei:o.identifier({text:"imei"}),includes:o.identifier({text:"includes"}),integer:o.identifier({text:"integer"}),ip:o.identifier({text:"ip"}),ipv4:o.identifier({text:"ipv4"}),ipv6:o.identifier({text:"ipv6"}),isoDate:o.identifier({text:"isoDate"}),isoDateTime:o.identifier({text:"isoDateTime"}),isoTime:o.identifier({text:"isoTime"}),isoTimeSecond:o.identifier({text:"isoTimeSecond"}),isoTimestamp:o.identifier({text:"isoTimestamp"}),isoWeek:o.identifier({text:"isoWeek"}),length:o.identifier({text:"length"}),ltValue:o.identifier({text:"ltValue"}),mac:o.identifier({text:"mac"}),mac48:o.identifier({text:"mac48"}),mac64:o.identifier({text:"mac64"}),mapItems:o.identifier({text:"mapItems"}),maxBytes:o.identifier({text:"maxBytes"}),maxEntries:o.identifier({text:"maxEntries"}),maxGraphemes:o.identifier({text:"maxGraphemes"}),maxLength:o.identifier({text:"maxLength"}),maxSize:o.identifier({text:"maxSize"}),maxValue:o.identifier({text:"maxValue"}),maxWords:o.identifier({text:"maxWords"}),metadata:o.identifier({text:"metadata"}),mimeType:o.identifier({text:"mimeType"}),minBytes:o.identifier({text:"minBytes"}),minEntries:o.identifier({text:"minEntries"}),minGraphemes:o.identifier({text:"minGraphemes"}),minLength:o.identifier({text:"minLength"}),minSize:o.identifier({text:"minSize"}),minValue:o.identifier({text:"minValue"}),minWords:o.identifier({text:"minWords"}),multipleOf:o.identifier({text:"multipleOf"}),nanoid:o.identifier({text:"nanoid"}),nonEmpty:o.identifier({text:"nonEmpty"}),normalize:o.identifier({text:"normalize"}),notBytes:o.identifier({text:"notBytes"}),notEntries:o.identifier({text:"notEntries"}),notGraphemes:o.identifier({text:"notGraphemes"}),notLength:o.identifier({text:"notLength"}),notSize:o.identifier({text:"notSize"}),notValue:o.identifier({text:"notValue"}),notValues:o.identifier({text:"notValues"}),notWords:o.identifier({text:"notWords"}),octal:o.identifier({text:"octal"}),parseJson:o.identifier({text:"parseJson"}),partialCheck:o.identifier({text:"partialCheck"}),rawCheck:o.identifier({text:"rawCheck"}),rawTransform:o.identifier({text:"rawTransform"}),readonly:o.identifier({text:"readonly"}),reduceItems:o.identifier({text:"reduceItems"}),regex:o.identifier({text:"regex"}),returns:o.identifier({text:"returns"}),rfcEmail:o.identifier({text:"rfcEmail"}),safeInteger:o.identifier({text:"safeInteger"}),size:o.identifier({text:"size"}),slug:o.identifier({text:"slug"}),someItem:o.identifier({text:"someItem"}),sortItems:o.identifier({text:"sortItems"}),startsWith:o.identifier({text:"startsWith"}),stringifyJson:o.identifier({text:"stringifyJson"}),title:o.identifier({text:"title"}),toLowerCase:o.identifier({text:"toLowerCase"}),toMaxValue:o.identifier({text:"toMaxValue"}),toMinValue:o.identifier({text:"toMinValue"}),toUpperCase:o.identifier({text:"toUpperCase"}),transform:o.identifier({text:"transform"}),trim:o.identifier({text:"trim"}),trimEnd:o.identifier({text:"trimEnd"}),trimStart:o.identifier({text:"trimStart"}),ulid:o.identifier({text:"ulid"}),url:o.identifier({text:"url"}),uuid:o.identifier({text:"uuid"}),value:o.identifier({text:"value"}),values:o.identifier({text:"values"}),words:o.identifier({text:"words"})},methods:{assert:o.identifier({text:"assert"}),config:o.identifier({text:"config"}),fallback:o.identifier({text:"fallback"}),flatten:o.identifier({text:"flatten"}),forward:o.identifier({text:"forward"}),getDefault:o.identifier({text:"getDefault"}),getDefaults:o.identifier({text:"getDefaults"}),getDescription:o.identifier({text:"getDescription"}),getFallback:o.identifier({text:"getFallback"}),getFallbacks:o.identifier({text:"getFallbacks"}),getMetadata:o.identifier({text:"getMetadata"}),getTitle:o.identifier({text:"getTitle"}),is:o.identifier({text:"is"}),keyof:o.identifier({text:"keyof"}),message:o.identifier({text:"message"}),omit:o.identifier({text:"omit"}),parse:o.identifier({text:"parse"}),parser:o.identifier({text:"parser"}),partial:o.identifier({text:"partial"}),pick:o.identifier({text:"pick"}),pipe:o.identifier({text:"pipe"}),required:o.identifier({text:"required"}),safeParse:o.identifier({text:"safeParse"}),safeParser:o.identifier({text:"safeParser"}),summarize:o.identifier({text:"summarize"}),unwrap:o.identifier({text:"unwrap"})},schemas:{any:o.identifier({text:"any"}),array:o.identifier({text:"array"}),bigInt:o.identifier({text:"bigint"}),blob:o.identifier({text:"blob"}),boolean:o.identifier({text:"boolean"}),custom:o.identifier({text:"custom"}),date:o.identifier({text:"date"}),enum:o.identifier({text:"enum"}),exactOptional:o.identifier({text:"exactOptional"}),file:o.identifier({text:"file"}),function:o.identifier({text:"function"}),instance:o.identifier({text:"instance"}),intersect:o.identifier({text:"intersect"}),lazy:o.identifier({text:"lazy"}),literal:o.identifier({text:"literal"}),looseObject:o.identifier({text:"looseObject"}),looseTuple:o.identifier({text:"looseTuple"}),map:o.identifier({text:"map"}),nan:o.identifier({text:"nan"}),never:o.identifier({text:"never"}),nonNullable:o.identifier({text:"nonNullable"}),nonNullish:o.identifier({text:"nonNullish"}),nonOptional:o.identifier({text:"nonOptional"}),null:o.identifier({text:"null"}),nullable:o.identifier({text:"nullable"}),nullish:o.identifier({text:"nullish"}),number:o.identifier({text:"number"}),object:o.identifier({text:"object"}),objectWithRest:o.identifier({text:"objectWithRest"}),optional:o.identifier({text:"optional"}),picklist:o.identifier({text:"picklist"}),promise:o.identifier({text:"promise"}),record:o.identifier({text:"record"}),set:o.identifier({text:"set"}),strictObject:o.identifier({text:"strictObject"}),strictTuple:o.identifier({text:"strictTuple"}),string:o.identifier({text:"string"}),symbol:o.identifier({text:"symbol"}),tuple:o.identifier({text:"tuple"}),tupleWithRest:o.identifier({text:"tupleWithRest"}),undefined:o.identifier({text:"undefined"}),undefinedable:o.identifier({text:"undefinedable"}),union:o.identifier({text:"union"}),unknown:o.identifier({text:"unknown"}),variant:o.identifier({text:"variant"}),void:o.identifier({text:"void"})},types:{GenericSchema:o.identifier({text:"GenericSchema"})},v:o.identifier({text:"v"})},lr="valibot";var Ae=({schema:e})=>{let t=[];return e.title&&t.push(D(e.title)),e.description&&t.push(D(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var Nr="zod",vf=o.identifier({text:"and"}),Ka=o.identifier({text:"array"}),wf=o.identifier({text:"coerce"}),$f=o.identifier({text:"default"}),qf=o.identifier({text:"describe"}),Mf=o.identifier({text:"intersection"}),Ff=o.identifier({text:"lazy"}),Wa=o.identifier({text:"length"}),$n=o.identifier({text:"literal"}),Ua=o.identifier({text:"max"}),za=o.identifier({text:"min"}),Lf=o.identifier({text:"object"}),Df=o.identifier({text:"optional"}),_f=o.identifier({text:"readonly"}),Bf=o.identifier({text:"regex"}),Qa=o.identifier({text:"union"}),M=o.identifier({text:"z"}),Ms=e=>`z-${e}`,Kf=({context:e,plugin:t,result:r,schema:n})=>{let s=o.propertyAccessExpression({expression:M,name:Ka}),i;if(!n.items)i=o.callExpression({functionName:s,parameters:[Fs({schema:{}})]});else {n=ue({schema:n});let a=n.items.map(p=>Re({context:e,plugin:t,result:r,schema:p}));a.length===1?i=o.callExpression({functionName:s,parameters:a}):(n.logicalOperator,i=o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:Ka}),parameters:[o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:Qa}),parameters:[o.arrayLiteralExpression({elements:a})]})]}));}return n.minItems===n.maxItems&&n.minItems!==void 0?i=o.callExpression({functionName:o.propertyAccessExpression({expression:i,name:Wa}),parameters:[o.valueToExpression({value:n.minItems})]}):(n.minItems!==void 0&&(i=o.callExpression({functionName:o.propertyAccessExpression({expression:i,name:za}),parameters:[o.valueToExpression({value:n.minItems})]})),n.maxItems!==void 0&&(i=o.callExpression({functionName:o.propertyAccessExpression({expression:i,name:Ua}),parameters:[o.valueToExpression({value:n.maxItems})]}))),i},Vf=({schema:e})=>typeof e.const=="boolean"?o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:$n}),parameters:[o.ots.boolean(e.const)]}):o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"boolean"})})}),Wf=({context:e,schema:t})=>{let r=[],n=false;for(let i of t.items??[])i.type==="string"&&typeof i.const=="string"?r.push(o.stringLiteral({text:i.const})):(i.type==="null"||i.const===null)&&(n=true);if(!r.length)return Fs({schema:{}});let s=o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"enum"})}),parameters:[o.arrayLiteralExpression({elements:r,multiLine:false})]});return n&&(s=o.callExpression({functionName:o.propertyAccessExpression({expression:s,name:o.identifier({text:"nullable"})})})),s},Uf=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"never"})})}),zf=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"null"})})}),Er=({isBigInt:e,value:t})=>{let r=o.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?o.callExpression({functionName:"BigInt",parameters:[r]}):r},Qf=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:$n}),parameters:[o.ots.number(e.const)]});let r=o.callExpression({functionName:t?o.propertyAccessExpression({expression:o.propertyAccessExpression({expression:M,name:wf}),name:o.identifier({text:"bigint"})}):o.propertyAccessExpression({expression:M,name:o.identifier({text:"number"})})});return !t&&e.type==="integer"&&(r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"int"})})})),e.exclusiveMinimum!==void 0?r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"gt"})}),parameters:[Er({isBigInt:t,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"gte"})}),parameters:[Er({isBigInt:t,value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"lt"})}),parameters:[Er({isBigInt:t,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"lte"})}),parameters:[Er({isBigInt:t,value:e.maximum})]})),r},Xf=({context:e,plugin:t,result:r,schema:n})=>{let s=[],i=n.required??[];for(let p in n.properties){let c=n.properties[p],m=i.includes(p),f=Re({context:e,optional:!m,plugin:t,result:r,schema:c});de.lastIndex=0;let l;de.test(p)?l=p.startsWith("-")?g.factory.createStringLiteral(p):g.factory.createNumericLiteral(p):l=p,(p.match(/^[0-9]/)&&p.match(/\D+/g)||p.match(/\W/g))&&!p.startsWith("'")&&!p.endsWith("'")&&(l=`'${p}'`),s.push(o.propertyAssignment({initializer:f,name:l}));}return {anyType:"AnyZodObject",expression:o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:Lf}),parameters:[g.factory.createObjectLiteralExpression(s,true)]})}},Hf=({schema:e})=>{if(typeof e.const=="string")return o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:$n}),parameters:[o.ots.string(e.const)]});let t=o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"string"})})});if(e.format)switch(e.format){case "date-time":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:"datetime"})})});break;case "ipv4":case "ipv6":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:"ip"})})});break;case "uri":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:"url"})})});break;case "date":case "email":case "time":case "uuid":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:e.format})})});break}return e.minLength===e.maxLength&&e.minLength!==void 0?t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:Wa}),parameters:[o.valueToExpression({value:e.minLength})]}):(e.minLength!==void 0&&(t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:za}),parameters:[o.valueToExpression({value:e.minLength})]})),e.maxLength!==void 0&&(t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:Ua}),parameters:[o.valueToExpression({value:e.maxLength})]}))),e.pattern&&(t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:Bf}),parameters:[o.regularExpressionLiteral({text:e.pattern})]})),t},Gf=({context:e,plugin:t,result:r,schema:n})=>{if(n.const&&Array.isArray(n.const)){let a=n.const.map(c=>o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:$n}),parameters:[o.valueToExpression({value:c})]}));return o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"tuple"})}),parameters:[o.arrayLiteralExpression({elements:a})]})}let s=[];for(let a of n.items??[])s.push(Re({context:e,plugin:t,result:r,schema:a}));return o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"tuple"})}),parameters:[o.arrayLiteralExpression({elements:s})]})},Jf=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"undefined"})})}),Fs=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"unknown"})})}),Zf=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:o.identifier({text:"void"})})}),Va=({context:e,plugin:t,result:r,schema:n})=>{switch(n.type){case "array":return {expression:Kf({context:e,plugin:t,result:r,schema:n})};case "boolean":return {expression:Vf({schema:n})};case "enum":return {expression:Wf({context:e,schema:n})};case "integer":case "number":return {expression:Qf({schema:n})};case "never":return {expression:Uf({schema:n})};case "null":return {expression:zf({schema:n})};case "object":return Xf({context:e,plugin:t,result:r,schema:n});case "string":return {expression:Hf({schema:n})};case "tuple":return {expression:Gf({context:e,plugin:t,result:r,schema:n})};case "undefined":return {expression:Jf({schema:n})};case "unknown":return {expression:Fs({schema:n})};case "void":return {expression:Zf({schema:n})}}},Yf=({context:e,operation:t,plugin:r,result:n})=>{if(t.body&&Re({$ref:$({case:"camelCase",config:e.config,id:t.id,type:"data"}),context:e,plugin:r,result:n,schema:t.body.schema}),t.parameters)for(let s in t.parameters){let i=t.parameters[s];for(let a in i){let p=i[a];Re({$ref:$({case:"camelCase",config:e.config,id:t.id,parameterId:p.name,type:"parameter"}),context:e,plugin:r,result:n,schema:p.schema});}}if(t.responses){let{response:s}=Me(t);s&&Re({$ref:$({case:"camelCase",config:e.config,id:t.id,type:"response"}),context:e,plugin:r,result:n,schema:s});}},Re=({$ref:e,context:t,optional:r,plugin:n,result:s,schema:i})=>{let a=t.file({id:Nr}),p,c,m;if(e&&(s.circularReferenceTracker.add(e),m=a.identifier({$ref:e,create:true,nameTransformer:Ms,namespace:"value"})),i.$ref){let f=s.circularReferenceTracker.has(i.$ref),l=a.identifier({$ref:i.$ref,nameTransformer:Ms,namespace:"value"});if(!l.name){let u=t.resolveIrRef(i.$ref);c=Re({$ref:i.$ref,context:t,plugin:n,result:s,schema:u}),l=a.identifier({$ref:i.$ref,nameTransformer:Ms,namespace:"value"});}if(l.name){let u=o.identifier({text:l.name});f?(c=o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:Ff}),parameters:[o.arrowFunction({statements:[o.returnStatement({expression:u})]})]}),s.hasCircularReference=true):c=u;}}else if(i.type){let f=Va({context:t,plugin:n,result:s,schema:i});p=f.anyType,c=f.expression,n.metadata&&i.description&&(c=o.callExpression({functionName:o.propertyAccessExpression({expression:c,name:qf}),parameters:[o.stringLiteral({text:i.description})]}));}else if(i.items)if(i=ue({schema:i}),i.items){let f=i.items.map(l=>Re({context:t,plugin:n,result:s,schema:l}));if(i.logicalOperator==="and"){let l=i.items[0];l.logicalOperator==="or"||l.type&&l.type!=="object"?c=o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:Mf}),parameters:f}):(c=f[0],f.slice(1).forEach(u=>{c=o.callExpression({functionName:o.propertyAccessExpression({expression:c,name:vf}),parameters:[u]});}));}else c=o.callExpression({functionName:o.propertyAccessExpression({expression:M,name:Qa}),parameters:[o.arrayLiteralExpression({elements:f})]});}else c=Re({context:t,plugin:n,result:s,schema:i});else {let f=Va({context:t,plugin:n,result:s,schema:{type:"unknown"}});p=f.anyType,c=f.expression;}if(e&&s.circularReferenceTracker.delete(e),c&&(i.accessScope==="read"&&(c=o.callExpression({functionName:o.propertyAccessExpression({expression:c,name:_f})})),r&&(c=o.callExpression({functionName:o.propertyAccessExpression({expression:c,name:Df})})),i.default!==void 0)){let f=i.type==="integer"&&i.format==="int64",l=Er({isBigInt:f,value:i.default});l&&(c=o.callExpression({functionName:o.propertyAccessExpression({expression:c,name:$f}),parameters:[l]}));}if(m&&m.name&&m.created){let f=o.constVariable({comment:n.comments?Ae({schema:i}):void 0,exportConst:true,expression:c,name:m.name,typeName:s.hasCircularReference?o.propertyAccessExpression({expression:M,name:p||"ZodTypeAny"}):void 0});a.add(f);}return c},Xa=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:Nr,identifierCase:"camelCase",path:t.output}).import({module:"zod",name:"z"}),e.subscribe("operation",({operation:n})=>{Yf({context:e,operation:n,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false}});}),e.subscribe("parameter",({$ref:n,parameter:s})=>{Re({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s.schema});}),e.subscribe("requestBody",({$ref:n,requestBody:s})=>{Re({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s.schema});}),e.subscribe("schema",({$ref:n,schema:s})=>{Re({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s});});};var ur={data:o.identifier({text:"data"}),parseAsync:o.identifier({text:"parseAsync"}),v:o.identifier({text:"v"})},el=({context:e,operation:t})=>{let r=e.file({id:ce}),n=e.file({id:lr}).identifier({$ref:$({case:"camelCase",config:e.config,id:t.id,type:"response"}),namespace:"value"});if(n.name)return r.import({module:r.relativePathToFile({context:e,id:lr}),name:n.name}),r.import({alias:ur.v.text,module:"valibot",name:"*"}),o.arrowFunction({async:true,parameters:[{name:"data"}],statements:[o.returnStatement({expression:o.awaitExpression({expression:o.callExpression({functionName:o.propertyAccessExpression({expression:ur.v,name:ur.parseAsync}),parameters:[o.identifier({text:n.name}),ur.data]})})})]})},tl=({context:e,operation:t})=>{let r=e.file({id:ce}),n=e.file({id:Nr}).identifier({$ref:$({case:"camelCase",config:e.config,id:t.id,type:"response"}),namespace:"value"});if(n.name)return r.import({module:r.relativePathToFile({context:e,id:Nr}),name:n.name}),o.arrowFunction({async:true,parameters:[{name:"data"}],statements:[o.returnStatement({expression:o.awaitExpression({expression:o.callExpression({functionName:o.propertyAccessExpression({expression:o.identifier({text:n.name}),name:ur.parseAsync}),parameters:[ur.data]})})})]})},Ha=({context:e,operation:t,plugin:r})=>{switch(r.validator){case "valibot":return el({context:e,operation:t});case "zod":return tl({context:e,operation:t});default:return}};var Ga=({context:e,value:t})=>{let r=j({case:"PascalCase",value:Ze(t)});return or({config:e.config,name:r})},rl=({operation:e,plugin:t})=>t.methodNameBuilder?t.methodNameBuilder(e):!t.asClass&&e.id.match(ae)?`${e.id}_`:e.id,qn=({context:e,operation:t,plugin:r})=>{let n=new Map,s,i,a=[];if(r.classStructure==="auto"&&t.operationId&&(a=t.operationId.split(/[./]/).filter(Boolean),a.length>1)){let c=a.pop();i=j({case:"camelCase",value:Ze(c)}),s=a.pop();}let p=r.instance?[r.instance]:t.tags??["default"];for(let c of p){let m=Ga({context:e,value:s||c});n.set(c,{className:m,methodName:i||rl({operation:t,plugin:r}),path:(s?[c,...a,s]:[c]).map(f=>Ga({context:e,value:f}))});}return n},kr=({context:e,file:t,operation:r,throwOnError:n})=>{let i=E(e.config).name==="@hey-api/client-nuxt",a=je({context:e,file:t,operation:r,type:"data"}),p=je({context:e,file:t,operation:r,type:i?"response":"responses"}),c=W.Options.name;return i?`${c}<${fr}, ${a.name||"unknown"}, ${p.name||"unknown"}, ${ze}>`:n?`${c}<${a.name||"unknown"}, ${n}>`:a.name?`${c}<${a.name}>`:c},nl=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},Ls=({context:e,isRequiredOptions:t,operation:r,plugin:n})=>{let s=e.file({id:ce}),i=s.nameWithoutExtension(),a=E(e.config),p=a.name==="@hey-api/client-nuxt",c=je({context:e,file:s,operation:r,type:p?"error":"errors"}),m=je({context:e,file:s,operation:r,type:p?"response":"responses"}),f=[];if(r.body)switch(r.body.type){case "form-data":f.push({spread:"formDataBodySerializer"}),s.import({module:Y({config:e.config,sourceOutput:i}),name:"formDataBodySerializer"});break;case "json":break;case "text":case "octet-stream":f.push({key:"bodySerializer",value:null});break;case "url-search-params":f.push({spread:"urlSearchParamsBodySerializer"}),s.import({module:Y({config:e.config,sourceOutput:i}),name:"urlSearchParamsBodySerializer"});break}if(a.name==="@hey-api/client-axios"){for(let P in r.responses)if(cs({statusCode:P})==="2XX"){let L=r.responses[P],Q=nl(L?.mediaType);if(Q){f.push({key:"responseType",value:Q});break}}}let l=Ba({operation:r,plugin:n});l.length&&f.push({key:"security",value:o.arrayLiteralExpression({elements:l})});for(let P in r.parameters?.query){let L=r.parameters.query[P];if((L.schema.type==="array"||L.schema.type==="tuple")&&(L.style!=="form"||!L.explode)){f.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}if(n.transformer==="@hey-api/transformers"){let P=e.file({id:Ar}).identifier({$ref:vn({id:r.id,type:"response"}),namespace:"value"});P.name&&(s.import({module:s.relativePathToFile({context:e,id:Ar}),name:P.name}),f.push({key:"responseTransformer",value:P.name}));}let u=Ha({context:e,operation:r,plugin:n});if(u&&f.push({key:"responseValidator",value:u}),n.responseStyle==="data"&&f.push({key:"responseStyle",value:n.responseStyle}),f.push({key:"url",value:r.path}),f.push({spread:"options"}),r.body){let P=r.parameters?.header?.["content-type"];if(!!!P?.required){let Q=o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:!t,name:"headers"});f.push({key:"headers",value:[{key:P?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:Q}]});}}let d=m.name||"unknown",y=c.name||"unknown",x=n.client?s.import({alias:"_heyApiClient",module:s.relativePathToFile({context:e,id:Ne}),name:"client"}):void 0,O=o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:!t,name:"client"}),b;n.instance?b=o.binaryExpression({left:O,operator:"??",right:o.propertyAccessExpression({expression:o.this(),name:"_client"})}):x?.name?b=o.binaryExpression({left:O,operator:"??",right:o.identifier({text:x.name})}):b=O;let A=[];return p?A.push(fr,`${d} | ${ze}`,y,ze):A.push(d,y,"ThrowOnError"),n.responseStyle==="data"&&A.push(o.stringLiteral({text:n.responseStyle})),[o.returnFunctionCall({args:[o.objectExpression({identifiers:["responseTransformer"],obj:f})],name:o.propertyAccessExpression({expression:b,name:o.identifier({text:r.method})}),types:A})]};var Lt=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:s}=Se({meta:e,...r});return s&&t(s),{created:n,name:s}},tp=e=>`${e}ModelResponseTransformer`,Dt=e=>`${j({case:"PascalCase",value:e})}Data`,dr=e=>`${j({case:"PascalCase",value:e})}Error`,Ds=e=>`${e}Transformer`,Qe=e=>`${j({case:"PascalCase",value:e})}Response`,_s=({importedType:e,throwOnError:t})=>{let r=W.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},Ja=(e,t)=>{let r=R(),{name:n}=Se({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Dt}),s=Ue(t.parameters);if(!K(r))return [{isRequired:s,name:"options",type:_s({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let i=a=>{if(a.default!==void 0)return JSON.stringify(a.default,null,4)};return r.useOptions?[{default:s?void 0:{},name:"data",type:n}]:t.parameters.map(a=>{let p=`${n}['${a.name}']`;return {default:a?.default,isRequired:(!a.isRequired&&!i(a)?"?":"")=="",name:a.name,type:p}})},Za=(e,t)=>{let r=R(),n=o.typeNode("void");if(t.responses.filter(a=>a.responseTypes.includes("success")).length){let{name:a}=Se({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Qe});n=o.typeUnionNode({types:[a]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.response==="response"&&(n=o.typeNode("ApiResult",[n])),E(r).name==="legacy/angular"?n=o.typeNode("Observable",[n]):n=o.typeNode("CancelablePromise",[n]),n},Ya=e=>{let t=R();if(!K(t))return [e.deprecated&&"@deprecated",e.summary&&D(e.summary),e.description&&D(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(i=>`@param data.${i.name} ${i.description?D(i.description):""}`)]:r=e.parameters.map(i=>`@param ${i.name} ${i.description?D(i.description):""}`));let n=e.responses.filter(i=>i.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&D(e.summary),e.description&&D(e.description),...r,...n.map(i=>`@returns ${i.type} ${i.description?D(i.description):""}`),"@throws ApiError"]},sl=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=R(),i=Qe(n.name),{name:a}=Se({client:e,meta:{$ref:`transformers/${i}`,name:i},nameTransformer:Ds});if(a&&r(a),!K(s)){let f=[{spread:"options"}],u=n.parameters.filter(d=>d.in==="body"||d.in==="formData").map(d=>d.mediaType||(d.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(Ve);return u.length===1&&(u[0]==="multipart/form-data"&&(f=[...f,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),u[0]==="application/x-www-form-urlencoded"&&(f=[...f,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:u[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),f=[...f,{key:"url",value:n.path}],a&&(f=[...f,{key:"responseTransformer",value:a}]),o.objectExpression({identifiers:["responseTransformer"],obj:f})}let p=f=>f.reduce((l,u)=>{let d=u.prop,y=s.useOptions?`data.${u.name}`:u.name;return d===y?l[d]=d:ye(d)===d?l[d]=y:l[`'${d}'`]=y,l},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=p(n.parametersPath)),n.parametersCookie.length&&(c.cookies=p(n.parametersCookie)),n.parametersHeader.length&&(c.headers=p(n.parametersHeader)),n.parametersQuery.length&&(c.query=p(n.parametersQuery)),n.parametersForm.length&&(c.formData=p(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(s.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(s.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),a&&(c.responseTransformer=a);let m=n.responses.filter(f=>f.responseTypes.includes("error"));if(m.length>0){let f={};m.forEach(l=>{f[l.code]=l.description??"";}),c.errors=f;}return o.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},U=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.methodNameBuilder?e.plugins["@hey-api/sdk"].methodNameBuilder(n):t&&r.match(ae)?`${r}_`:r,ep=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=R(),i=sl({client:e,onClientImport:t,onImport:r,operation:n});if(!K(s)){let p=Se({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:dr}).name,m=n.responses.filter(f=>f.responseTypes.includes("success")).length?Se({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Qe}).name:"void";return [o.returnFunctionCall({args:[i],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:p&&m?[m,p,"ThrowOnError"]:p?["unknown",p,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return Tt(s)?[o.returnFunctionCall({args:[i],name:"this.httpRequest.request"})]:E(s).name==="legacy/angular"?[o.returnFunctionCall({args:["OpenAPI","this.http",i],name:"__request"})]:[o.returnFunctionCall({args:["OpenAPI",i],name:"__request"})]},il=({client:e,onClientImport:t,onImport:r,onNode:n,service:s})=>{let i=R(),a=E(i),p=K(i);for(let u of s.operations)u.parameters.length&&Lt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Dt,onImport:r}),p||Lt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:dr,onImport:r}),u.responses.filter(y=>y.responseTypes.includes("success")).length&&Lt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Qe,onImport:r});let c={default:("throwOnError"in a?a.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!i.plugins["@hey-api/sdk"]?.asClass&&!Tt(i)){for(let u of s.operations){let d={parameters:Ja(e,u),returnType:p?Za(e,u):void 0,statements:ep({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]},y=a.name==="legacy/angular"?o.anonymousFunction(d):o.arrowFunction(d),x=o.constVariable({comment:Ya(u),exportConst:true,expression:y,name:U({config:i,handleIllegal:true,id:u.name,operation:u})});n(x);}return}let m=s.operations.map(u=>o.methodDeclaration({accessLevel:"public",comment:Ya(u),isStatic:Tt(i)===void 0&&a.name!=="legacy/angular",name:U({config:i,id:u.name,operation:u}),parameters:Ja(e,u),returnType:p?Za(e,u):void 0,statements:ep({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]}));if(!m.length)return;Tt(i)?m=[o.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:a.name==="legacy/angular"&&(m=[o.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let f=[];m.forEach((u,d)=>{d&&f.push(o.identifier({text:`
`})),f.push(u);});let l=o.classDeclaration({decorator:a.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:or({config:i,name:s.name}),nodes:f});n(l);},rp=({client:e,files:t,plugin:r})=>{let n=R(),s=K(n),i="sdk";if(t.sdk=new qe({dir:n.output.path,exportFromIndex:r.exportFromIndex,id:"sdk",name:`${i}.ts`}),!s)t.sdk.import({module:Y({config:n,sourceOutput:i}),name:"createClient"}),t.sdk.import({module:Y({config:n,sourceOutput:i}),name:"createConfig"}),t.sdk.import({...W.OptionsLegacyParser,module:Y({config:n,sourceOutput:i})});else if(E(n).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),Tt(n)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),n.plugins["@hey-api/sdk"]?.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),Tt(n)){let p=E(n);t.sdk.import({asType:p.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!s){let a=E(n),p=o.constVariable({exportConst:true,expression:o.callExpression({functionName:"createClient",parameters:[o.callExpression({functionName:"createConfig",parameters:["throwOnError"in a&&a.throwOnError?o.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(p);}for(let a of e.services)il({client:e,onClientImport:p=>{t.sdk.import({module:Y({config:n,sourceOutput:i}),name:p});},onImport:p=>{t.sdk.import({asType:!p.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:p});},onNode:p=>{t.sdk.add(p);},service:a});};var np=({clientOptions:e,context:t,plugin:r})=>{let n=t.file({id:ce}),i=E(t.config).name==="@hey-api/client-nuxt",a=Y({config:t.config,sourceOutput:n.nameWithoutExtension()}),p=n.import({asType:true,module:a,name:"TDataShape"}),c=n.import({asType:true,module:a,name:"Client"}),m=o.typeAliasDeclaration({exportType:true,name:"Options",type:o.typeIntersectionNode({types:[o.typeReferenceNode({typeArguments:i?[o.typeReferenceNode({typeName:"TComposable"}),o.typeReferenceNode({typeName:"TData"}),o.typeReferenceNode({typeName:$s}),o.typeReferenceNode({typeName:ze})]:[o.typeReferenceNode({typeName:"TData"}),o.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),o.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!r.client,name:"client",type:o.typeReferenceNode({typeName:c.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:o.typeReferenceNode({typeArguments:[o.keywordTypeNode({keyword:"string"}),o.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:i?[o.typeParameterDeclaration({constraint:o.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),o.typeParameterDeclaration({constraint:o.typeReferenceNode({typeName:p.name}),defaultType:o.typeReferenceNode({typeName:p.name}),name:"TData"}),o.typeParameterDeclaration({defaultType:o.keywordTypeNode({keyword:"unknown"}),name:$s}),o.typeParameterDeclaration({defaultType:o.keywordTypeNode({keyword:"undefined"}),name:ze})]:[o.typeParameterDeclaration({constraint:o.typeReferenceNode({typeName:p.name}),defaultType:o.typeReferenceNode({typeName:p.name}),name:"TData"}),o.typeParameterDeclaration({constraint:o.keywordTypeNode({keyword:"boolean"}),defaultType:o.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});n.add(m);};var al=({plugin:e})=>{let t=o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:o.this(),name:"_client"}),operator:"=",right:o.propertyAccessExpression({expression:o.identifier({text:"args"}),name:"client"})})});return [o.propertyDeclaration({initializer:e.client?o.identifier({text:"_heyApiClient"}):void 0,modifier:"protected",name:"_client",type:g.factory.createTypeReferenceNode("Client")}),o.identifier({text:`
`}),o.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.client,name:"args",type:o.typeInterfaceNode({properties:[{isRequired:!e.client,name:"client",type:"Client"}],useLegacyResolution:false})}],statements:[e.client?o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:o.block({statements:[t]})}):t]})]},pl=({context:e,plugin:t})=>{let r=E(e.config),n=r.name==="@hey-api/client-nuxt",s=e.file({id:ce}),i=new Map,a=new Set,p=t.instance?al({plugin:t}):[];e.subscribe("operation",({operation:m})=>{let f=Ft({context:e,operation:m}),l=je({context:e,file:s,operation:m,type:"response"}),u=qn({context:e,operation:m,plugin:t});for(let d of u.values())d.path.forEach((y,x)=>{i.has(y)||i.set(y,{className:y,classes:new Set,methods:new Set,nodes:[],root:!x});let O=d.path[x-1];if(O){let L=i.get(O);L.classes.add(y),i.set(O,L);}if(!(d.path.length===x+1))return;let A=i.get(y);if(A.methods.has(d.methodName))return;let P=o.methodDeclaration({accessLevel:"public",comment:at({operation:m}),isStatic:!t.instance,name:d.methodName,parameters:[{isRequired:f,name:"options",type:kr({context:e,file:s,operation:m,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:Ls({context:e,isRequiredOptions:f,operation:m,plugin:t}),types:n?[{extends:o.typeNode("Composable"),name:fr},{default:l.name?o.typeReferenceNode({typeName:l.name}):o.typeNode("undefined"),extends:l.name?o.typeReferenceNode({typeName:l.name}):void 0,name:ze}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});A.nodes.length?A.nodes.push(o.identifier({text:`
`}),P):A.nodes.push(P),A.methods.add(d.methodName),i.set(y,A);});});let c=m=>{if(a.has(m.className))return;if(m.classes.size)for(let l of m.classes){let u=i.get(l);c(u),m.nodes.push(o.propertyDeclaration({initializer:t.instance?o.newExpression({argumentsArray:t.instance?[o.objectExpression({multiLine:false,obj:[{key:"client",value:o.propertyAccessExpression({expression:o.this(),name:"_client"})}]})]:[],expression:o.identifier({text:u.className})}):o.identifier({text:u.className}),modifier:t.instance?void 0:"static",name:j({case:"camelCase",value:u.className})}));}let f=o.classDeclaration({exportClass:m.root,extendedClasses:t.instance?["_HeyApiClient"]:void 0,name:m.className,nodes:m.nodes});s.add(f),a.add(m.className);};e.subscribe("after",()=>{if(p.length){let m=o.classDeclaration({exportClass:false,name:"_HeyApiClient",nodes:p});s.add(m);}for(let m of i.values())c(m);});},cl=({context:e,plugin:t})=>{let r=E(e.config),n=r.name==="@hey-api/client-nuxt",s=e.file({id:ce});e.subscribe("operation",({operation:i})=>{let a=Ft({context:e,operation:i}),p=je({context:e,file:s,operation:i,type:"response"}),c=o.constVariable({comment:at({operation:i}),exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:a,name:"options",type:kr({context:e,file:s,operation:i,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:Ls({context:e,isRequiredOptions:a,operation:i,plugin:t}),types:n?[{extends:o.typeNode("Composable"),name:fr},{default:p.name?o.typeReferenceNode({typeName:p.name}):o.typeNode("undefined"),extends:p.name?o.typeReferenceNode({typeName:p.name}):void 0,name:ze}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:U({config:e.config,handleIllegal:true,id:i.id,operation:i})});s.add(c);});},sp=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:ce,path:t.output}),n=Y({config:e.config,sourceOutput:r.nameWithoutExtension()}),s=r.import({...W.Options,alias:"ClientOptions",module:n});E(e.config).name==="@hey-api/client-nuxt"&&r.import({asType:true,module:n,name:"Composable"}),np({clientOptions:s,context:e,plugin:t}),t.asClass?pl({context:e,plugin:t}):cl({context:e,plugin:t});};var Bs={_dependencies:["@hey-api/typescript"],_handler:sp,_handlerLegacy:rp,_infer:(e,t)=>{e.client&&(typeof e.client=="boolean"&&(e.client=t.pluginByTag({defaultPlugin:"@hey-api/client-fetch",tag:"client"})),t.ensureDependency(e.client)),e.transformer&&(typeof e.transformer=="boolean"&&(e.transformer=t.pluginByTag({tag:"transformer"})),t.ensureDependency(e.transformer)),e.validator&&(typeof e.validator=="boolean"&&(e.validator=t.pluginByTag({tag:"validator"})),t.ensureDependency(e.validator)),e.instance&&(typeof e.instance!="string"&&(e.instance="Sdk"),e.asClass=true),e.client!=="@hey-api/client-fetch"&&(e.responseStyle="fields");},asClass:false,auth:true,classStructure:"auto",client:true,exportFromIndex:true,instance:false,name:"@hey-api/sdk",operationId:true,output:"sdk",response:"body",responseStyle:"fields"};var ml="$OpenApiTs",ie={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},fl=({comments:e,leadingComment:t,meta:r,obj:n,onNode:s,...i})=>{if(!r)return;let{created:a,name:p}=Se({create:true,meta:r,...i});if(a){let c=o.enumDeclaration({comments:e,leadingComment:t,name:p,obj:n});s(c);}},pt=({comment:e,meta:t,onCreated:r,onNode:n,type:s,...i})=>{if(!t)return {created:false,name:""};let a=Se({create:true,meta:t,...i}),{created:p,name:c}=a;if(p){let m=o.typeAliasDeclaration({comment:e,exportType:true,name:c,type:s});n(m),r?.(c);}return a},ll=e=>{let t=R(),r=[];op(e),e.model.enums.forEach(n=>t.plugins["@hey-api/typescript"]?.enums!=="typescript+namespace"?ip({...e,model:n}):ul({...e,model:n,onNode:s=>{r.push(s);}})),r.length&&e.onNode(o.namespaceDeclaration({name:e.model.name,statements:r}));},ip=({client:e,model:t,onNode:r})=>{let n=R(),s={},i={};t.enum.forEach(p=>{let{key:c,value:m}=un(p);s[c]=m;let f=p.customDescription||p.description;f&&(i[c]=[D(f)]);});let a=[t.description&&D(t.description),t.deprecated&&"@deprecated"];if(n.plugins["@hey-api/typescript"]?.enums==="typescript"||n.plugins["@hey-api/typescript"]?.enums==="typescript+namespace"){fl({client:e,comments:i,leadingComment:a,meta:t.meta,obj:s,onNode:r});return}pt({client:e,comment:a,meta:t.meta,onCreated:p=>{if(n.plugins["@hey-api/typescript"]?.enums==="javascript"){let c=o.objectExpression({multiLine:true,obj:Object.entries(s).map(([f,l])=>({comments:i[f],key:f,value:l})),unescape:true}),m=o.constVariable({assertion:"const",comment:a,exportConst:true,expression:c,name:p});r(m);}},onNode:r,type:na(t.enum)});},ul=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(s=>{let{key:i,value:a}=un(s);r[i]=a;let p=s.customDescription||s.description;p&&(n[i]=[D(p)]);}),t(o.enumDeclaration({comments:n,leadingComment:[e.description&&D(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},op=({client:e,model:t,onNode:r})=>{pt({client:e,comment:[t.description&&D(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:Oe(t)});},dl=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return ll(e);case "enum":return ip(e);default:return op(e)}},yl=({client:e,onNode:t})=>{let r={},n=R();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.tree)return;let s=K(n);for(let a of e.services)for(let p of a.operations){if(!p.parameters.length&&!p.responses.length)continue;r[p.path]||(r[p.path]={});let c=r[p.path];c[p.method]||(c[p.method]={});let m=c[p.method];if(m.$ref=p.name,p.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;p.responses.forEach(l=>{m.res[l.code]=l;});}if(p.parameters.length>0){let l={mediaType:null,...ie,in:"body",name:"body",prop:"body"},u=p.parameters.filter(b=>b.in==="body");u.length||(u=p.parameters.filter(b=>b.in==="formData")),u.length===1?l={...ie,...u[0],in:"body",isRequired:u[0].isRequired,name:"body",prop:"body"}:u.length>1&&(l={...ie,in:"body",isRequired:u.some(b=>b.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:u});let d={...ie,in:"header",isRequired:Ue(p.parameters.filter(b=>b.in==="header")),mediaType:null,name:s?"header":"headers",prop:s?"header":"headers",properties:p.parameters.filter(b=>b.in==="header").sort(Cr)},y={...ie,in:"path",isRequired:Ue(p.parameters.filter(b=>b.in==="path")),mediaType:null,name:"path",prop:"path",properties:p.parameters.filter(b=>b.in==="path").sort(Cr)},x={...ie,in:"query",isRequired:Ue(p.parameters.filter(b=>b.in==="query")),mediaType:null,name:"query",prop:"query",properties:p.parameters.filter(b=>b.in==="query").sort(Cr)},O=s?ra([...p.parameters]):[l,d,y,x].filter(b=>b.properties.length||b.$refs.length||b.mediaType);m.req=O,pt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Dt,onNode:t,type:Oe({...ie,properties:O})});}let f=p.responses.filter(l=>l.responseTypes.includes("success"));if(f.length>0){pt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Qe,onNode:t,type:Oe({...ie,export:"any-of",properties:f})});let l=p.responses.filter(u=>u.responseTypes.includes("error"));s||pt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:dr,onNode:t,type:Oe(l.length?{...ie,export:"one-of",properties:l}:{...ie,base:"unknown"})});}}let i=Object.entries(r).map(([a,p])=>{let c=Object.entries(p).map(([f,l])=>{let u=f,d=[];if(l.req){let x=l.$ref,{name:O}=Se({client:e,meta:{$ref:x,name:x},nameTransformer:Dt}),b={...ie,base:O,export:"reference",isRequired:true,name:"req",properties:[],type:O};d=[...d,b];}if(l.res){let x=Object.entries(l.res).map(([b,A])=>({...ie,...A,isRequired:true,name:String(b)})),O={...ie,isRequired:true,name:"res",properties:x};d=[...d,O];}return {...ie,isRequired:true,name:u.toLocaleLowerCase(),properties:d}}).filter(Boolean);return {...ie,isRequired:true,name:`'${a}'`,properties:c}});n.plugins["@hey-api/typescript"]?.tree&&pt({client:e,meta:{$ref:"@hey-api/openapi-ts",name:ml},onNode:t,type:Oe({...ie,properties:i})});},ap=({client:e,files:t,plugin:r})=>{let n=R();t.types=new qe({dir:n.output.path,exportFromIndex:r.exportFromIndex,id:"types",name:"types.ts"});let s=i=>{t.types?.add(i);};for(let i of e.models)dl({client:e,model:i,onNode:s});yl({client:e,onNode:s});};var It="data",hl=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",pp=({client:e,model:t})=>t.$refs.map(n=>{let s=e.models.find(i=>i.meta?.$ref===n);if(!s)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return s}),cp=e=>{let t=e.model.meta.name,{name:r}=pt({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:tp,onCreated:s=>{let i=Mn({...e,meta:{$ref:`transformers/${t}`,name:s},path:[It]});mp({...e,async:false,name:s,statements:i});},type:`(${It}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},gl=e=>{let{model:t}=e,r=pp(e);if(r.length===1){let{created:n,name:s}=cp({...e,model:r[0]});return n?[o.transformArrayMutation({path:e.path,transformerName:s})]:[]}return Tr(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>Tr(n))?[o.transformArrayMap({path:e.path,transformExpression:o.conditionalExpression({condition:o.identifier({text:"item"}),whenFalse:o.identifier({text:"item"}),whenTrue:o.transformNewDate({parameterName:"item"})})})]:[]},xl=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&Tr(t)?[o.transformDateMutation({path:r})]:Mn({...e,model:t,path:r})},Mn=e=>{let{model:t}=e;switch(t.export){case "array":return gl(e);case "interface":return t.properties.flatMap(r=>xl({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=pp(e),{created:n,name:s}=cp({...e,model:r[0]});return n?t.in==="response"?[o.expressionToStatement({expression:o.callExpression({functionName:s,parameters:[It]})})]:o.transformFunctionMutation({path:e.path,transformerName:s}):[]}default:return []}},mp=({async:e,client:t,name:r,onNode:n,onRemoveNode:s,statements:i})=>{let a={created:false,name:r};if(!i.length)return oa({client:t,name:r}),s?.(),a;let p=o.arrowFunction({async:e,multiLine:true,parameters:[{name:It}],statements:[...i,o.returnVariable({expression:It})]}),c=o.constVariable({exportConst:true,expression:p,name:r,typeName:r});return n(c),{created:true,name:r}},fp=({client:e,files:t})=>{let r=R(),n=i=>{t.types?.add(i);},s=()=>{t.types?.removeNode();};for(let i of e.services)for(let a of i.operations){let p=a.responses.filter(f=>f.responseTypes.includes("success"));if(!p.length)continue;let c=p.filter(f=>!hl(f));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(a)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=Qe(a.name);pt({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:Ds,onCreated:f=>{let l=p.length>1?p.flatMap(u=>{let d=Mn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:u,onNode:n,onRemoveNode:s,path:[It]});return d.length?[o.ifStatement({expression:o.safeAccessExpression(["data"]),thenStatement:o.block({statements:d})})]:[]}):Mn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:p[0],onNode:n,onRemoveNode:s,path:[It]});mp({async:true,client:e,name:f,onNode:n,onRemoveNode:s,statements:l});},onNode:n,type:`(${It}: any) => Promise<${m}>`});}};var Ks={_dependencies:["@hey-api/typescript"],_handler:_a,_handlerLegacy:fp,_tags:["transformer"],bigInt:true,dates:true,exportFromIndex:false,name:"@hey-api/transformers",output:"transformers"};var up=({context:e,name:t})=>(de.lastIndex=0,de.test(t)?t.startsWith("-")?g.factory.createStringLiteral(t):g.factory.createNumericLiteral(t):j({case:e.config.output.case,value:t}));var Fn=o.keywordTypeNode({keyword:"string"}),Ol=({server:e})=>{let t=De(e.url);return t.protocol&&t.host?o.literalTypeNode({literal:o.stringLiteral({text:e.url})}):o.templateLiteralType({value:[t.protocol||Fn,"://",t.host||Fn,t.port?`:${t.port}`:"",t.path||""]})},dp=({context:e,identifier:t,servers:r})=>{let n=e.file({id:N});if(!t.name)return;let s=E(e.config),i=r.map(p=>Ol({server:p}));r.length?"strictBaseUrl"in s&&s.strictBaseUrl||i.push(o.typeIntersectionNode({types:[Fn,g.factory.createTypeLiteralNode([])]})):i.push(Fn);let a=o.typeAliasDeclaration({exportType:true,name:t.name,type:o.typeInterfaceNode({properties:[{name:fe(e.config),type:o.typeUnionNode({types:i})}],useLegacyResolution:false})});n.add(a);};var Ws=({$ref:e,accessScope:t,plugin:r})=>{if(!t||t==="both")return e;let n=e.split("/"),s=n.pop(),i=t==="read"?r.readableNameBuilder:r.writableNameBuilder,a=Sl({name:s,nameBuilder:i});return n.push(a),n.join("/")},Sl=({name:e,nameBuilder:t})=>t?t.replace("{{name}}",e):e,Rl=({schema:e,state:t})=>{let r=t?.accessScope;return r?!!(e.accessScope&&r!==e.accessScope||e.$ref&&e.accessScopes&&!e.accessScopes.includes(r)&&!e.accessScopes.includes("both")||(e.type==="array"||e.type==="tuple")&&e.items&&e.items.every(n=>n.accessScopes&&!n.accessScopes.includes(r)&&!n.accessScopes.includes("both"))):false},Il=({$ref:e,context:t,plugin:r,schema:n})=>{let i=t.file({id:N}).identifier({$ref:e,create:true,namespace:"value"});if(!i.created)return;let a=Qs({plugin:r,schema:n});r.enumsConstantsIgnoreNull&&a.typeofItems.includes("object")&&(a.obj=a.obj.filter(m=>m.value!==null));let p=o.objectExpression({multiLine:true,obj:a.obj});return o.constVariable({assertion:"const",comment:Ae({schema:n}),exportConst:true,expression:p,name:i.name||""})},Qs=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((s,i)=>{let a=typeof s.const;r.includes(a)||r.push(a);let p;return s.title?p=s.title:a==="number"||a==="string"?p=`${s.const}`:a==="boolean"?p=s.const?"true":"false":s.const===null?p="null":p=`${i}`,p&&(p=j({case:e.enumsCase,stripLeadingSeparators:false,value:p}),de.lastIndex=0,de.test(p)&&(e.enums==="typescript"||e.enums==="typescript+namespace")&&(p=`_${p}`)),{comments:Ae({schema:s}),key:p,value:s.const}}),typeofItems:r}},Us=({$ref:e,context:t,plugin:r,schema:n,state:s})=>{let a=t.file({id:N}).identifier({$ref:e,create:true,namespace:"type"});if(!a.created&&!Yr(e)&&r.enums!=="typescript+namespace")return;let p=ee({context:t,plugin:r,schema:{...n,type:void 0},state:s});if(p)return o.typeAliasDeclaration({comment:Ae({schema:n}),exportType:true,name:a.name||"",type:p})},gp=({plugin:e,schema:t})=>!Qs({plugin:e,schema:t}).typeofItems.filter(n=>n!=="number"&&n!=="string").length,yp=({$ref:e,context:t,plugin:r,schema:n,state:s})=>{let i=Qs({plugin:r,schema:n});if(!gp({plugin:r,schema:n}))return Us({$ref:e,context:t,plugin:r,schema:n,state:s});let p=t.file({id:N}).identifier({$ref:e,create:true,namespace:"enum"});return o.enumDeclaration({leadingComment:Ae({schema:n}),name:p.name||"",obj:i.obj})},Cl=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{if(!n.items)return o.typeArrayNode(o.keywordTypeNode({keyword:"unknown"}));n=ue({schema:n});let i=[];for(let a of n.items){let p=ee({context:e,namespace:t,plugin:r,schema:a,state:s});p&&i.push(p);}if(i.length)return i.length===1?o.typeArrayNode(i[0]):n.logicalOperator==="and"?o.typeArrayNode(o.typeIntersectionNode({types:i})):o.typeArrayNode(o.typeUnionNode({types:i}))},Tl=({schema:e})=>e.const!==void 0?o.literalTypeNode({literal:o.ots.boolean(e.const)}):o.keywordTypeNode({keyword:"boolean"}),Pl=({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i})=>{let a=t.file({id:N}),p=e?Yr(e):false,c=p||!!n.exportInlineEnums;if(e&&c){if(!n.enums){let f=Us({$ref:e,context:t,plugin:n,schema:s,state:i});f&&a.add(f);}if(n.enums==="javascript"){let f=Us({$ref:e,context:t,plugin:n,schema:s,state:i});f&&a.add(f);let l=Il({$ref:e,context:t,plugin:n,schema:s});l&&a.add(l);}if(n.enums==="typescript"){let f=yp({$ref:e,context:t,plugin:n,schema:s,state:i});f&&a.add(f);}if(n.enums==="typescript+namespace"){let f=yp({$ref:e,context:t,plugin:n,schema:s,state:i});f&&(p?a.add(f):r.push(f));}}return ee({context:t,plugin:n,schema:{...s,type:void 0},state:i})},jl=({context:e,schema:t})=>t.const!==void 0?o.literalTypeNode({literal:o.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.config.plugins["@hey-api/transformers"]?.bigInt?o.typeReferenceNode({typeName:"bigint"}):o.keywordTypeNode({keyword:"number"}),Al=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{let i,a,p=[],c=[],m=n.required??[],f=false,l=false;for(let u in n.properties){let d=n.properties[u];if(Rl({schema:d,state:s})){l=true;continue}let x=ee({$ref:s?[...s.path,u].join("/"):`${Jt}${u}`,context:e,namespace:t,plugin:r,schema:d,state:s});if(!x)continue;let O=m.includes(u);p.push({comment:Ae({schema:d}),isReadOnly:d.accessScope==="read",isRequired:O,name:up({context:e,name:u}),type:x}),c.push(d),O||(f=true);}if(n.additionalProperties&&(n.additionalProperties.type!=="never"||!c.length)&&(n.additionalProperties.type==="never"?c=[n.additionalProperties]:c.unshift(n.additionalProperties),f&&c.push({type:"undefined"}),a={isRequired:!n.propertyNames,name:"key",type:ee({context:e,namespace:t,plugin:r,schema:c.length===1?c[0]:{items:c,logicalOperator:"or"},state:s})},n.propertyNames&&n.propertyNames.$ref&&(i=J(n.propertyNames.$ref))),!(l&&!p.length&&!a))return o.typeInterfaceNode({indexKey:i,indexProperty:a,properties:p,useLegacyResolution:false})},El=({context:e,schema:t})=>{if(t.const!==void 0)return o.literalTypeNode({literal:o.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return o.typeUnionNode({types:[o.typeReferenceNode({typeName:"Blob"}),o.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.config.plugins["@hey-api/transformers"]?.dates)return o.typeReferenceNode({typeName:"Date"})}return o.keywordTypeNode({keyword:"string"})},Nl=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{let i=[];if(n.const&&Array.isArray(n.const))i=n.const.map(a=>o.valueToExpression({value:a})??o.identifier({text:"unknown"}));else if(n.items)for(let a of n.items){let p=ee({context:e,namespace:t,plugin:r,schema:a,state:s});p&&i.push(p);}if(i.length)return o.typeTupleNode({types:i})},hp=({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i})=>{switch(s.type){case "array":return Cl({context:t,namespace:r,plugin:n,schema:s,state:i});case "boolean":return Tl({schema:s});case "enum":return Pl({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i});case "integer":case "number":return jl({context:t,schema:s});case "never":return o.keywordTypeNode({keyword:"never"});case "null":return o.literalTypeNode({literal:o.null()});case "object":return Al({context:t,namespace:r,plugin:n,schema:s,state:i});case "string":return El({context:t,schema:s});case "tuple":return Nl({context:t,namespace:r,plugin:n,schema:s,state:i});case "undefined":return o.keywordTypeNode({keyword:"undefined"});case "unknown":return o.keywordTypeNode({keyword:"unknown"});case "void":return o.keywordTypeNode({keyword:"void"})}},Vs=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let s in e){let i=e[s];r[i.name]=ue({schema:i.schema}),i.required&&n.push(i.name);}t.properties=r,n.length&&(t.required=n);}return t},kl=({context:e,operation:t,plugin:r})=>{let n=e.file({id:N}),s={type:"object"},i=[];s.properties||(s.properties={}),t.body?(s.properties.body=t.body.schema,t.body.required&&i.push("body")):s.properties.body={type:"never"},t.parameters?.header&&(s.properties.headers=Vs({parameters:t.parameters.header}),s.properties.headers.required&&i.push("headers")),t.parameters?.path?(s.properties.path=Vs({parameters:t.parameters.path}),s.properties.path.required&&i.push("path")):s.properties.path={type:"never"},t.parameters?.query?(s.properties.query=Vs({parameters:t.parameters.query}),s.properties.query.required&&i.push("query")):s.properties.query={type:"never"},s.properties.url={const:t.path,type:"string"},i.push("url"),s.required=i;let a=n.identifier({$ref:$({config:e.config,id:t.id,type:"data"}),create:true,namespace:"type"}),p=ee({context:e,plugin:r,schema:s,state:r.readOnlyWriteOnlyBehavior==="off"?{path:[t.method,t.path,"data"]}:{accessScope:"write",path:[t.method,t.path,"data"]}});if(p){let c=o.typeAliasDeclaration({exportType:true,name:a.name||"",type:p});n.add(c);}},vl=({context:e,operation:t,plugin:r})=>{kl({context:e,operation:t,plugin:r});let n=e.file({id:N}),{error:s,errors:i,response:a,responses:p}=Me(t);if(i){let c=n.identifier({$ref:$({config:e.config,id:t.id,type:"errors"}),create:true,namespace:"type"});if(c.name){let m=ee({context:e,plugin:r,schema:i,state:r.readOnlyWriteOnlyBehavior==="off"?{path:[t.method,t.path,"errors"]}:{accessScope:"read",path:[t.method,t.path,"errors"]}});if(m){let f=o.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(s){let f=n.identifier({$ref:$({config:e.config,id:t.id,type:"error"}),create:true,namespace:"type"});if(f.name){let l=o.typeReferenceNode({typeName:c.name}),u=g.factory.createTypeOperatorNode(g.SyntaxKind.KeyOfKeyword,l),d=o.typeAliasDeclaration({exportType:true,name:f.name,type:o.indexedAccessTypeNode({indexType:u,objectType:l})});n.add(d);}}}}if(p){let c=n.identifier({$ref:$({config:e.config,id:t.id,type:"responses"}),create:true,namespace:"type"});if(c.name){let m=ee({context:e,plugin:r,schema:p,state:r.readOnlyWriteOnlyBehavior==="off"?{path:[t.method,t.path,"responses"]}:{accessScope:"read",path:[t.method,t.path,"responses"]}});if(m){let f=o.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(a){let f=n.identifier({$ref:$({config:e.config,id:t.id,type:"response"}),create:true,namespace:"type"});if(f.name){let l=o.typeReferenceNode({typeName:c.name}),u=g.factory.createTypeOperatorNode(g.SyntaxKind.KeyOfKeyword,l),d=o.typeAliasDeclaration({exportType:true,name:f.name,type:o.indexedAccessTypeNode({indexType:u,objectType:l})});n.add(d);}}}}},xp=({schema:e})=>{let t=e.accessScopes;return t!==void 0&&t.length>1},zs=({accessScope:e,schema:t})=>{let r=t.accessScopes;return !r||r!==void 0&&(r.includes(e)||r.includes("both"))},ee=({$ref:e,context:t,namespace:r=[],plugin:n,schema:s,state:i})=>{let a=t.file({id:N}),p;if(s.$ref){let c=t.resolveIrRef(s.$ref);if(!i?.accessScope||zs({accessScope:i.accessScope,schema:c})){let m=Ws({$ref:s.$ref,accessScope:xp({schema:c})?i?.accessScope:void 0,plugin:n}),f=a.identifier({$ref:m,create:true,namespace:c.type==="enum"&&(n.enums==="typescript"||n.enums==="typescript+namespace")&&gp({plugin:n,schema:c})?"enum":"type"});p=o.typeReferenceNode({typeName:f.name||""});}}else if(s.type)p=hp({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i});else if(s.items)if(s=ue({schema:s}),s.items){let c=[];for(let m of s.items){let f=ee({context:t,namespace:r,plugin:n,schema:m,state:i});f&&c.push(f);}p=s.logicalOperator==="and"?o.typeIntersectionNode({types:c}):o.typeUnionNode({types:c});}else p=ee({context:t,namespace:r,plugin:n,schema:s,state:i});else p=hp({context:t,namespace:r,plugin:n,schema:{type:"unknown"},state:i});if(e&&Yr(e)){if(r.length){let c=a.identifier({$ref:e,create:true,namespace:"value"}),m=o.namespaceDeclaration({name:c.name||"",statements:r});a.add(m);}if(s.type!=="enum"&&p){let c=a.identifier({$ref:e,create:true,namespace:"type"}),m=o.typeAliasDeclaration({comment:Ae({schema:s}),exportType:true,name:c.name||"",type:p});a.add(m);}}return p},bp=({context:e,plugin:t})=>{let n=e.createFile({exportFromIndex:t.exportFromIndex,id:N,identifierCase:t.identifierCase,path:t.output}).identifier({$ref:"ClientOptions",create:true,namespace:"type"});e.subscribe("schema",({$ref:i,schema:a})=>{if(t.readOnlyWriteOnlyBehavior==="off"||!xp({schema:a})){ee({$ref:i,context:e,plugin:t,schema:a,state:{path:[]}});return}zs({accessScope:"read",schema:a})&&ee({$ref:Ws({$ref:i,accessScope:"read",plugin:t}),context:e,plugin:t,schema:a,state:{accessScope:"read",path:[]}}),zs({accessScope:"write",schema:a})&&ee({$ref:Ws({$ref:i,accessScope:"write",plugin:t}),context:e,plugin:t,schema:a,state:{accessScope:"write",path:[]}});}),e.subscribe("parameter",({$ref:i,parameter:a})=>{ee({$ref:i,context:e,plugin:t,schema:a.schema,state:{path:[]}});}),e.subscribe("requestBody",({$ref:i,requestBody:a})=>{ee({$ref:i,context:e,plugin:t,schema:a.schema,state:t.readOnlyWriteOnlyBehavior==="off"?{path:[]}:{accessScope:"write",path:[]}});}),e.subscribe("operation",({operation:i})=>{vl({context:e,operation:i,plugin:t});});let s=[];e.subscribe("server",({server:i})=>{s.push(i);}),e.subscribe("after",()=>{dp({context:e,identifier:n,servers:s});});};var Xs={_handler:bp,_handlerLegacy:ap,enums:false,enumsCase:"SCREAMING_SNAKE_CASE",enumsConstantsIgnoreNull:false,exportFromIndex:true,exportInlineEnums:false,identifierCase:"PascalCase",name:"@hey-api/typescript",output:"types",readOnlyWriteOnlyBehavior:"split",readableNameBuilder:"{{name}}Readable",style:"preserve",tree:false,writableNameBuilder:"{{name}}Writable"};var Ct=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return kr({context:e,file:n,operation:t})},Dn=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name}),i={asType:true,name:je({context:e,file:n,operation:t,type:"error"}).name||""};if(i.name||(i=n.import({asType:true,module:r.name,name:"DefaultError"})),E(e.config).name==="@hey-api/client-axios"){let p=n.import({asType:true,module:"axios",name:"AxiosError"});i={...p,name:`${p.name}<${i.name}>`};}return i},_n=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return je({context:e,file:n,operation:t,type:"response"}).name||"unknown"};var Sp="createQueryKey",Kn="QueryKey",vr="TOptions",Op=o.identifier({text:"infinite"}),Bn=o.identifier({text:"options"}),Vn=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=r.identifier({$ref:`#/ir/${Sp}`,create:true,namespace:"value"});if(n.name){let s=o.indexedAccessTypeNode({indexType:o.literalTypeNode({literal:o.ots.number(0)}),objectType:o.typeReferenceNode({typeArguments:[o.typeReferenceNode({typeName:vr})],typeName:Kn})}),i=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"id",type:o.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:o.typeReferenceNode({typeName:vr})},{isRequired:false,name:"infinite",type:o.typeReferenceNode({typeName:"boolean"})}],returnType:o.typeTupleNode({types:[s]}),statements:[o.constVariable({assertion:s,expression:o.objectExpression({multiLine:false,obj:[{key:"_id",value:o.identifier({text:"id"})},{key:fe(e.config),value:o.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${fe(e.config)}`})}]}),name:"params",typeName:s}),o.ifStatement({expression:Op,thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"_infinite"}),right:Op})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:Bn,isOptional:true,name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.propertyAccessExpression({expression:"options",name:"body"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:Bn,isOptional:true,name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:Bn,isOptional:true,name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.propertyAccessExpression({expression:"options",name:"path"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:Bn,isOptional:true,name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.propertyAccessExpression({expression:"options",name:"query"})})})]})}),o.returnStatement({expression:o.arrayLiteralExpression({elements:[o.identifier({text:"params"})]})})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:W.Options.name})}),name:vr}]}),name:n.name});r.add(i);}},wl=({context:e,id:t,isInfinite:r,plugin:n})=>{let i=e.file({id:n.name}).identifier({$ref:`#/ir/${Sp}`,namespace:"value"});return o.callExpression({functionName:i.name||"",parameters:[o.ots.string(t),"options",r?o.ots.boolean(true):void 0]})},Wn=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=[{name:"_id",type:o.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:o.keywordTypeNode({keyword:"boolean"})}],s=o.typeAliasDeclaration({exportType:true,name:Kn,type:o.typeTupleNode({types:[o.typeIntersectionNode({types:[o.typeReferenceNode({typeName:`Pick<${vr}, '${fe(e.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),o.typeInterfaceNode({properties:n,useLegacyResolution:true})]})]}),typeParameters:[{extends:o.typeReferenceNode({typeName:o.identifier({text:W.Options.name})}),name:vr}]});r.add(s);},Hs=({context:e,operation:t,plugin:r})=>{let n=U({config:e.config,id:t.id,operation:t}),s="";return r.infiniteQueryKeyNameBuilder&&(typeof r.infiniteQueryKeyNameBuilder=="function"?s=r.infiniteQueryKeyNameBuilder(n):s=r.infiniteQueryKeyNameBuilder.replace("{{name}}",n)),s},Gs=({context:e,operation:t,plugin:r})=>{let n=U({config:e.config,id:t.id,operation:t}),s="";return r.queryKeyNameBuilder&&(typeof r.queryKeyNameBuilder=="function"?s=r.queryKeyNameBuilder(n):s=r.queryKeyNameBuilder.replace("{{name}}",n)),s},Un=({context:e,isInfinite:t,operation:r,plugin:n,typeQueryKey:s})=>{let i=e.file({id:n.name}),a=Ct({context:e,operation:r,plugin:n}),p=t?Hs({context:e,operation:r,plugin:n}):Gs({context:e,operation:r,plugin:n}),c=i.identifier({$ref:`#/queryKey/${p}`,create:true,namespace:"value"});return o.constVariable({exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:rn(r),name:"options",type:a}],returnType:t?s:void 0,statements:wl({context:e,id:r.id,isInfinite:t,plugin:n})}),name:c.name||""})};var Ip="createInfiniteParams",Rp="infiniteQueryOptions",ql=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:o.typeReferenceNode({typeName:`QueryKey<${W.Options.name}>`})},{name:"page",type:o.typeReferenceNode({typeName:"K"})}],statements:[o.constVariable({expression:o.objectExpression({obj:[{spread:o.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),o.returnVariable({expression:o.asExpression({expression:o.asExpression({expression:o.identifier({text:"params"}),type:o.keywordTypeNode({keyword:"unknown"})}),type:g.factory.createTypeQueryNode(o.identifier({text:"page"}))})})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:`Pick<QueryKey<${W.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:Ip});r.add(n);},Ml=({context:e,operation:t,plugin:r})=>{let n=U({config:e.config,id:t.id,operation:t}),s="";return r.infiniteQueryOptionsNameBuilder&&(typeof r.infiniteQueryOptionsNameBuilder=="function"?s=r.infiniteQueryOptionsNameBuilder(n):s=r.infiniteQueryOptionsNameBuilder.replace("{{name}}",n)),s},Cp=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.infiniteQueryOptions||!["get","post"].includes(t.method))return s;let i=yo({context:e,operation:t});if(!i)return s;let a=e.file({id:r.name}),p=Ft({context:e,operation:t});s.hasInfiniteQueries||(s.hasInfiniteQueries=true,s.hasCreateQueryKeyParamsFunction||(Wn({context:e,plugin:r}),Vn({context:e,plugin:r}),s.hasCreateQueryKeyParamsFunction=true),s.hasCreateInfiniteParamsFunction||(ql({context:e,plugin:r}),s.hasCreateInfiniteParamsFunction=true),a.import({module:r.name,name:Rp}),s.typeInfiniteData=a.import({asType:true,module:r.name,name:"InfiniteData"})),s.hasUsedQueryFn=true;let c=Ct({context:e,operation:t,plugin:r}),m=Dn({context:e,operation:t,plugin:r}),f=_n({context:e,operation:t,plugin:r}),l=`${Kn}<${c}>`,u=`Pick<${l}[0], 'body' | 'headers' | 'path' | 'query'>`,d=ee({context:e,plugin:e.config.plugins["@hey-api/typescript"],schema:i.schema,state:void 0}),y=d?`${ke({node:d,unescape:true})} | ${u}`:`${u}`,x=Un({context:e,isInfinite:true,operation:t,plugin:r,typeQueryKey:l});a.add(x);let O=Hs({context:e,operation:t,plugin:r}),b=a.identifier({$ref:`#/queryKey/${O}`,namespace:"value"}),A=o.awaitExpression({expression:o.callExpression({functionName:n,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),P=[o.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:o.conditionalExpression({condition:o.binaryExpression({left:o.typeOfExpression({text:"pageParam"}),operator:"===",right:o.ots.string("object")}),whenFalse:o.objectExpression({multiLine:true,obj:[{key:i.in,value:o.objectExpression({multiLine:true,obj:[{key:i.name,value:o.identifier({text:"pageParam"})}]})}]}),whenTrue:o.identifier({text:"pageParam"})}),name:"page",typeName:u}),o.constVariable({expression:o.callExpression({functionName:Ip,parameters:["queryKey","page"]}),name:"params"})];e.config.plugins["@hey-api/sdk"]?.responseStyle==="data"?P.push(o.returnVariable({expression:A})):P.push(o.constVariable({destructure:true,expression:A,name:"data"}),o.returnVariable({expression:"data"}));let L=o.constVariable({comment:r.comments?at({operation:t}):void 0,exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:p,name:"options",type:c}],statements:[o.returnFunctionCall({args:[o.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:P})},{key:"queryKey",value:o.callExpression({functionName:b.name||"",parameters:["options"]})}]})],name:Rp,types:[f,m.name,`${typeof s.typeInfiniteData=="string"?s.typeInfiniteData:s.typeInfiniteData.name}<${f}>`,l,y]})]}),name:Ml({context:e,operation:t,plugin:r})});a.add(L);};var Tp="mutationOptions",Fl=({context:e,operation:t,plugin:r})=>{let n=U({config:e.config,id:t.id,operation:t}),s="";return r.mutationOptionsNameBuilder&&(typeof r.mutationOptionsNameBuilder=="function"?s=r.mutationOptionsNameBuilder(n):s=r.mutationOptionsNameBuilder.replace("{{name}}",n)),s},Pp=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.mutationOptions||!["delete","patch","post","put"].includes(t.method))return s;let i=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",a=e.file({id:r.name});s.hasMutations||(s.hasMutations=true,a.import({asType:true,module:r.name,name:i})),s.hasUsedQueryFn=true;let p=Ct({context:e,operation:t,plugin:r}),c=Dn({context:e,operation:t,plugin:r}),m=_n({context:e,operation:t,plugin:r}),f=`${i}<${m}, ${c.name}, ${p}>`,l=o.awaitExpression({expression:o.callExpression({functionName:n,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),u=[];e.config.plugins["@hey-api/sdk"]?.responseStyle==="data"?u.push(o.returnVariable({expression:l})):u.push(o.constVariable({destructure:true,expression:l,name:"data"}),o.returnVariable({expression:"data"}));let d=o.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${p}>`}],returnType:f,statements:[o.constVariable({expression:o.objectExpression({obj:[{key:"mutationFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:u})}]}),name:Tp,typeName:f}),o.returnVariable({expression:Tp})]}),y=o.constVariable({comment:r.comments?at({operation:t}):void 0,exportConst:true,expression:d,name:Fl({context:e,operation:t,plugin:r})});return a.add(y),s};var jp="queryOptions",Ll=({context:e,operation:t,plugin:r})=>{let n=U({config:e.config,id:t.id,operation:t}),s="";return r.queryOptionsNameBuilder&&(typeof r.queryOptionsNameBuilder=="function"?s=r.queryOptionsNameBuilder(n):s=r.queryOptionsNameBuilder.replace("{{name}}",n)),s},Ap=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.queryOptions||!["get","post"].includes(t.method))return s;let i=e.file({id:r.name}),a=Ft({context:e,operation:t});s.hasQueries||(s.hasQueries=true,s.hasCreateQueryKeyParamsFunction||(Wn({context:e,plugin:r}),Vn({context:e,plugin:r}),s.hasCreateQueryKeyParamsFunction=true),i.import({module:r.name,name:jp})),s.hasUsedQueryFn=true;let p=Un({context:e,isInfinite:false,operation:t,plugin:r});i.add(p);let c=Ct({context:e,operation:t,plugin:r}),m=Gs({context:e,operation:t,plugin:r}),f=i.identifier({$ref:`#/queryKey/${m}`,namespace:"value"}),l=o.awaitExpression({expression:o.callExpression({functionName:n,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),u=[];e.config.plugins["@hey-api/sdk"]?.responseStyle==="data"?u.push(o.returnVariable({expression:l})):u.push(o.constVariable({destructure:true,expression:l,name:"data"}),o.returnVariable({expression:"data"}));let d=o.constVariable({comment:r.comments?at({operation:t}):void 0,exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:a,name:"options",type:c}],statements:[o.returnFunctionCall({args:[o.objectExpression({obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:u})},{key:"queryKey",value:o.callExpression({functionName:f.name||"",parameters:["options"]})}]})],name:jp})]}),name:Ll({context:e,operation:t,plugin:r})});return i.add(d),s};var Xe=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:t.name,path:t.output}),n={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};e.subscribe("before",()=>{r.import({...W.Options,module:r.relativePathToFile({context:e,id:ce})});}),e.subscribe("operation",({operation:s})=>{n.hasUsedQueryFn=false;let i=e.config.plugins["@hey-api/sdk"],a=i?.asClass?qn({context:e,operation:s,plugin:i}):void 0,p=a?a.values().next().value:void 0,c=(p?[p.path[0],...p.path.slice(1).map(m=>j({case:"camelCase",value:m})),p.methodName].filter(Boolean):[U({config:e.config,handleIllegal:true,id:s.id,operation:s})]).join(".");Ap({context:e,operation:s,plugin:t,queryFn:c,state:n}),Cp({context:e,operation:s,plugin:t,queryFn:c,state:n}),Pp({context:e,operation:s,plugin:t,queryFn:c,state:n}),n.hasUsedQueryFn&&r.import({module:r.relativePathToFile({context:e,id:ce}),name:c.split(".")[0]});}),e.subscribe("after",()=>{(n.hasQueries||n.hasInfiniteQueries)&&r.import({alias:"_heyApiClient",module:r.relativePathToFile({context:e,id:Ne}),name:"client"});});};var Dl=e=>`${U({config:R(),id:e.name,operation:e})}InfiniteOptions`,_l=e=>`${U({config:R(),id:e.name,operation:e})}Mutation`,Bl=({config:e,id:t,operation:r})=>`${U({config:e,id:t,operation:r})}Options`,zn=({config:e,id:t,isInfinite:r,operation:n})=>`${U({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,Kl=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},Vl="createInfiniteParams",Fp="createQueryKey",Ep="infiniteQueryOptions",Np="mutationOptions",Zs="QueryKey",kp="queryOptions",$r="TOptions",Wl=({file:e})=>{let t=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:o.typeNode(`QueryKey<${W.OptionsLegacyParser.name}>`)},{name:"page",type:o.typeNode("K")}],statements:[o.constVariable({expression:o.identifier({text:"queryKey[0]"}),name:"params"}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),o.returnVariable({expression:g.factory.createAsExpression(g.factory.createAsExpression(o.identifier({text:"params"}),g.factory.createKeywordTypeNode(g.SyntaxKind.UnknownKeyword)),g.factory.createTypeQueryNode(o.identifier({text:"page"})))})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:`Pick<QueryKey<${W.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:Vl});e.add(t);},vp=({file:e})=>{let t=o.indexedAccessTypeNode({indexType:o.typeNode(0),objectType:o.typeNode(Zs,[o.typeNode($r)])}),r=o.identifier({text:"infinite"}),n=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"id",type:o.typeNode("string")},{isRequired:false,name:"options",type:o.typeNode($r)},{isRequired:false,name:"infinite",type:o.typeNode("boolean")}],returnType:t,statements:[o.constVariable({assertion:t,expression:o.objectExpression({multiLine:false,obj:[{key:"_id",value:o.identifier({text:"id"})},{key:fe(R()),value:o.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${fe(R())}`})}]}),name:"params",typeName:t}),o.ifStatement({expression:r,thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.propertyAccessExpression({expression:"options",name:"body"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.propertyAccessExpression({expression:"options",name:"path"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.propertyAccessExpression({expression:"options",name:"query"})})})]})}),o.returnVariable({expression:"params"})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:W.OptionsLegacyParser.name})}),name:$r}]}),name:Fp});e.add(n);},wp=({file:e})=>{let t=[{name:"_id",type:o.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:o.keywordTypeNode({keyword:"boolean"})}],r=o.typeAliasDeclaration({name:Zs,type:o.typeTupleNode({types:[o.typeIntersectionNode({types:[o.typeReferenceNode({typeName:`Pick<${$r}, '${fe(R())}' | 'body' | 'headers' | 'path' | 'query'>`}),o.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:o.typeReferenceNode({typeName:o.identifier({text:W.OptionsLegacyParser.name})}),name:$r}]});e.add(r);},Js=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=Lt({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Dt,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeData:_s({importedType:s})}},$p=({client:e,file:t,operation:r,pluginName:n,typesModulePath:s})=>{let i=R(),{name:a}=Lt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:dr,onImport:m=>{t.import({asType:true,module:s,name:m});}}),p={asType:true,name:a};if(p.name||(p=t.import({asType:true,module:n,name:"DefaultError"})),E(i).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});p={...m,name:`${m.name}<${p.name}>`};}return {typeError:p}},qp=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=Lt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Qe,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeResponse:s||"void"}},Mp=({id:e,isInfinite:t})=>o.arrayLiteralExpression({elements:[o.callExpression({functionName:Fp,parameters:[o.ots.string(e),"options",t?o.ots.boolean(true):void 0]})],multiLine:false}),He=({client:e,files:t,plugin:r})=>{let n=R();if(K(n))throw new Error("TanStack Query plugin does not support legacy clients");let s=t[r.name];s.import({...W.OptionsLegacyParser,module:Y({config:n,sourceOutput:r.output})});let i=Bt({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),a=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p,c=false,m=false,f=false,l=false,u=false,d=new Map;for(let y of e.services)for(let x of y.operations){let O=v(x);if(d.has(O))continue;d.set(O,true);let b=[n.plugins["@hey-api/sdk"]?.asClass&&or({config:n,name:y.name}),U({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.asClass,id:x.name,operation:x})].filter(Boolean).join("."),A=false;if(r.queryOptions&&["GET","POST"].includes(x.method)){u||(u=true,m||(wp({file:s}),vp({file:s}),m=true),s.import({module:r.name,name:kp})),A=true;let{typeData:P}=Js({client:e,file:s,operation:x,typesModulePath:i}),L=Ue(x.parameters),Q=o.constVariable({exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:L,name:"options",type:P}],statements:Mp({id:x.name})}),name:zn({config:n,id:x.name,operation:x})});s.add(Q);let _t=o.constVariable({comment:[],exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:L,name:"options",type:P}],statements:[o.returnFunctionCall({args:[o.objectExpression({obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:b,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})},{key:"queryKey",value:o.callExpression({functionName:zn({config:n,id:x.name,operation:x}),parameters:["options"]})}]})],name:kp})]}),name:Bl({config:n,id:x.name,operation:x})});s.add(_t);}if(r.infiniteQueryOptions&&["GET","POST"].includes(x.method)){let P,L=x.parameters.find(Q=>{if(me(n.input.pagination).test(Q.name))return P=Q,true;if(Q.in==="body"){if(Q.export==="reference"){let Ge=Q.$refs[0];return e.models.find(mt=>mt.meta?.$ref===Ge)?.properties.find(mt=>{if(me(n.input.pagination).test(mt.name))return P=mt,true})}return Q.properties.find(Ge=>{if(me(n.input.pagination).test(Ge.name))return P=Ge,true})}});if(L&&P){f||(f=true,m||(wp({file:s}),vp({file:s}),m=true),c||(Wl({file:s}),c=true),s.import({module:r.name,name:Ep}),p=s.import({asType:true,module:r.name,name:"InfiniteData"})),A=true;let{typeData:Q}=Js({client:e,file:s,operation:x,typesModulePath:i}),{typeError:_t}=$p({client:e,file:s,operation:x,pluginName:r.name,typesModulePath:i}),{typeResponse:Ge}=qp({client:e,file:s,operation:x,typesModulePath:i}),Dr=Ue(x.parameters),mt=`${Zs}<${Q}>`,Qn=`Pick<${mt}[0], 'body' | 'headers' | 'path' | 'query'>`,Up=`${P.base} | ${Qn}`,zp=o.constVariable({exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:Dr,name:"options",type:Q}],returnType:mt,statements:Mp({id:x.name,isInfinite:true})}),name:zn({config:n,id:x.name,isInfinite:true,operation:x})});s.add(zp);let Qp=o.constVariable({comment:[],exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:Dr,name:"options",type:Q}],statements:[o.returnFunctionCall({args:[o.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[o.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:o.conditionalExpression({condition:o.binaryExpression({left:o.typeOfExpression({text:"pageParam"}),operator:"===",right:o.ots.string("object")}),whenFalse:o.objectExpression({multiLine:true,obj:[{key:Kl(L),value:o.objectExpression({multiLine:true,obj:[{key:P.name,value:o.identifier({text:"pageParam"})}]})}]}),whenTrue:o.identifier({text:"pageParam"})}),name:"page",typeName:Qn}),o.constVariable({expression:o.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:b,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})},{key:"queryKey",value:o.callExpression({functionName:zn({config:n,id:x.name,isInfinite:true,operation:x}),parameters:["options"]})}]})],name:Ep,types:[Ge,_t.name,`${typeof p=="string"?p:p.name}<${Ge}>`,mt,Up]})]}),name:Dl(x)});s.add(Qp);}}if(r.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(x.method)){l||(l=true,s.import({asType:true,module:r.name,name:a})),A=true;let{typeData:P}=Js({client:e,file:s,operation:x,typesModulePath:i}),{typeError:L}=$p({client:e,file:s,operation:x,pluginName:r.name,typesModulePath:i}),{typeResponse:Q}=qp({client:e,file:s,operation:x,typesModulePath:i}),_t=o.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${P}>`}],statements:[o.constVariable({expression:o.objectExpression({obj:[{key:"mutationFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:b,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})}]}),name:Np,typeName:`${a}<${Q}, ${L.name}, ${P}>`}),o.returnVariable({expression:Np})]}),Ge=o.constVariable({comment:[],exportConst:true,expression:_t,name:_l(x)});s.add(Ge);}(u||f)&&s.import({alias:"_heyApiClient",module:Bt({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),A&&s.import({module:Bt({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:b.split(".")[0]});}};var Ys={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Xe,_handlerLegacy:He,comments:true,exportFromIndex:false,infiniteQueryKeyNameBuilder:"{{name}}InfiniteQueryKey",infiniteQueryOptions:true,infiniteQueryOptionsNameBuilder:"{{name}}InfiniteOptions",mutationOptions:true,mutationOptionsNameBuilder:"{{name}}Mutation",name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",queryKeyNameBuilder:"{{name}}QueryKey",queryOptions:true,queryOptionsNameBuilder:"{{name}}Options"};var ei={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Xe,_handlerLegacy:He,comments:true,exportFromIndex:false,infiniteQueryKeyNameBuilder:"{{name}}InfiniteQueryKey",infiniteQueryOptions:true,infiniteQueryOptionsNameBuilder:"{{name}}InfiniteOptions",mutationOptions:true,mutationOptionsNameBuilder:"{{name}}Mutation",name:"@tanstack/react-query",output:"@tanstack/react-query",queryKeyNameBuilder:"{{name}}QueryKey",queryOptions:true,queryOptionsNameBuilder:"{{name}}Options"};var ti={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Xe,_handlerLegacy:He,comments:true,exportFromIndex:false,infiniteQueryKeyNameBuilder:"{{name}}InfiniteQueryKey",infiniteQueryOptions:true,infiniteQueryOptionsNameBuilder:"{{name}}InfiniteOptions",mutationOptions:true,mutationOptionsNameBuilder:"{{name}}Mutation",name:"@tanstack/solid-query",output:"@tanstack/solid-query",queryKeyNameBuilder:"{{name}}QueryKey",queryOptions:true,queryOptionsNameBuilder:"{{name}}Options"};var ri={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Xe,_handlerLegacy:He,comments:true,exportFromIndex:false,infiniteQueryKeyNameBuilder:"{{name}}InfiniteQueryKey",infiniteQueryOptions:true,infiniteQueryOptionsNameBuilder:"{{name}}InfiniteOptions",mutationOptions:true,mutationOptionsNameBuilder:"{{name}}Mutation",name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",queryKeyNameBuilder:"{{name}}QueryKey",queryOptions:true,queryOptionsNameBuilder:"{{name}}Options"};var ni={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Xe,_handlerLegacy:He,comments:true,exportFromIndex:false,infiniteQueryKeyNameBuilder:"{{name}}InfiniteQueryKey",infiniteQueryOptions:true,infiniteQueryOptionsNameBuilder:"{{name}}InfiniteOptions",mutationOptions:true,mutationOptionsNameBuilder:"{{name}}Mutation",name:"@tanstack/vue-query",output:"@tanstack/vue-query",queryKeyNameBuilder:"{{name}}QueryKey",queryOptions:true,queryOptionsNameBuilder:"{{name}}Options"};var Lp="fastify",Ul=({context:e,operation:t})=>{let r=e.file({id:Lp}),n=e.file({id:N}),s=[],i=n.identifier({$ref:$({config:e.config,id:t.id,type:"data"}),namespace:"type"});i.name&&(t.body&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:i.name}),s.push({isRequired:t.body.required,name:"Body",type:`${i.name}['body']`})),t.parameters&&(t.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:i.name}),s.push({isRequired:ut(t.parameters.header),name:"Headers",type:`${i.name}['headers']`})),t.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:i.name}),s.push({isRequired:ut(t.parameters.path),name:"Params",type:`${i.name}['path']`})),t.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:i.name}),s.push({isRequired:ut(t.parameters.query),name:"Querystring",type:`${i.name}['query']`}))));let{errors:a,responses:p}=Me(t),c,m=n.identifier({$ref:$({config:e.config,id:t.id,type:"errors"}),namespace:"type"});if(m.name&&a&&a.properties){let y=Object.keys(a.properties);if(y.length){if(!y.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:m.name}),c=o.typeReferenceNode({typeName:m.name});else if(y.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:m.name});let O=o.typeReferenceNode({typeName:m.name}),b=o.literalTypeNode({literal:o.stringLiteral({text:"default"})});c=o.typeReferenceNode({typeArguments:[O,b],typeName:"Omit"});}}}let f,l=n.identifier({$ref:$({config:e.config,id:t.id,type:"responses"}),namespace:"type"});if(l.name&&p&&p.properties){let y=Object.keys(p.properties);if(y.length){if(!y.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:l.name}),f=o.typeReferenceNode({typeName:l.name});else if(y.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:N}),name:l.name});let O=o.typeReferenceNode({typeName:l.name}),b=o.literalTypeNode({literal:o.stringLiteral({text:"default"})});f=o.typeReferenceNode({typeArguments:[O,b],typeName:"Omit"});}}}let u=[c,f].filter(Boolean);return u.length&&s.push({name:"Reply",type:o.typeIntersectionNode({types:u})}),s.length?{name:t.id,type:o.typeNode("RouteHandler",[o.typeInterfaceNode({properties:s,useLegacyResolution:false})])}:void 0},Dp=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:Lp,path:t.output}),n=[];e.subscribe("operation",({operation:s})=>{let i=Ul({context:e,operation:s});i&&n.push(i);}),e.subscribe("after",()=>{let s=r.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});s.name&&(n.length&&r.import({asType:true,module:"fastify",name:"RouteHandler"}),r.add(o.typeAliasDeclaration({exportType:true,name:s.name,type:o.typeInterfaceNode({properties:n,useLegacyResolution:false})})));});};var si={_dependencies:["@hey-api/typescript"],_handler:Dp,_handlerLegacy:()=>{},exportFromIndex:false,name:"fastify",output:"fastify"};var oi=e=>`v-${e}`,ct=e=>e.length===1?e[0]:o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.methods.pipe}),parameters:e}),zl=({context:e,plugin:t,result:r,schema:n})=>{let s=o.propertyAccessExpression({expression:h.v,name:h.schemas.array}),i;if(!n.items)i=o.callExpression({functionName:s,parameters:[Mr({schema:{}})]});else {n=ue({schema:n});let a=n.items.map(p=>{let c=Ie({context:e,plugin:t,result:r,schema:p});return ct(c)});a.length===1?i=o.callExpression({functionName:s,parameters:a}):(n.logicalOperator,i=o.callExpression({functionName:s,parameters:[Mr({schema:{}})]}));}return n.minItems===n.maxItems&&n.minItems!==void 0?i=o.callExpression({functionName:o.propertyAccessExpression({expression:i,name:h.actions.length}),parameters:[o.valueToExpression({value:n.minItems})]}):(n.minItems!==void 0&&(i=o.callExpression({functionName:o.propertyAccessExpression({expression:i,name:o.identifier({text:"min"})}),parameters:[o.valueToExpression({value:n.minItems})]})),n.maxItems!==void 0&&(i=o.callExpression({functionName:o.propertyAccessExpression({expression:i,name:o.identifier({text:"max"})}),parameters:[o.valueToExpression({value:n.maxItems})]}))),i},Ql=({schema:e})=>typeof e.const=="boolean"?o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[o.ots.boolean(e.const)]}):o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.boolean})}),Xl=({context:e,schema:t})=>{let r=[],n=false;for(let i of t.items??[])i.type==="string"&&typeof i.const=="string"?r.push(o.stringLiteral({text:i.const})):(i.type==="null"||i.const===null)&&(n=true);if(!r.length)return Mr({schema:{}});let s=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.picklist}),parameters:[o.arrayLiteralExpression({elements:r,multiLine:false})]});return n&&(s=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.nullable}),parameters:[s]})),s},Hl=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.never})}),Gl=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.null})}),qr=({isBigInt:e,value:t})=>{let r=o.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?o.callExpression({functionName:"BigInt",parameters:[r]}):r},Jl=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[o.ots.number(e.const)]});let r=[],n=o.callExpression({functionName:t?o.propertyAccessExpression({expression:h.v,name:h.schemas.bigInt}):o.propertyAccessExpression({expression:h.v,name:h.schemas.number})});if(r.push(n),!t&&e.type==="integer"){let s=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.integer})});r.push(s);}if(e.exclusiveMinimum!==void 0){let s=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.gtValue}),parameters:[qr({isBigInt:t,value:e.exclusiveMinimum})]});r.push(s);}else if(e.minimum!==void 0){let s=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.minValue}),parameters:[qr({isBigInt:t,value:e.minimum})]});r.push(s);}if(e.exclusiveMaximum!==void 0){let s=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.ltValue}),parameters:[qr({isBigInt:t,value:e.exclusiveMaximum})]});r.push(s);}else if(e.maximum!==void 0){let s=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.maxValue}),parameters:[qr({isBigInt:t,value:e.maximum})]});r.push(s);}return ct(r)},Zl=({context:e,plugin:t,result:r,schema:n})=>{let s=[],i=n.required??[];for(let p in n.properties){let c=n.properties[p],m=i.includes(p),f=Ie({context:e,optional:!m,plugin:t,result:r,schema:c});de.lastIndex=0;let l;de.test(p)?l=p.startsWith("-")?g.factory.createStringLiteral(p):g.factory.createNumericLiteral(p):l=p,(p.match(/^[0-9]/)&&p.match(/\D+/g)||p.match(/\W/g))&&!p.startsWith("'")&&!p.endsWith("'")&&(l=`'${p}'`),s.push(o.propertyAssignment({initializer:ct(f),name:l}));}let a=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.object}),parameters:[g.factory.createObjectLiteralExpression(s,true)]});return {anyType:h.types.GenericSchema.text,expression:a}},Yl=({schema:e})=>{if(typeof e.const=="string")return o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[o.ots.string(e.const)]});let t=[],r=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.string})});if(t.push(r),e.format)switch(e.format){case "date":t.push(o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.isoDate})}));break;case "date-time":t.push(o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.isoDateTime})}));break;case "ipv4":case "ipv6":t.push(o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.ip})}));break;case "uri":t.push(o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.url})}));break;case "email":case "time":case "uuid":t.push(o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:o.identifier({text:e.format})})}));break}if(e.minLength===e.maxLength&&e.minLength!==void 0){let n=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.length}),parameters:[o.valueToExpression({value:e.minLength})]});t.push(n);}else {if(e.minLength!==void 0){let n=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.minLength}),parameters:[o.valueToExpression({value:e.minLength})]});t.push(n);}if(e.maxLength!==void 0){let n=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.maxLength}),parameters:[o.valueToExpression({value:e.maxLength})]});t.push(n);}}if(e.pattern){let n=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.regex}),parameters:[o.regularExpressionLiteral({text:e.pattern})]});t.push(n);}return ct(t)},eu=({context:e,plugin:t,result:r,schema:n})=>{if(n.const&&Array.isArray(n.const)){let s=n.const.map(a=>o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[o.valueToExpression({value:a})]}));return o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.tuple}),parameters:[o.arrayLiteralExpression({elements:s})]})}if(n.items){let s=n.items.map(a=>{let p=Ie({context:e,plugin:t,result:r,schema:a});return ct(p)});return o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.tuple}),parameters:[o.arrayLiteralExpression({elements:s})]})}return Mr({schema:{}})},tu=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.undefined})}),Mr=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.unknown})}),ru=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.void})}),_p=({context:e,plugin:t,result:r,schema:n})=>{switch(n.type){case "array":return {expression:zl({context:e,plugin:t,result:r,schema:n})};case "boolean":return {expression:Ql({schema:n})};case "enum":return {expression:Xl({context:e,schema:n})};case "integer":case "number":return {expression:Jl({schema:n})};case "never":return {expression:Hl({schema:n})};case "null":return {expression:Gl({schema:n})};case "object":return Zl({context:e,plugin:t,result:r,schema:n});case "string":return {expression:Yl({schema:n})};case "tuple":return {expression:eu({context:e,plugin:t,result:r,schema:n})};case "undefined":return {expression:tu({schema:n})};case "unknown":return {expression:Mr({schema:n})};case "void":return {expression:ru({schema:n})}}},nu=({context:e,operation:t,plugin:r,result:n})=>{if(t.body&&Ie({$ref:$({case:"camelCase",config:e.config,id:t.id,type:"data"}),context:e,plugin:r,result:n,schema:t.body.schema}),t.parameters)for(let s in t.parameters){let i=t.parameters[s];for(let a in i){let p=i[a];Ie({$ref:$({case:"camelCase",config:e.config,id:t.id,parameterId:p.name,type:"parameter"}),context:e,plugin:r,result:n,schema:p.schema});}}if(t.responses){let{response:s}=Me(t);s&&Ie({$ref:$({case:"camelCase",config:e.config,id:t.id,type:"response"}),context:e,plugin:r,result:n,schema:s});}},Ie=({$ref:e,context:t,optional:r,plugin:n,result:s,schema:i})=>{let a=t.file({id:lr}),p,c,m=[];if(e&&(s.circularReferenceTracker.add(e),c=a.identifier({$ref:e,create:true,nameTransformer:oi,namespace:"value"})),i.$ref){let f=s.circularReferenceTracker.has(i.$ref),l=a.identifier({$ref:i.$ref,nameTransformer:oi,namespace:"value"});if(!l.name){let u=t.resolveIrRef(i.$ref),d=Ie({$ref:i.$ref,context:t,plugin:n,result:s,schema:u});m.push(...d),l=a.identifier({$ref:i.$ref,nameTransformer:oi,namespace:"value"});}if(l.name){let u=o.identifier({text:l.name});if(f){let d=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.lazy}),parameters:[o.arrowFunction({statements:[o.returnStatement({expression:u})]})]});m.push(d),s.hasCircularReference=true;}else m.push(u);}}else if(i.type){let f=_p({context:t,plugin:n,result:s,schema:i});p=f.anyType,m.push(f.expression);}else if(i.items)if(i=ue({schema:i}),i.items){let f=i.items.map(l=>{let u=Ie({context:t,plugin:n,result:s,schema:l});return ct(u)});if(i.logicalOperator==="and"){let l=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.intersect}),parameters:[o.arrayLiteralExpression({elements:f})]});m.push(l);}else {let l=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.union}),parameters:[o.arrayLiteralExpression({elements:f})]});m.push(l);}}else {let f=Ie({context:t,plugin:n,result:s,schema:i});m.push(...f);}else {let f=_p({context:t,plugin:n,result:s,schema:{type:"unknown"}});p=f.anyType,m.push(f.expression);}if(e&&s.circularReferenceTracker.delete(e),m.length&&i.accessScope==="read"){let f=o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.actions.readonly})});m.push(f);}if(m.length){let f;if(i.default!==void 0){let l=i.type==="integer"&&i.format==="int64";f=qr({isBigInt:l,value:i.default}),f&&(m=[o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.optional}),parameters:[ct(m),f]})]);}r&&!f&&(m=[o.callExpression({functionName:o.propertyAccessExpression({expression:h.v,name:h.schemas.optional}),parameters:[ct(m)]})]);}if(c&&c.name&&c.created){let f=o.constVariable({comment:n.comments?Ae({schema:i}):void 0,exportConst:true,expression:ct(m),name:c.name,typeName:s.hasCircularReference?o.propertyAccessExpression({expression:h.v,name:p||h.types.GenericSchema.text}):void 0});return a.add(f),[]}return m},Bp=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:lr,identifierCase:"camelCase",path:t.output}).import({alias:h.v.text,module:"valibot",name:"*"}),e.subscribe("operation",({operation:n})=>{nu({context:e,operation:n,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false}});}),e.subscribe("parameter",({$ref:n,parameter:s})=>{Ie({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s.schema});}),e.subscribe("requestBody",({$ref:n,requestBody:s})=>{Ie({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s.schema});}),e.subscribe("schema",({$ref:n,schema:s})=>{Ie({$ref:n,context:e,plugin:t,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s});});};var ai={_handler:Bp,_handlerLegacy:()=>{},_tags:["validator"],comments:true,exportFromIndex:false,name:"valibot",output:"valibot"};var pi={_handler:Xa,_handlerLegacy:()=>{},_tags:["validator"],comments:true,exportFromIndex:false,metadata:false,name:"zod",output:"zod"};var Fr={"@hey-api/client-axios":Ss,"@hey-api/client-fetch":Rs,"@hey-api/client-next":Is,"@hey-api/client-nuxt":Cs,"@hey-api/schemas":ws,"@hey-api/sdk":Bs,"@hey-api/transformers":Ks,"@hey-api/typescript":Xs,"@tanstack/angular-query-experimental":Ys,"@tanstack/react-query":ei,"@tanstack/solid-query":ti,"@tanstack/svelte-query":ri,"@tanstack/vue-query":ni,fastify:si,"legacy/angular":Ts,"legacy/axios":Ps,"legacy/fetch":js,"legacy/node":As,"legacy/xhr":Es,valibot:ai,zod:pi};var Kp=["@hey-api/typescript","@hey-api/sdk"],Lr={enabled:false,interval:1e3,timeout:6e4},ou=e=>{let t={path:"",validate_EXPERIMENTAL:false,watch:Lr};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:"https://get.heyapi.dev",...e.input},t.watch!==void 0&&(t.watch=Vp(t))):t={...t,path:e.input},t.validate_EXPERIMENTAL===true&&(t.validate_EXPERIMENTAL="warn"),e.watch!==void 0&&t.watch.enabled===Lr.enabled&&t.watch.interval===Lr.interval&&t.watch.timeout===Lr.timeout&&(t.watch=Vp({path:t.path,watch:e.watch})),t},au=({pluginConfigs:e,userPlugins:t,userPluginsConfig:r})=>{let n=new Set,s=new Set,i={},a=p=>{if(n.has(p))throw new Error(`Circular reference detected at '${p}'`);if(!s.has(p)){if(n.add(p),!e[p])throw new Error(`unknown plugin dependency "${p}" - do you need to register a custom plugin with this name?`);let m=Fr[p],f=r[p];if(f&&m){let u=Object.keys(f).find(d=>d.startsWith("_"));if(u)throw new Error(`cannot register plugin "${p}" - attempting to override a native plugin option "${u}"`)}let l={_dependencies:[],...m,...f};if(l._infer){let u={ensureDependency:d=>{typeof d=="string"&&!l._dependencies.includes(d)&&(l._dependencies=[...l._dependencies,d]);},pluginByTag:({defaultPlugin:d,errorMessage:y,tag:x})=>{for(let O of t){let b=Fr[O]||e[O];if(b&&b._tags?.includes(x)&&O!==p)return O}if(d){let O=Fr[d]||e[d];if(O&&O._tags?.includes(x)&&d!==p)return d}throw new Error(y||`missing plugin - no plugin with tag "${x}" found`)}};l._infer(l,u);}for(let u of l._dependencies)a(u);n.delete(p),s.add(p),i[p]=l;}};for(let p of t)a(p);return {pluginOrder:Array.from(s),plugins:i}},pu=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t},cu=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e._tags&&e._tags.includes("client"),mu=e=>{let t={},r=Kp;e.plugins&&(e.plugins=e.plugins.filter(s=>typeof s=="string"&&s||typeof s!="string"&&s.name),e.plugins.length===1&&cu(e.plugins[0])?r=[...Kp,...e.plugins]:r=e.plugins);let n=r.map(s=>typeof s=="string"?s:(s.name&&(t[s.name]=s),s.name)).filter(Boolean);return au({pluginConfigs:{...t,...Fr},userPlugins:n,userPluginsConfig:t})},Vp=e=>{let t={...Lr};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},fu=(e,t)=>({...e||{},...t||{}}),Wp=(e,t)=>{let r=e||{},n=t||{},s={...r,...n};return typeof s.logs=="object"&&(s.logs=fu(r.logs,n.logs)),s},WA=async e=>{let t;if(e?.configFile){let i=e.configFile.split(".");t=i.slice(0,i.length-1).join(".");}let{config:r}=await loadConfig({configFile:t,name:"openapi-ts"}),n=Array.isArray(e)?e:Array.isArray(r)?r.map(i=>Wp(i,e)):[Wp(r,e)],s=[];for(let i of n){let{base:a,configFile:p="",dryRun:c=false,experimentalParser:m=true,exportCore:f=true,name:l,request:u,useOptions:d=true}=i,y=[],x=Aa(i);x.level==="debug"&&console.warn("userConfig:",i);let O=ou(i),b=pu(i);O.path||y.push(new Error("missing input - which OpenAPI specification should we use to generate your output?")),b.path||y.push(new Error("missing output - where should we generate your output?")),d||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),b.path=z.resolve(process.cwd(),b.path);let A;try{A=mu(i);}catch(L){y.push(L),A={pluginOrder:[],plugins:{}};}let P=Si({...A,base:a,configFile:p,dryRun:c,experimentalParser:m,exportCore:false,input:O,logs:x,name:l,output:b,request:u,useOptions:d});P.exportCore=K(P)?f:false,x.level==="debug"&&console.warn("config:",P),s.push({config:P,errors:y});}return s};
export{JS as A,ZS as B,Aa as C,bt as D,St as E,Kp as F,WA as G,mi as a,lu as b,uu as c,E as d,R as e,K as f,Tt as g,gs as h,ra as i,Je as j,ed as k,fR as l,o as m,j as n,qe as o,Gu as p,Ju as q,Wu as r,ad as s,pd as t,cd as u,md as v,Ze as w,yi as x,or as y,Ve as z};//# sourceMappingURL=chunk-QUDCWAFW.js.map
//# sourceMappingURL=chunk-QUDCWAFW.js.map